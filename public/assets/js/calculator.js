let Calculator=function({calculatorId:e,basePrice:t}){this.calculator=document.querySelector(e),this.basePrice=+t,this.DOMElements={duration:this.calculator.querySelector("[name = duration]"),quantity:this.calculator.querySelector("[name = quantity]"),costPerPerson:this.calculator.querySelector("[name = costPerPerson]"),formatRadios:this.calculator.querySelectorAll("[name = format]"),kkRadio:this.calculator.querySelector(".calculator-kk-radio"),radios:this.calculator.querySelectorAll("[type=checkbox]"),result:this.calculator.querySelector(".calculator__result span")}};Calculator.prototype={init:function(){this.initListeners()},getIncreasePercentage:function(){let e=0;return this.DOMElements.radios.forEach(function(t){t.checked&&(e+=+t.value)}),e},calculate:function(){let e=this.DOMElements.duration.value,t=this.getIncreasePercentage(),n=t*e/100,c=+e+n,a=c*this.basePrice,l=Math.round(a/13),o=this.DOMElements.quantity.value;this.DOMElements.costPerPerson.value=this.numberWithSpaces(l),this.DOMElements.result.innerHTML=this.numberWithSpaces(o*l+""),console.log("Процент надбавки: "+t),console.log("Процент надбавки: "+n),console.log("Общая продолжительность: "+c),console.log("Стоимость за человека: "+l),console.log("=======================")},uncheckAllExceptOne:function(e){let t=e.name;document.querySelectorAll(`[name=${t}]`).forEach(function(e){e.checked=!1}),e.checked=!0},initListeners:function(){let e=this;this.DOMElements.formatRadios.forEach(function(t){t.addEventListener("change",function(t){e.DOMElements.kkRadio.value=t.target.dataset.kk})}),this.DOMElements.radios.forEach(function(t){t.addEventListener("change",function(){e.calculate()})}),this.DOMElements.radios.forEach(function(t){t.addEventListener("click",function(){t.checked&&e.uncheckAllExceptOne(t)})}),this.DOMElements.duration.addEventListener("keyup",function(){e.calculate()}),this.DOMElements.quantity.addEventListener("keyup",function(){e.calculate()})},numberWithSpaces:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}};
