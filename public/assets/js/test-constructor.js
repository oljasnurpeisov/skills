let TestConstructor=function({textAnswerTpl:a,picAnswerTpl:b,questionTpl:c}){function d(){let a=document.querySelector("#questionsCount"),b=document.querySelector("#passingScore"),c=f.children.length;a.innerHTML=c,b.value=Math.ceil(.8*c)}const e=document.querySelector("#addQuestion"),f=document.querySelector("#questions");let g=function(c){function f(){let b=document.createElement("div");b.innerHTML=a.replace("$answersName",`answers[${m}][]`);let c=b.querySelector(".form-group");b.querySelector(".addon").innerHTML="";let d=document.createElement("div");d.className="btn-icon extra-small icon-close",d.addEventListener("click",function(){c.remove()}),b.querySelector("input[required]").removeAttribute("required"),b.querySelector(".addon").append(d),k.append(b.children[0])}function g(){let a=document.createElement("div");a.innerHTML=b.replace("$answersName",`answers[${m}][]`);let c=a.querySelector(".form-group"),d=a.querySelector(".dropzone-multiple");a.querySelector(".addon").innerHTML="";let e=document.createElement("div");e.className="btn-icon extra-small icon-close",e.addEventListener("click",function(){c.remove()}),a.querySelector(".addon").append(e),a.querySelector("input[required]").removeAttribute("required"),k.append(a.children[0]),h(d)}function h(a){let b=a.dataset.url,c=+a.dataset.maxfiles,d=+a.dataset.maxsize,e=a.dataset.acceptedfiles,f=new CustomDropzone(a,b,c,d,e,"image/*"===e)}const i=c.querySelector(".icon-close"),j=c.querySelector("[name=\"isPictures\"]"),k=c.querySelector(".answers"),l=c.querySelector(".question-text"),m=l.name.replace(/(^.*\[|\].*$)/g,""),n=c.querySelector(".add-btn"),o=this;TinyMceInit(".tinymce-here"),i&&i.addEventListener("click",function(){c.remove(),d()}),n.addEventListener("click",f),j.addEventListener("change",function(a){k.innerHTML="",a.target.checked?(o.appendRequiredPicAnswers(),n.removeEventListener("click",f),n.addEventListener("click",g)):(o.appendRequiredTextAnswers(),n.removeEventListener("click",g),n.addEventListener("click",f))}),this.appendRequiredTextAnswers=function(){let b=a.replace("$answersName",`answers[${m}][]`);k.innerHTML=b+b},this.appendRequiredPicAnswers=function(){let a=b.replace("$answersName",`answers[${m}][]`);k.innerHTML=a+a,k.querySelectorAll(".dropzone-multiple").forEach(function(a){h(a)})}};document.querySelectorAll(".question").forEach(function(a){g(a)}),e.addEventListener("click",function(a){a.preventDefault();let b=f.lastElementChild.querySelector(".question-text"),e=+b.name.replace(/(^.*\[|\].*$)/g,"")+1,h=c.replace("$questionName",`questions[${e}]`),i=document.createElement("div");i.className="question form-group",i.innerHTML=h;let j=document.createElement("div");j.className="btn-icon small icon-close",j.addEventListener("click",function(){i.remove()}),i.querySelector(".addon-btn").innerHTML="",i.querySelector(".addon-btn").append(j),f.appendChild(i);let k=new g(i);k.appendRequiredTextAnswers(),d()}),d()};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QtY29uc3RydWN0b3IuanMiXSwibmFtZXMiOlsiVGVzdENvbnN0cnVjdG9yIiwidGV4dEFuc3dlclRwbCIsInBpY0Fuc3dlclRwbCIsInF1ZXN0aW9uVHBsIiwidXBkYXRlQW5zd2Vyc0NvdW50IiwicXVlc3Rpb25zQ291bnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwYXNzaW5nU2NvcmUiLCJ0b3RhbCIsInF1ZXN0aW9uc1dyYXBwZXIiLCJjaGlsZHJlbiIsImxlbmd0aCIsImlubmVySFRNTCIsInZhbHVlIiwiTWF0aCIsImNlaWwiLCJhZGRRdWVzdGlvbkJ0biIsIlF1ZXN0aW9uQ29tcG9uZW50IiwiZWwiLCJhZGRUZXh0QW5zd2VyIiwibmV3QW5zd2VyIiwiY3JlYXRlRWxlbWVudCIsInJlcGxhY2UiLCJxdWVzdGlvbkluZGV4IiwiZm9ybUdyb3VwIiwicmVtb3ZlQnRuIiwiY2xhc3NOYW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImFwcGVuZCIsImFuc3dlcnNDb250YWluZXIiLCJhZGRQaWNBbnN3ZXIiLCJkcm9wem9uZUVsIiwiaW5pdERyb3B6b25lIiwiaXRlbSIsInVybCIsImRhdGFzZXQiLCJtYXhGaWxlcyIsIm1heGZpbGVzIiwibWF4U2l6ZSIsIm1heHNpemUiLCJhY2NlcHRlZEZpbGVzIiwiYWNjZXB0ZWRmaWxlcyIsImNyZWF0ZURyb3B6b25lIiwiQ3VzdG9tRHJvcHpvbmUiLCJhbnN3ZXJzVHlwZUNoZWNrYm94IiwicXVlc3Rpb25UZXh0SW5wdXQiLCJuYW1lIiwiYWRkQW5zd2VyQnRuIiwic2VsZiIsIlRpbnlNY2VJbml0IiwiZSIsInRhcmdldCIsImNoZWNrZWQiLCJhcHBlbmRSZXF1aXJlZFBpY0Fuc3dlcnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYXBwZW5kUmVxdWlyZWRUZXh0QW5zd2VycyIsInRwbCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwicHJldmVudERlZmF1bHQiLCJsYXN0RWxlbWVudENoaWxkIiwibmV3UXVlc3Rpb24iLCJyZW1vdmVRdWVzdGlvbkJ0biIsImFwcGVuZENoaWxkIiwibmV3UXVlc3Rpb25Db21wb25lbnQiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLENBQUFBLGVBQWUsQ0FBRyxTQUFVLENBQUNDLGFBQWEsQ0FBYkEsQ0FBRCxDQUFnQkMsWUFBWSxDQUFaQSxDQUFoQixDQUE4QkMsV0FBVyxDQUFYQSxDQUE5QixDQUFWLENBQXNELENBa0oxRSxRQUFTQyxDQUFBQSxDQUFULEVBQThCLENBQzVCLEdBQUlDLENBQUFBLENBQWMsQ0FBR0MsUUFBUSxDQUFDQyxhQUFULENBQXVCLGlCQUF2QixDQUFyQixDQUNFQyxDQUFZLENBQUdGLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixlQUF2QixDQURqQixDQUVFRSxDQUFLLENBQUdDLENBQWdCLENBQUNDLFFBQWpCLENBQTBCQyxNQUZwQyxDQUdBUCxDQUFjLENBQUNRLFNBQWYsQ0FBMkJKLENBSkMsQ0FLNUJELENBQVksQ0FBQ00sS0FBYixDQUFxQkMsSUFBSSxDQUFDQyxJQUFMLENBQWdCLEVBQU4sQ0FBQVAsQ0FBVixDQUN0QixDQXhKeUUsS0FDcEVRLENBQUFBLENBQWMsQ0FBR1gsUUFBUSxDQUFDQyxhQUFULENBQXVCLGNBQXZCLENBRG1ELENBRXBFRyxDQUFnQixDQUFHSixRQUFRLENBQUNDLGFBQVQsQ0FBdUIsWUFBdkIsQ0FGaUQsQ0FJMUUsR0FBSVcsQ0FBQUEsQ0FBaUIsQ0FBRyxTQUFVQyxDQUFWLENBQWMsQ0FzQ3BDLFFBQVNDLENBQUFBLENBQVQsRUFBeUIsQ0FDdkIsR0FBSUMsQ0FBQUEsQ0FBUyxDQUFHZixRQUFRLENBQUNnQixhQUFULENBQXVCLEtBQXZCLENBQWhCLENBQ0FELENBQVMsQ0FBQ1IsU0FBVixDQUFzQlosQ0FBYSxDQUFDc0IsT0FBZCxDQUFzQixjQUF0QixDQUF1QyxXQUFVQyxDQUFjLEtBQS9ELENBRkMsQ0FJdkIsR0FBSUMsQ0FBQUEsQ0FBUyxDQUFH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LENBQUcxRCxRQUFRLENBQUNnQixhQUFULENBQXVCLEtBQXZCLENBUmtDLENBU3BEMEMsQ0FBVyxDQUFDckMsU0FBWixDQUF3QixxQkFUNEIsQ0FVcERxQyxDQUFXLENBQUNuRCxTQUFaLENBQXdCOEMsQ0FWNEIsQ0FZcEQsR0FBSU0sQ0FBQUEsQ0FBaUIsQ0FBRzNELFFBQVEsQ0FBQ2dCLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBeEIsQ0FDQTJDLENBQWlCLENBQUN0QyxTQUFsQixDQUE4QiwyQkFic0IsQ0FlcERzQyxDQUFpQixDQUFDckMsZ0JBQWxCLENBQW1DLE9BQW5DLENBQTRDLFVBQVksQ0FDdERvQyxDQUFXLENBQUNuQyxNQUFaLEVBQ0QsQ0FGRCxDQWZvRCxDQW1CcERtQyxDQUFXLENBQUN6RCxhQUFaLENBQTBCLFlBQTFCLEVBQXdDTSxTQUF4QyxDQUFvRCxFQW5CQSxDQW9CcERtRCxDQUFXLENBQUN6RCxhQUFaLENBQTBCLFlBQTFCLEVBQXdDd0IsTUFBeEMsQ0FBK0NrQyxDQUEvQyxDQXBCb0QsQ0FzQnBEdkQsQ0FBZ0IsQ0FBQ3dELFdBQWpCLENBQTZCRixDQUE3QixDQXRCb0QsQ0F3QnBELEdBQUlHLENBQUFBLENBQW9CLENBQUcsR0FBSWpELENBQUFBLENBQUosQ0FBc0I4QyxDQUF0QixDQUEzQixDQUNBRyxDQUFvQixDQUFDVCx5QkFBckIsRUF6Qm9ELENBMkJwRHRELENBQWtCLEVBQ25CLENBNUJELENBcEgwRSxDQTBKMUVBLENBQWtCLEVBQ25CLENBM0pEIiwic291cmNlc0NvbnRlbnQiOlsibGV0IFRlc3RDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uICh7dGV4dEFuc3dlclRwbCwgcGljQW5zd2VyVHBsLCBxdWVzdGlvblRwbH0pIHtcclxuICBjb25zdCBhZGRRdWVzdGlvbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGRRdWVzdGlvbicpO1xyXG4gIGNvbnN0IHF1ZXN0aW9uc1dyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcXVlc3Rpb25zJyk7XHJcblxyXG4gIGxldCBRdWVzdGlvbkNvbXBvbmVudCA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgY29uc3QgcmVtb3ZlQnRuID0gZWwucXVlcnlTZWxlY3RvcignLmljb24tY2xvc2UnKSxcclxuICAgICAgYW5zd2Vyc1R5cGVDaGVja2JveCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwiaXNQaWN0dXJlc1wiXScpLFxyXG4gICAgICBhbnN3ZXJzQ29udGFpbmVyID0gZWwucXVlcnlTZWxlY3RvcignLmFuc3dlcnMnKSxcclxuICAgICAgcXVlc3Rpb25UZXh0SW5wdXQgPSBlbC5xdWVyeVNlbGVjdG9yKCcucXVlc3Rpb24tdGV4dCcpLFxyXG4gICAgICBxdWVzdGlvbkluZGV4ID0gcXVlc3Rpb25UZXh0SW5wdXQubmFtZS5yZXBsYWNlKC8oXi4qXFxbfFxcXS4qJCkvZywgJycpLFxyXG4gICAgICBhZGRBbnN3ZXJCdG4gPSBlbC5xdWVyeVNlbGVjdG9yKCcuYWRkLWJ0bicpLFxyXG4gICAgICBzZWxmID0gdGhpcztcclxuXHJcbiAgICBUaW55TWNlSW5pdCgnLnRpbnltY2UtaGVyZScpO1xyXG5cclxuICAgIC8vIGNvbnNvbGUubG9nKHF1ZXN0aW9uVGV4dElucHV0LmNsYXNzTmFtZSk7XHJcblxyXG4gICAgLy9SZW1vdmUgQnRuIGV2ZW50XHJcbiAgICBpZiAocmVtb3ZlQnRuKSB7XHJcbiAgICAgIHJlbW92ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBlbC5yZW1vdmUoKTtcclxuICAgICAgICB1cGRhdGVBbnN3ZXJzQ291bnQoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQW5zd2VyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkVGV4dEFuc3dlcik7XHJcblxyXG4gICAgLy9DaGVja2JveCBldmVudFxyXG4gICAgYW5zd2Vyc1R5cGVDaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBhbnN3ZXJzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQpIHtcclxuICAgICAgICBzZWxmLmFwcGVuZFJlcXVpcmVkUGljQW5zd2VycygpO1xyXG4gICAgICAgIGFkZEFuc3dlckJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZFRleHRBbnN3ZXIpO1xyXG4gICAgICAgIGFkZEFuc3dlckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZFBpY0Fuc3dlcik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2VsZi5hcHBlbmRSZXF1aXJlZFRleHRBbnN3ZXJzKCk7XHJcbiAgICAgICAgYWRkQW5zd2VyQnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkUGljQW5zd2VyKTtcclxuICAgICAgICBhZGRBbnN3ZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGRUZXh0QW5zd2VyKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkVGV4dEFuc3dlcigpIHtcclxuICAgICAgbGV0IG5ld0Fuc3dlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICBuZXdBbnN3ZXIuaW5uZXJIVE1MID0gdGV4dEFuc3dlclRwbC5yZXBsYWNlKCckYW5zd2Vyc05hbWUnLCBgYW5zd2Vyc1ske3F1ZXN0aW9uSW5kZXh9XVtdYCk7XHJcblxyXG4gICAgICBsZXQgZm9ybUdyb3VwID0gbmV3QW5zd2VyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWdyb3VwJyk7XHJcblxyXG4gICAgICBuZXdBbnN3ZXIucXVlcnlTZWxlY3RvcignLmFkZG9uJykuaW5uZXJIVE1MID0gJyc7XHJcblxyXG4gICAgICBsZXQgcmVtb3ZlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIHJlbW92ZUJ0bi5jbGFzc05hbWUgPSAnYnRuLWljb24gZXh0cmEtc21hbGwgaWNvbi1jbG9zZSc7XHJcblxyXG4gICAgICByZW1vdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9ybUdyb3VwLnJlbW92ZSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIG5ld0Fuc3dlci5xdWVyeVNlbGVjdG9yKCdpbnB1dFtyZXF1aXJlZF0nKS5yZW1vdmVBdHRyaWJ1dGUoJ3JlcXVpcmVkJyk7XHJcblxyXG4gICAgICBuZXdBbnN3ZXIucXVlcnlTZWxlY3RvcignLmFkZG9uJykuYXBwZW5kKHJlbW92ZUJ0bik7XHJcblxyXG4gICAgICBhbnN3ZXJzQ29udGFpbmVyLmFwcGVuZChuZXdBbnN3ZXIuY2hpbGRyZW5bMF0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZFBpY0Fuc3dlcigpIHtcclxuICAgICAgbGV0IG5ld0Fuc3dlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICBuZXdBbnN3ZXIuaW5uZXJIVE1MID0gcGljQW5zd2VyVHBsLnJlcGxhY2UoJyRhbnN3ZXJzTmFtZScsIGBhbnN3ZXJzWyR7cXVlc3Rpb25JbmRleH1dW11gKTtcclxuXHJcbiAgICAgIGxldCBmb3JtR3JvdXAgPSBuZXdBbnN3ZXIucXVlcnlTZWxlY3RvcignLmZvcm0tZ3JvdXAnKTtcclxuICAgICAgbGV0IGRyb3B6b25lRWwgPSBuZXdBbnN3ZXIucXVlcnlTZWxlY3RvcignLmRyb3B6b25lLW11bHRpcGxlJyk7XHJcblxyXG4gICAgICBuZXdBbnN3ZXIucXVlcnlTZWxlY3RvcignLmFkZG9uJykuaW5uZXJIVE1MID0gJyc7XHJcblxyXG4gICAgICBsZXQgcmVtb3ZlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIHJlbW92ZUJ0bi5jbGFzc05hbWUgPSAnYnRuLWljb24gZXh0cmEtc21hbGwgaWNvbi1jbG9zZSc7XHJcblxyXG4gICAgICByZW1vdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9ybUdyb3VwLnJlbW92ZSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIG5ld0Fuc3dlci5xdWVyeVNlbGVjdG9yKCcuYWRkb24nKS5hcHBlbmQocmVtb3ZlQnRuKTtcclxuXHJcbiAgICAgIG5ld0Fuc3dlci5xdWVyeVNlbGVjdG9yKCdpbnB1dFtyZXF1aXJlZF0nKS5yZW1vdmVBdHRyaWJ1dGUoJ3JlcXVpcmVkJyk7XHJcblxyXG4gICAgICBhbnN3ZXJzQ29udGFpbmVyLmFwcGVuZChuZXdBbnN3ZXIuY2hpbGRyZW5bMF0pO1xyXG5cclxuICAgICAgaW5pdERyb3B6b25lKGRyb3B6b25lRWwpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGluaXREcm9wem9uZShpdGVtKSB7XHJcbiAgICAgIGxldCB1cmwgPSBpdGVtLmRhdGFzZXQudXJsLFxyXG4gICAgICAgIG1heEZpbGVzID0gTnVtYmVyKGl0ZW0uZGF0YXNldC5tYXhmaWxlcyksXHJcbiAgICAgICAgbWF4U2l6ZSA9IE51bWJlcihpdGVtLmRhdGFzZXQubWF4c2l6ZSksXHJcbiAgICAgICAgYWNjZXB0ZWRGaWxlcyA9IGl0ZW0uZGF0YXNldC5hY2NlcHRlZGZpbGVzO1xyXG4gICAgICBsZXQgY3JlYXRlRHJvcHpvbmUgPSBuZXcgQ3VzdG9tRHJvcHpvbmUoaXRlbSwgdXJsLCBtYXhGaWxlcywgbWF4U2l6ZSwgYWNjZXB0ZWRGaWxlcywgYWNjZXB0ZWRGaWxlcyA9PT0gJ2ltYWdlLyonKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmFwcGVuZFJlcXVpcmVkVGV4dEFuc3dlcnMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgbGV0IHRwbCA9IHRleHRBbnN3ZXJUcGwucmVwbGFjZSgnJGFuc3dlcnNOYW1lJywgYGFuc3dlcnNbJHtxdWVzdGlvbkluZGV4fV1bXWApO1xyXG4gICAgICBhbnN3ZXJzQ29udGFpbmVyLmlubmVySFRNTCA9IHRwbCArIHRwbDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5hcHBlbmRSZXF1aXJlZFBpY0Fuc3dlcnMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgbGV0IHRwbCA9IHBpY0Fuc3dlclRwbC5yZXBsYWNlKCckYW5zd2Vyc05hbWUnLCBgYW5zd2Vyc1ske3F1ZXN0aW9uSW5kZXh9XVtdYCk7XHJcbiAgICAgIGFuc3dlcnNDb250YWluZXIuaW5uZXJIVE1MID0gdHBsICsgdHBsO1xyXG5cclxuICAgICAgYW5zd2Vyc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZHJvcHpvbmUtbXVsdGlwbGUnKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgaW5pdERyb3B6b25lKGl0ZW0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucXVlc3Rpb24nKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xyXG4gICAgbGV0IG5ld1F1ZXN0aW9uQ29tcG9uZW50ID0gUXVlc3Rpb25Db21wb25lbnQoZWwpO1xyXG4gIH0pO1xyXG5cclxuICBhZGRRdWVzdGlvbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgbGV0IHF1ZXN0aW9uVGV4dElucHV0ID0gcXVlc3Rpb25zV3JhcHBlci5sYXN0RWxlbWVudENoaWxkLnF1ZXJ5U2VsZWN0b3IoJy5xdWVzdGlvbi10ZXh0JyksXHJcbiAgICAgIHF1ZXN0aW9uSW5kZXggPSBOdW1iZXIocXVlc3Rpb25UZXh0SW5wdXQubmFtZS5yZXBsYWNlKC8oXi4qXFxbfFxcXS4qJCkvZywgJycpKSArIDE7XHJcblxyXG4gICAgbGV0IHRwbCA9IHF1ZXN0aW9uVHBsLnJlcGxhY2UoJyRxdWVzdGlvbk5hbWUnLCBgcXVlc3Rpb25zWyR7cXVlc3Rpb25JbmRleH1dYCk7XHJcblxyXG4gICAgbGV0IG5ld1F1ZXN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBuZXdRdWVzdGlvbi5jbGFzc05hbWUgPSAncXVlc3Rpb24gZm9ybS1ncm91cCc7XHJcbiAgICBuZXdRdWVzdGlvbi5pbm5lckhUTUwgPSB0cGw7XHJcblxyXG4gICAgbGV0IHJlbW92ZVF1ZXN0aW9uQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICByZW1vdmVRdWVzdGlvbkJ0bi5jbGFzc05hbWUgPSAnYnRuLWljb24gc21hbGwgaWNvbi1jbG9zZSc7XHJcblxyXG4gICAgcmVtb3ZlUXVlc3Rpb25CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIG5ld1F1ZXN0aW9uLnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbmV3UXVlc3Rpb24ucXVlcnlTZWxlY3RvcignLmFkZG9uLWJ0bicpLmlubmVySFRNTCA9ICcnO1xyXG4gICAgbmV3UXVlc3Rpb24ucXVlcnlTZWxlY3RvcignLmFkZG9uLWJ0bicpLmFwcGVuZChyZW1vdmVRdWVzdGlvbkJ0bik7XHJcblxyXG4gICAgcXVlc3Rpb25zV3JhcHBlci5hcHBlbmRDaGlsZChuZXdRdWVzdGlvbik7XHJcblxyXG4gICAgbGV0IG5ld1F1ZXN0aW9uQ29tcG9uZW50ID0gbmV3IFF1ZXN0aW9uQ29tcG9uZW50KG5ld1F1ZXN0aW9uKTtcclxuICAgIG5ld1F1ZXN0aW9uQ29tcG9uZW50LmFwcGVuZFJlcXVpcmVkVGV4dEFuc3dlcnMoKTtcclxuXHJcbiAgICB1cGRhdGVBbnN3ZXJzQ291bnQoKTtcclxuICB9KTtcclxuXHJcbiAgZnVuY3Rpb24gdXBkYXRlQW5zd2Vyc0NvdW50KCkge1xyXG4gICAgbGV0IHF1ZXN0aW9uc0NvdW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3F1ZXN0aW9uc0NvdW50JyksXHJcbiAgICAgIHBhc3NpbmdTY29yZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwYXNzaW5nU2NvcmUnKSxcclxuICAgICAgdG90YWwgPSBxdWVzdGlvbnNXcmFwcGVyLmNoaWxkcmVuLmxlbmd0aDtcclxuICAgIHF1ZXN0aW9uc0NvdW50LmlubmVySFRNTCA9IHRvdGFsO1xyXG4gICAgcGFzc2luZ1Njb3JlLnZhbHVlID0gTWF0aC5jZWlsKHRvdGFsKjAuOCk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVBbnN3ZXJzQ291bnQoKTtcclxufTsiXSwiZmlsZSI6InRlc3QtY29uc3RydWN0b3IuanMifQ==
