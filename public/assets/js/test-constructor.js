let TestConstructor=function({textAnswerTpl:a,picAnswerTpl:b,questionTpl:c}){function d(){let a=document.querySelector("#questionsCount"),b=document.querySelector("#passingScore"),c=f.children.length;a.innerHTML=c,b.value=Math.ceil(.8*c)}const e=document.querySelector("#addQuestion"),f=document.querySelector("#questions");let g=function(c){function f(){let b=document.createElement("div");b.innerHTML=a.replace("$answersName",`answers[${o}][]`);let c=b.querySelector(".form-group");b.querySelector(".addon").innerHTML="";let d=document.createElement("div");d.className="btn-icon extra-small icon-close",d.setAttribute("data-answer-remove",""),d.addEventListener("click",function(){c.remove()}),b.querySelector("input[required]").removeAttribute("required"),b.querySelector(".addon").append(d),m.append(b.children[0])}function g(){let a=document.createElement("div");a.innerHTML=b.replace("$answersName",`answers[${o}][]`);let c=a.querySelector(".form-group"),d=a.querySelector(".dropzone-multiple");a.querySelector(".addon").innerHTML="";let e=document.createElement("div");e.className="btn-icon extra-small icon-close",e.setAttribute("data-answer-remove",""),e.addEventListener("click",function(){c.remove()}),a.querySelector(".addon").append(e),a.querySelector("input[required]").removeAttribute("required"),m.append(a.children[0]),h(d)}function h(a){let b=a.dataset.url,c=+a.dataset.maxfiles,d=+a.dataset.maxsize,e=a.dataset.acceptedfiles,f=new CustomDropzone(a,b,c,d,e,"image/*"===e)}function i(){let b=a.replace("$answersName",`answers[${o}][]`);m.innerHTML=b+b}function j(){let a=b.replace("$answersName",`answers[${o}][]`);m.innerHTML=a+a,m.querySelectorAll(".dropzone-multiple").forEach(function(a){h(a)})}const k=c.querySelector("[data-question-remove]"),l=c.querySelector("input[type=\"checkbox\"]"),m=c.querySelector(".answers"),n=c.querySelector(".question-text"),o=n.name.replace(/(^.*\[|\].*$)/g,""),p=c.querySelector(".add-btn"),q=this;TinyMceInit(".tinymce-here"),k&&k.addEventListener("click",function(){c.remove(),d()}),l.checked?p.addEventListener("click",g):p.addEventListener("click",f),l.addEventListener("change",function(a){m.innerHTML="",a.target.checked?(j(),p.removeEventListener("click",f),p.addEventListener("click",g)):(i(),p.removeEventListener("click",g),p.addEventListener("click",f))}),this.appendRequiredTextAnswers=function(){i()},c.querySelectorAll("[data-answer-remove]").forEach(function(a){a.addEventListener("click",function(){a.closest(".form-group").remove()})})};document.querySelectorAll(".question").forEach(function(a){g(a)}),e.addEventListener("click",function(a){a.preventDefault();let b=f.lastElementChild.querySelector(".question-text"),e=+b.name.replace(/(^.*\[|\].*$)/g,"")+1,h=c.replace("$questionName",`questions[${e}]`),i=document.createElement("div");i.className="question form-group",i.innerHTML=h;let j=document.createElement("div");j.className="btn-icon small icon-close",j.setAttribute("data-question-remove",""),j.addEventListener("click",function(){i.remove()}),i.querySelector(".addon-btn").innerHTML="",i.querySelector(".addon-btn").append(j),f.appendChild(i);let k=new g(i);k.appendRequiredTextAnswers(),d()}),d()};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QtY29uc3RydWN0b3IuanMiXSwibmFtZXMiOlsiVGVzdENvbnN0cnVjdG9yIiwidGV4dEFuc3dlclRwbCIsInBpY0Fuc3dlclRwbCIsInF1ZXN0aW9uVHBsIiwidXBkYXRlQW5zd2Vyc0NvdW50IiwicXVlc3Rpb25zQ291bnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwYXNzaW5nU2NvcmUiLCJ0b3RhbCIsInF1ZXN0aW9uc1dyYXBwZXIiLCJjaGlsZHJlbiIsImxlbmd0aCIsImlubmVySFRNTCIsInZhbHVlIiwiTWF0aCIsImNlaWwiLCJhZGRRdWVzdGlvbkJ0biIsIlF1ZXN0aW9uQ29tcG9uZW50IiwiZWwiLCJhZGRUZXh0QW5zd2VyIiwibmV3QW5zd2VyIiwiY3JlYXRlRWxlbWVudCIsInJlcGxhY2UiLCJxdWVzdGlvbkluZGV4IiwiZm9ybUdyb3VwIiwicmVtb3ZlQnRuIiwiY2xhc3NOYW1lIiwic2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImFwcGVuZCIsImFuc3dlcnNDb250YWluZXIiLCJhZGRQaWNBbnN3ZXIiLCJkcm9wem9uZUVsIiwiaW5pdERyb3B6b25lIiwiaXRlbSIsInVybCIsImRhdGFzZXQiLCJtYXhGaWxlcyIsIm1heGZpbGVzIiwibWF4U2l6ZSIsIm1heHNpemUiLCJhY2NlcHRlZEZpbGVzIiwiYWNjZXB0ZWRmaWxlcyIsImNyZWF0ZURyb3B6b25lIiwiQ3VzdG9tRHJvcHpvbmUiLCJhcHBlbmRSZXF1aXJlZFRleHRBbnN3ZXJzIiwidHBsIiwiYXBwZW5kUmVxdWlyZWRQaWNBbnN3ZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJhbnN3ZXJzVHlwZUNoZWNrYm94IiwicXVlc3Rpb25UZXh0SW5wdXQiLCJuYW1lIiwiYWRkQW5zd2VyQnRuIiwic2VsZiIsIlRpbnlNY2VJbml0IiwiY2hlY2tlZCIsImUiLCJ0YXJnZXQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYnRuIiwiY2xvc2VzdCIsInByZXZlbnREZWZhdWx0IiwibGFzdEVsZW1lbnRDaGlsZCIsIm5ld1F1ZXN0aW9uIiwicmVtb3ZlUXVlc3Rpb25CdG4iLCJhcHBlbmRDaGlsZCIsIm5ld1F1ZXN0aW9uQ29tcG9uZW50Il0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxDQUFBQSxlQUFlLENBQUcsU0FBVSxDQUFDQyxhQUFhLENBQWJBLENBQUQsQ0FBZ0JDLFlBQVksQ0FBWkEsQ0FBaEIsQ0FBOEJDLFdBQVcsQ0FBWEEsQ0FBOUIsQ0FBVixDQUFzRCxDQWlLMUUsUUFBU0MsQ0FBQUEsQ0FBVCxFQUE4QixDQUM1QixHQUFJQyxDQUFBQSxDQUFjLENBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixpQkFBdkIsQ0FBckIsQ0FDRUMsQ0FBWSxDQUFHRixRQUFRLENBQUNDLGFBQVQsQ0FBdUIsZUFBdkIsQ0FEakIsQ0FFRUUsQ0FBSyxDQUFHQyxDQUFnQixDQUFDQyxRQUFqQixDQUEwQkMsTUFGcEMsQ0FHQVAsQ0FBYyxDQUFDUSxTQUFmLENBQTJCSixDQUpDLENBSzVCRCxDQUFZLENBQUNNLEtBQWIsQ0FBcUJDLElBQUksQ0FBQ0MsSUFBTCxDQUFnQixFQUFOLENBQUFQLENBQVYsQ0FDdEIsQ0F2S3lFLEtBQ3BFUSxDQUFBQSxDQUFjLENBQUdYLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixjQUF2QixDQURtRCxDQUVwRUcsQ0FBZ0IsQ0FBR0osUUFBUSxDQUFDQyxhQUFULENBQXVCLFlBQXZCLENBRmlELENBSTFFLEdBQUlXLENBQUFBLENBQWlCLENBQUcsU0FBVUMsQ0FBVixDQUFjLENBd0NwQyxRQUFTQyxDQUFBQSxDQUFULEVBQXlCLENBQ3ZCLEdBQUlDLENBQUFBLENBQVMsQ0FBR2YsUUFBUSxDQUFDZ0IsYUFBVCxDQUF1QixLQUF2QixDQUFoQixDQUNBRCxDQUFTLENBQUNSLFNBQVYsQ0FBc0JaLENBQWEsQ0FBQ3NCLE9BQWQsQ0FBc0IsY0FBdEIsQ0FBdUMsV0FBVUMsQ0FBYyxLQUEvRCxD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YUFBWixDQUEwQixZQUExQixFQUF3Q3lCLE1BQXhDLENBQStDb0MsQ0FBL0MsQ0FyQm9ELENBdUJwRDFELENBQWdCLENBQUMyRCxXQUFqQixDQUE2QkYsQ0FBN0IsQ0F2Qm9ELENBeUJwRCxHQUFJRyxDQUFBQSxDQUFvQixDQUFHLEdBQUlwRCxDQUFBQSxDQUFKLENBQXNCaUQsQ0FBdEIsQ0FBM0IsQ0FDQUcsQ0FBb0IsQ0FBQ3RCLHlCQUFyQixFQTFCb0QsQ0E0QnBENUMsQ0FBa0IsRUFDbkIsQ0E3QkQsQ0FsSTBFLENBeUsxRUEsQ0FBa0IsRUFDbkIsQ0ExS0QiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgVGVzdENvbnN0cnVjdG9yID0gZnVuY3Rpb24gKHt0ZXh0QW5zd2VyVHBsLCBwaWNBbnN3ZXJUcGwsIHF1ZXN0aW9uVHBsfSkge1xyXG4gIGNvbnN0IGFkZFF1ZXN0aW9uQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZFF1ZXN0aW9uJyk7XHJcbiAgY29uc3QgcXVlc3Rpb25zV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNxdWVzdGlvbnMnKTtcclxuXHJcbiAgbGV0IFF1ZXN0aW9uQ29tcG9uZW50ID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICBjb25zdCByZW1vdmVCdG4gPSBlbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1xdWVzdGlvbi1yZW1vdmVdJyksXHJcbiAgICAgIGFuc3dlcnNUeXBlQ2hlY2tib3ggPSBlbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKSxcclxuICAgICAgYW5zd2Vyc0NvbnRhaW5lciA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5hbnN3ZXJzJyksXHJcbiAgICAgIHF1ZXN0aW9uVGV4dElucHV0ID0gZWwucXVlcnlTZWxlY3RvcignLnF1ZXN0aW9uLXRleHQnKSxcclxuICAgICAgcXVlc3Rpb25JbmRleCA9IHF1ZXN0aW9uVGV4dElucHV0Lm5hbWUucmVwbGFjZSgvKF4uKlxcW3xcXF0uKiQpL2csICcnKSxcclxuICAgICAgYWRkQW5zd2VyQnRuID0gZWwucXVlcnlTZWxlY3RvcignLmFkZC1idG4nKSxcclxuICAgICAgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgVGlueU1jZUluaXQoJy50aW55bWNlLWhlcmUnKTtcclxuXHJcbiAgICAvL1JlbW92ZSBCdG4gZXZlbnRcclxuICAgIGlmIChyZW1vdmVCdG4pIHtcclxuICAgICAgcmVtb3ZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGVsLnJlbW92ZSgpO1xyXG4gICAgICAgIHVwZGF0ZUFuc3dlcnNDb3VudCgpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWFuc3dlcnNUeXBlQ2hlY2tib3guY2hlY2tlZCkge1xyXG4gICAgICBhZGRBbnN3ZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGRUZXh0QW5zd2VyKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFkZEFuc3dlckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZFBpY0Fuc3dlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLy9DaGVja2JveCBldmVudFxyXG4gICAgYW5zd2Vyc1R5cGVDaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBhbnN3ZXJzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQpIHtcclxuICAgICAgICBhcHBlbmRSZXF1aXJlZFBpY0Fuc3dlcnMoKTtcclxuICAgICAgICBhZGRBbnN3ZXJCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGRUZXh0QW5zd2VyKTtcclxuICAgICAgICBhZGRBbnN3ZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGRQaWNBbnN3ZXIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFwcGVuZFJlcXVpcmVkVGV4dEFuc3dlcnMoKTtcclxuICAgICAgICBhZGRBbnN3ZXJCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGRQaWNBbnN3ZXIpO1xyXG4gICAgICAgIGFkZEFuc3dlckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZFRleHRBbnN3ZXIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBhZGRUZXh0QW5zd2VyKCkge1xyXG4gICAgICBsZXQgbmV3QW5zd2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIG5ld0Fuc3dlci5pbm5lckhUTUwgPSB0ZXh0QW5zd2VyVHBsLnJlcGxhY2UoJyRhbnN3ZXJzTmFtZScsIGBhbnN3ZXJzWyR7cXVlc3Rpb25JbmRleH1dW11gKTtcclxuXHJcbiAgICAgIGxldCBmb3JtR3JvdXAgPSBuZXdBbnN3ZXIucXVlcnlTZWxlY3RvcignLmZvcm0tZ3JvdXAnKTtcclxuXHJcbiAgICAgIG5ld0Fuc3dlci5xdWVyeVNlbGVjdG9yKCcuYWRkb24nKS5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICAgIGxldCByZW1vdmVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgcmVtb3ZlQnRuLmNsYXNzTmFtZSA9ICdidG4taWNvbiBleHRyYS1zbWFsbCBpY29uLWNsb3NlJztcclxuICAgICAgcmVtb3ZlQnRuLnNldEF0dHJpYnV0ZSgnZGF0YS1hbnN3ZXItcmVtb3ZlJywgJycpO1xyXG5cclxuICAgICAgcmVtb3ZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZvcm1Hcm91cC5yZW1vdmUoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBuZXdBbnN3ZXIucXVlcnlTZWxlY3RvcignaW5wdXRbcmVxdWlyZWRdJykucmVtb3ZlQXR0cmlidXRlKCdyZXF1aXJlZCcpO1xyXG5cclxuICAgICAgbmV3QW5zd2VyLnF1ZXJ5U2VsZWN0b3IoJy5hZGRvbicpLmFwcGVuZChyZW1vdmVCdG4pO1xyXG5cclxuICAgICAgYW5zd2Vyc0NvbnRhaW5lci5hcHBlbmQobmV3QW5zd2VyLmNoaWxkcmVuWzBdKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhZGRQaWNBbnN3ZXIoKSB7XHJcbiAgICAgIGxldCBuZXdBbnN3ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgbmV3QW5zd2VyLmlubmVySFRNTCA9IHBpY0Fuc3dlclRwbC5yZXBsYWNlKCckYW5zd2Vyc05hbWUnLCBgYW5zd2Vyc1ske3F1ZXN0aW9uSW5kZXh9XVtdYCk7XHJcblxyXG4gICAgICBsZXQgZm9ybUdyb3VwID0gbmV3QW5zd2VyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWdyb3VwJyk7XHJcbiAgICAgIGxldCBkcm9wem9uZUVsID0gbmV3QW5zd2VyLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wem9uZS1tdWx0aXBsZScpO1xyXG5cclxuICAgICAgbmV3QW5zd2VyLnF1ZXJ5U2VsZWN0b3IoJy5hZGRvbicpLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgICAgbGV0IHJlbW92ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICByZW1vdmVCdG4uY2xhc3NOYW1lID0gJ2J0bi1pY29uIGV4dHJhLXNtYWxsIGljb24tY2xvc2UnO1xyXG4gICAgICByZW1vdmVCdG4uc2V0QXR0cmlidXRlKCdkYXRhLWFuc3dlci1yZW1vdmUnLCAnJyk7XHJcblxyXG4gICAgICByZW1vdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9ybUdyb3VwLnJlbW92ZSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIG5ld0Fuc3dlci5xdWVyeVNlbGVjdG9yKCcuYWRkb24nKS5hcHBlbmQocmVtb3ZlQnRuKTtcclxuXHJcbiAgICAgIG5ld0Fuc3dlci5xdWVyeVNlbGVjdG9yKCdpbnB1dFtyZXF1aXJlZF0nKS5yZW1vdmVBdHRyaWJ1dGUoJ3JlcXVpcmVkJyk7XHJcblxyXG4gICAgICBhbnN3ZXJzQ29udGFpbmVyLmFwcGVuZChuZXdBbnN3ZXIuY2hpbGRyZW5bMF0pO1xyXG5cclxuICAgICAgaW5pdERyb3B6b25lKGRyb3B6b25lRWwpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGluaXREcm9wem9uZShpdGVtKSB7XHJcbiAgICAgIGxldCB1cmwgPSBpdGVtLmRhdGFzZXQudXJsLFxyXG4gICAgICAgIG1heEZpbGVzID0gTnVtYmVyKGl0ZW0uZGF0YXNldC5tYXhmaWxlcyksXHJcbiAgICAgICAgbWF4U2l6ZSA9IE51bWJlcihpdGVtLmRhdGFzZXQubWF4c2l6ZSksXHJcbiAgICAgICAgYWNjZXB0ZWRGaWxlcyA9IGl0ZW0uZGF0YXNldC5hY2NlcHRlZGZpbGVzO1xyXG4gICAgICBsZXQgY3JlYXRlRHJvcHpvbmUgPSBuZXcgQ3VzdG9tRHJvcHpvbmUoaXRlbSwgdXJsLCBtYXhGaWxlcywgbWF4U2l6ZSwgYWNjZXB0ZWRGaWxlcywgYWNjZXB0ZWRGaWxlcyA9PT0gJ2ltYWdlLyonKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhcHBlbmRSZXF1aXJlZFRleHRBbnN3ZXJzICgpIHtcclxuICAgICAgbGV0IHRwbCA9IHRleHRBbnN3ZXJUcGwucmVwbGFjZSgnJGFuc3dlcnNOYW1lJywgYGFuc3dlcnNbJHtxdWVzdGlvbkluZGV4fV1bXWApO1xyXG4gICAgICBhbnN3ZXJzQ29udGFpbmVyLmlubmVySFRNTCA9IHRwbCArIHRwbDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhcHBlbmRSZXF1aXJlZFBpY0Fuc3dlcnMgKCkge1xyXG4gICAgICBsZXQgdHBsID0gcGljQW5zd2VyVHBsLnJlcGxhY2UoJyRhbnN3ZXJzTmFtZScsIGBhbnN3ZXJzWyR7cXVlc3Rpb25JbmRleH1dW11gKTtcclxuICAgICAgYW5zd2Vyc0NvbnRhaW5lci5pbm5lckhUTUwgPSB0cGwgKyB0cGw7XHJcblxyXG4gICAgICBhbnN3ZXJzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcm9wem9uZS1tdWx0aXBsZScpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICBpbml0RHJvcHpvbmUoaXRlbSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYXBwZW5kUmVxdWlyZWRUZXh0QW5zd2VycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgYXBwZW5kUmVxdWlyZWRUZXh0QW5zd2VycygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBlbC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1hbnN3ZXItcmVtb3ZlXScpLmZvckVhY2goZnVuY3Rpb24gKGJ0bikge1xyXG4gICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYnRuLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykucmVtb3ZlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSlcclxuICB9O1xyXG5cclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucXVlc3Rpb24nKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xyXG4gICAgbGV0IG5ld1F1ZXN0aW9uQ29tcG9uZW50ID0gUXVlc3Rpb25Db21wb25lbnQoZWwpO1xyXG4gIH0pO1xyXG5cclxuICBhZGRRdWVzdGlvbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgbGV0IHF1ZXN0aW9uVGV4dElucHV0ID0gcXVlc3Rpb25zV3JhcHBlci5sYXN0RWxlbWVudENoaWxkLnF1ZXJ5U2VsZWN0b3IoJy5xdWVzdGlvbi10ZXh0JyksXHJcbiAgICAgIHF1ZXN0aW9uSW5kZXggPSBOdW1iZXIocXVlc3Rpb25UZXh0SW5wdXQubmFtZS5yZXBsYWNlKC8oXi4qXFxbfFxcXS4qJCkvZywgJycpKSArIDE7XHJcblxyXG4gICAgbGV0IHRwbCA9IHF1ZXN0aW9uVHBsLnJlcGxhY2UoJyRxdWVzdGlvbk5hbWUnLCBgcXVlc3Rpb25zWyR7cXVlc3Rpb25JbmRleH1dYCk7XHJcblxyXG4gICAgbGV0IG5ld1F1ZXN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBuZXdRdWVzdGlvbi5jbGFzc05hbWUgPSAncXVlc3Rpb24gZm9ybS1ncm91cCc7XHJcbiAgICBuZXdRdWVzdGlvbi5pbm5lckhUTUwgPSB0cGw7XHJcblxyXG4gICAgbGV0IHJlbW92ZVF1ZXN0aW9uQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICByZW1vdmVRdWVzdGlvbkJ0bi5jbGFzc05hbWUgPSAnYnRuLWljb24gc21hbGwgaWNvbi1jbG9zZSc7XHJcbiAgICByZW1vdmVRdWVzdGlvbkJ0bi5zZXRBdHRyaWJ1dGUoJ2RhdGEtcXVlc3Rpb24tcmVtb3ZlJywgJycpO1xyXG5cclxuICAgIHJlbW92ZVF1ZXN0aW9uQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBuZXdRdWVzdGlvbi5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIG5ld1F1ZXN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5hZGRvbi1idG4nKS5pbm5lckhUTUwgPSAnJztcclxuICAgIG5ld1F1ZXN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5hZGRvbi1idG4nKS5hcHBlbmQocmVtb3ZlUXVlc3Rpb25CdG4pO1xyXG5cclxuICAgIHF1ZXN0aW9uc1dyYXBwZXIuYXBwZW5kQ2hpbGQobmV3UXVlc3Rpb24pO1xyXG5cclxuICAgIGxldCBuZXdRdWVzdGlvbkNvbXBvbmVudCA9IG5ldyBRdWVzdGlvbkNvbXBvbmVudChuZXdRdWVzdGlvbik7XHJcbiAgICBuZXdRdWVzdGlvbkNvbXBvbmVudC5hcHBlbmRSZXF1aXJlZFRleHRBbnN3ZXJzKCk7XHJcblxyXG4gICAgdXBkYXRlQW5zd2Vyc0NvdW50KCk7XHJcbiAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIHVwZGF0ZUFuc3dlcnNDb3VudCgpIHtcclxuICAgIGxldCBxdWVzdGlvbnNDb3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNxdWVzdGlvbnNDb3VudCcpLFxyXG4gICAgICBwYXNzaW5nU2NvcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGFzc2luZ1Njb3JlJyksXHJcbiAgICAgIHRvdGFsID0gcXVlc3Rpb25zV3JhcHBlci5jaGlsZHJlbi5sZW5ndGg7XHJcbiAgICBxdWVzdGlvbnNDb3VudC5pbm5lckhUTUwgPSB0b3RhbDtcclxuICAgIHBhc3NpbmdTY29yZS52YWx1ZSA9IE1hdGguY2VpbCh0b3RhbCowLjgpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlQW5zd2Vyc0NvdW50KCk7XHJcbn07Il0sImZpbGUiOiJ0ZXN0LWNvbnN0cnVjdG9yLmpzIn0=
