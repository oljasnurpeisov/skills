let courseController = function (a, b) {
    function c(a, b) {
        return {id: a, name: b, order: F.length, lessons: null}
    }

    function d() {
        y.innerHTML = "";
        let b = 0, c = 0, e = F.sort(function (c, a) {
            return c.order - a.order
        });
        e.forEach(function ({id: g, name: k, order: r, lessons: s, collapsed: t}) {
            let u = document.createElement("div");
            if (u.className = "topic", t && u.classList.add("collapsed"), u.innerHTML = `<div class="topic__header">
                                    <div class="title">${k}</div>
                                    <div class="duration"></div>
                                    <div class="edit-buttons">
                                        <a href="#" title="${m}" class="btn-icon small btn-icon--ghost icon-chevron-up"> </a>
                                        <a href="#" title="${o}" class="btn-icon small btn-icon--ghost icon-trash-can"> </a>
                                        <a href="#" title="${n}" class="btn-icon small btn-icon--ghost icon-chevron-down"> </a>
                                        <a href="#" title="${p}" class="btn-icon small btn-icon--ghost icon-edit"> </a>
                                        <a href="${`/${l}/my-courses/course/${a}/theme-${g}/create-lesson`}" title="${q}" class="btn-icon small icon-plus"> </a>
                                    </div>
                                </div>`, u.querySelector(".icon-chevron-up").addEventListener("click", function (a) {
                a.preventDefault(), h(g, -1)
            }), u.querySelector(".icon-trash-can").addEventListener("click", function (a) {
                a.preventDefault(), G = g, $.fancybox.open({src: A, touch: !1})
            }), u.querySelector(".icon-chevron-down").addEventListener("click", function (a) {
                a.preventDefault(), h(g, 1)
            }), u.querySelector(".icon-edit").addEventListener("click", function (a) {
                a.preventDefault(), H = g, x.value = k, $.fancybox.open({src: z, touch: !1})
            }), s) {
                let e = u.querySelector(".title"), h = u.querySelector(".duration"), k = document.createElement("div"),
                    q = 0;
                u.classList.add("spoiler"), k.className = "topic__body";
                let r = s.sort(function (c, a) {
                    return c.order - a.order
                });
                r.forEach(function ({id: c, name: d, order: e, duration: f}) {
                    let h = document.createElement("div");
                    h.className = "lesson", h.innerHTML = `<div class="title"><a href="${`/${l}/my-courses/course/${a}/theme-${g}/view-lesson-${c}`}" title="${d}">${d}</a></div>
                                      <div class="duration">${j(f)}</div>
                                      <div class="edit-buttons">
                                          <div class="united">
                                              <a href="#" title="${m}" class="btn-icon btn-icon--ghost icon-chevron-up"> </a>
                                              <a href="#" title="${o}" class="btn-icon btn-icon--ghost icon-trash-can"> </a>
                                              <a href="#" title="${n}" class="btn-icon btn-icon--ghost icon-chevron-down"> </a>
                                          </div>
                                          <a href="${`/${l}/my-courses/course/${a}/theme-${g}/edit-lesson-${c}`}" title="${p}" class="btn-icon btn-icon--ghost icon-edit"> </a>
                                      </div>`, h.querySelector(".icon-chevron-up").addEventListener("click", function (a) {
                        a.preventDefault(), i(g, c, r, -1)
                    }), h.querySelector(".icon-trash-can").addEventListener("click", function (a) {
                        a.preventDefault(), I = c, G = g, $.fancybox.open({src: B, touch: !1})
                    }), h.querySelector(".icon-chevron-down").addEventListener("click", function (a) {
                        a.preventDefault(), i(g, c, r, 1)
                    }), q += f, k.append(h), b++
                }), e.addEventListener("click", function () {
                    u.classList.toggle("collapsed");
                    let a = f(g, F);
                    a.collapsed = !a.collapsed, d()
                }), h.innerHTML = j(q), c += q, u.append(k)
            }
            y.append(u)
        }), D.innerHTML = b, C.innerHTML = j(c)
    }

    function e(a, b) {
        let c = document.querySelector(E), d = c.querySelector(".title-primary"), e = c.querySelector(".plain-text");
        d.innerHTML = a, e.innerHTML = b, $.fancybox.open({src: E, touch: !1})
    }

    function f(a, b) {
        return b.find(function (b) {
            return b.id === +a
        })
    }

    function g(a, b) {
        return b.findIndex(function (b) {
            return b.id === +a
        })
    }

    function h(b, c) {
        let e = f(b, F), g = F.find(function (a) {
            return 1 == (a.order - e.order) * c
        });
        g && r.swapTopicsOrders(a, e.id, g.id).then(function () {
            e.order += c, g.order = e.order - c, d()
        })
    }

    function i(b, c, e, g) {
        let h = f(c, e), i = e.find(function (a) {
            return 1 == (a.order - h.order) * g
        });
        i && r.swapLessonsOrders(a, b, h.id, i.id).then(function () {
            h.order += g, i.order = h.order - g, d()
        })
    }

    function j(a) {
        let b = parseInt(a / 60), c = k(b), d = k(a % 60);
        return c + ":" + d
    }

    function k(a) {
        return 1 === (a + "").length ? "0" + (a + "") : a + ""
    }

    const l = window.Laravel.lang, {upText: m, downText: n, deleteText: o, editText: p, addText: q} = b,
        r = new dataService, s = document.querySelector("#addTopicBtn"), t = document.querySelector("#editTopicBtn"),
        u = document.querySelector("#removeTopicBtn"), v = document.querySelector("#removeLessonBtn"),
        w = document.querySelector("#newTopicNameInput"), x = document.querySelector("#editTopicNameInput"),
        y = document.querySelector("#courseDataContainer"), z = "#editTopicModal", A = "#removeTopicModal",
        B = "#removeLessonModal", C = document.querySelector("#courseDuration"),
        D = document.querySelector("#lessonsCount"), E = "#modalMsg";
    let F = [], G = null, H = null, I = null;
    this.initComponent = function () {
        s.addEventListener("click", function (b) {
            b.preventDefault();
            let e = w.value;
            return e ? void (w.parentElement.classList.remove("error"), r.addTopic(a, e).then(function ({id: a, name: b}) {
                F.push(c(a, b)), parent.jQuery.fancybox.getInstance().close(), d(), w.value = ""
            }).catch(function (a) {
                console.log(a.message)
            })) : (w.parentElement.classList.add("error"), !1)
        }), t.addEventListener("click", function (b) {
            b.preventDefault();
            let c = x.value;
            return c ? void (w.parentElement.classList.remove("error"), r.editTopic(a, H, c).then(function ({msgTitle: a, msgText: b}) {
                parent.jQuery.fancybox.getInstance().close(), setTimeout(function () {
                    e(a, b)
                }, 380);
                let g = f(H, F);
                g.name = c, d()
            }).catch(function (a) {
                console.log(a.message)
            })) : (w.parentElement.classList.add("error"), !1)
        }), u.addEventListener("click", function (b) {
            b.preventDefault(), r.removeTopic(a, G).then(function ({msgTitle: a, msgText: b}) {
                parent.jQuery.fancybox.getInstance().close(), setTimeout(function () {
                    e(a, b)
                }, 380);
                let c = g(G, F);
                F.splice(c, 1);
                for (let d = c; d < F.length; d++) F[d].order--;
                d()
            }).catch(function (a) {
                console.log(a.message)
            })
        }), v.addEventListener("click", function (b) {
            b.preventDefault(), r.removeLesson(a, G, I).then(function ({msgTitle: a, msgText: b}) {
                parent.jQuery.fancybox.getInstance().close(), setTimeout(function () {
                    e(a, b)
                }, 380);
                let c = f(G, F).lessons, h = g(I, c);
                c.splice(h, 1);
                for (let d = h; d < c.length; d++) c[d].order--;
                d()
            }).catch(function (a) {
                console.log(a.message)
            })
        }), r.getCourseData(a).then(function (a) {
            F = [...a], d()
        }).catch(function (a) {
            console.log(a.message)
        })
    }, this.renderData = function () {
        d()
    }
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvdXJzZS1lZGl0LmpzIl0sIm5hbWVzIjpbImNvdXJzZUNvbnRyb2xsZXIiLCJjb3Vyc2VJZCIsInRleHREYXRhIiwiYWRkVG9waWMiLCJpZCIsIm5hbWUiLCJvcmRlciIsImNvdXJzZURhdGEiLCJsZW5ndGgiLCJsZXNzb25zIiwicmVuZGVyRGF0YSIsImNvdXJzZURhdGFDb250YWluZXIiLCJpbm5lckhUTUwiLCJsZXNzb25zQ291bnQiLCJjb3Vyc2VEdXJhdGlvbiIsImNvdXJzZURhdGFTb3J0ZWQiLCJzb3J0IiwiYSIsImIiLCJmb3JFYWNoIiwidG9waWNJZCIsInRvcGljTmFtZSIsInRvcGljT3JkZXIiLCJjb2xsYXBzZWQiLCJ0b3BpY1dyYXBwZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJ1cFRleHQiLCJkZWxldGVUZXh0IiwiZG93blRleHQiLCJlZGl0VGV4dCIsImxhbmciLCJhZGRUZXh0IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJzd2FwVG9waWNzIiwiY3VycmVudFJlbW92ZVRvcGljSWQiLCIkIiwiZmFuY3lib3giLCJvcGVuIiwic3JjIiwicmVtb3ZlVG9waWNNb2RhbElkIiwidG91Y2giLCJjdXJyZW50RWRpdFRvcGljSWQiLCJlZGl0VG9waWNOYW1lSW5wdXQiLCJ2YWx1ZSIsImVkaXRUb3BpY01vZGFsSWQiLCJ0b3BpY1RpdGxlIiwidG9waWNEdXJhdGlvbkVsIiwidG9waWNCb2R5IiwidG9waWNEdXJhdGlvbiIsImxlc3NvbnNTb3J0ZWQiLCJsZXNzb25JZCIsImxlc3Nvbk5hbWUiLCJsZXNzb25PcmRlciIsImR1cmF0aW9uIiwibGVzc29uRHVyYXRpb24iLCJsZXNzb25XcmFwcGVyIiwibWludXRlc1RvSG91cnMiLCJzd2FwTGVzc29ucyIsImN1cnJlbnRSZW1vdmVMZXNzb25JZCIsInJlbW92ZUxlc3Nvbk1vZGFsSWQiLCJhcHBlbmQiLCJ0b2dnbGUiLCJ0b3BpY09iaiIsImdldE9iamVjdEJ5SWQiLCJsZXNzb25zQ291bnRFbCIsImNvdXJzZUR1cmF0aW9uRWwiLCJzaG93TW9kYWxNc2ciLCJ0aXRsZSIsInRleHQiLCJtb2RhbCIsIm1vZGFsTXNnSWQiLCJtb2RhbFRpdGxlIiwibW9kYWxUZXh0IiwiZGF0YSIsImZpbmQiLCJpdGVtIiwiZ2V0SW5kZXhCeUlkIiwiZmluZEluZGV4IiwiZGlyZWN0aW9uIiwiY3VycmVudCIsInN3YXBJdGVtIiwidG1wRGF0YVNlcnZpY2UiLCJzd2FwVG9waWNzT3JkZXJzIiwidGhlbiIsInN3YXBMZXNzb25zT3JkZXJzIiwibWludXRlcyIsImhvdXJzIiwicGFyc2VJbnQiLCJmb3JtYXR0ZWRIb3VycyIsImFkZFplcm9Ub051bWJlciIsImZvcm1hdHRlZE1pbnV0ZXMiLCJudW1iZXIiLCJ3aW5kb3ciLCJMYXJhdmVsIiwiZGF0YVNlcnZpY2UiLCJhZGRUb3BpY0J0biIsImVkaXRUb3BpY0J0biIsInJlbW92ZVRvcGljQnRuIiwicmVtb3ZlTGVzc29uQnRuIiwibmV3VG9waWNOYW1lSW5wdXQiLCJpbml0Q29tcG9uZW50IiwicGFyZW50RWxlbWVudCIsInJlbW92ZSIsInB1c2giLCJwYXJlbnQiLCJqUXVlcnkiLCJnZXRJbnN0YW5jZSIsImNsb3NlIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJtZXNzYWdlIiwiZWRpdFRvcGljIiwibXNnVGl0bGUiLCJtc2dUZXh0Iiwic2V0VGltZW91dCIsImN1cnJlbnRPYmoiLCJyZW1vdmVUb3BpYyIsImN1cnJlbnRPYmpJbmRleCIsInNwbGljZSIsImkiLCJyZW1vdmVMZXNzb24iLCJnZXRDb3Vyc2VEYXRhIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxDQUFBQSxnQkFBZ0IsQ0FBRyxTQUFVQyxDQUFWLENBQW9CQyxDQUFwQixDQUE4QixDQTBCbkQsUUFBU0MsQ0FBQUEsQ0FBVCxDQUFrQkMsQ0FBbEIsQ0FBc0JD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c2VJZCwgdGV4dERhdGEpIHtcclxuICBjb25zdCBsYW5nID0gd2luZG93LkxhcmF2ZWwubGFuZztcclxuICBjb25zdCB7dXBUZXh0LCBkb3duVGV4dCwgZGVsZXRlVGV4dCwgZWRpdFRleHQsIGFkZFRleHR9ID0gdGV4dERhdGE7XHJcbiAgY29uc3QgdG1wRGF0YVNlcnZpY2UgPSBuZXcgZGF0YVNlcnZpY2UoKTtcclxuICBjb25zdCBhZGRUb3BpY0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGRUb3BpY0J0bicpO1xyXG4gIGNvbnN0IGVkaXRUb3BpY0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlZGl0VG9waWNCdG4nKTtcclxuICBjb25zdCByZW1vdmVUb3BpY0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZW1vdmVUb3BpY0J0bicpO1xyXG4gIGNvbnN0IHJlbW92ZUxlc3NvbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZW1vdmVMZXNzb25CdG4nKTtcclxuICBjb25zdCBuZXdUb3BpY05hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdUb3BpY05hbWVJbnB1dCcpO1xyXG4gIGNvbnN0IGVkaXRUb3BpY05hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlZGl0VG9waWNOYW1lSW5wdXQnKTtcclxuICBjb25zdCBjb3Vyc2VEYXRhQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvdXJzZURhdGFDb250YWluZXInKTtcclxuICBjb25zdCBlZGl0VG9waWNNb2RhbElkID0gJyNlZGl0VG9waWNNb2RhbCc7XHJcbiAgY29uc3QgcmVtb3ZlVG9waWNNb2RhbElkID0gJyNyZW1vdmVUb3BpY01vZGFsJztcclxuICBjb25zdCByZW1vdmVMZXNzb25Nb2RhbElkID0gJyNyZW1vdmVMZXNzb25Nb2RhbCc7XHJcbiAgY29uc3QgY291cnNlRHVyYXRpb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb3Vyc2VEdXJhdGlvbicpO1xyXG4gIGNvbnN0IGxlc3NvbnNDb3VudEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xlc3NvbnNDb3VudCcpO1xyXG4gIGNvbnN0IG1vZGFsTXNnSWQgPSAnI21vZGFsTXNnJztcclxuXHJcbiAgbGV0IGNvdXJzZURhdGEgPSBbXTtcclxuXHJcbiAgbGV0IGN1cnJlbnRSZW1vdmVUb3BpY0lkID0gbnVsbDtcclxuICBsZXQgY3VycmVudEVkaXRUb3BpY0lkID0gbnVsbDtcclxuICBsZXQgY3VycmVudFJlbW92ZUxlc3NvbklkID0gbnVsbDtcclxuXHJcbiAgLy8gbGV0IGlkSW5jcmVtZW50ID0gNTA7IC8vIHJlbW92ZSBvbiBwcm9kdWN0aW9uXHJcblxyXG4gIGZ1bmN0aW9uIGFkZFRvcGljKGlkLCBuYW1lKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpZCxcclxuICAgICAgbmFtZSxcclxuICAgICAgb3JkZXI6IGNvdXJzZURhdGEubGVuZ3RoLFxyXG4gICAgICBsZXNzb25zOiBudWxsXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJEYXRhKCkge1xyXG4gICAgY291cnNlRGF0YUNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICBsZXQgbGVzc29uc0NvdW50ID0gMCxcclxuICAgICAgY291cnNlRHVyYXRpb24gPSAwO1xyXG5cclxuICAgIGxldCBjb3Vyc2VEYXRhU29ydGVkID0gY291cnNlRGF0YS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgIHJldHVybiBhLm9yZGVyIC0gYi5vcmRlclxyXG4gICAgfSk7XHJcblxyXG4gICAgY291cnNlRGF0YVNvcnRlZC5mb3JFYWNoKGZ1bmN0aW9uICh7aWQ6IHRvcGljSWQsIG5hbWU6IHRvcGljTmFtZSwgb3JkZXI6IHRvcGljT3JkZXIsIGxlc3NvbnMsIGNvbGxhcHNlZH0pIHtcclxuICAgICAgbGV0IHRvcGljV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICBsZXQgbGVzc29uQ3JlYXRlTGluayA9IGAvJHtsYW5nfS9teS1jb3Vyc2VzL2NvdXJzZS8ke2NvdXJzZUlkfS90aGVtZS0ke3RvcGljSWR9L2NyZWF0ZS1sZXNzb25gO1xyXG5cclxuICAgICAgdG9waWNXcmFwcGVyLmNsYXNzTmFtZSA9ICd0b3BpYyc7XHJcblxyXG4gICAgICBpZiAoY29sbGFwc2VkKSB7XHJcbiAgICAgICAgdG9waWNXcmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2NvbGxhcHNlZCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0b3BpY1dyYXBwZXIuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9XCJ0b3BpY19faGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aXRsZVwiPiR7dG9waWNOYW1lfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHVyYXRpb25cIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImVkaXQtYnV0dG9uc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNcIiB0aXRsZT1cIiR7dXBUZXh0fVwiIGNsYXNzPVwiYnRuLWljb24gc21hbGwgYnRuLWljb24tLWdob3N0IGljb24tY2hldnJvbi11cFwiPiA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIHRpdGxlPVwiJHtkZWxldGVUZXh0fVwiIGNsYXNzPVwiYnRuLWljb24gc21hbGwgYnRuLWljb24tLWdob3N0IGljb24tdHJhc2gtY2FuXCI+IDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgdGl0bGU9XCIke2Rvd25UZXh0fVwiIGNsYXNzPVwiYnRuLWljb24gc21hbGwgYnRuLWljb24tLWdob3N0IGljb24tY2hldnJvbi1kb3duXCI+IDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgdGl0bGU9XCIke2VkaXRUZXh0fVwiIGNsYXNzPVwiYnRuLWljb24gc21hbGwgYnRuLWljb24tLWdob3N0IGljb24tZWRpdFwiPiA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHtsZXNzb25DcmVhdGVMaW5rfVwiIHRpdGxlPVwiJHthZGRUZXh0fVwiIGNsYXNzPVwiYnRuLWljb24gc21hbGwgaWNvbi1wbHVzXCI+IDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDtcclxuXHJcbiAgICAgIC8qTW92ZSB1cCovXHJcbiAgICAgIHRvcGljV3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuaWNvbi1jaGV2cm9uLXVwJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBzd2FwVG9waWNzKHRvcGljSWQsIC0xKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKkRlbGV0ZSovXHJcbiAgICAgIHRvcGljV3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuaWNvbi10cmFzaC1jYW4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGN1cnJlbnRSZW1vdmVUb3BpY0lkID0gdG9waWNJZDtcclxuICAgICAgICAkLmZhbmN5Ym94Lm9wZW4oe1xyXG4gICAgICAgICAgc3JjOiByZW1vdmVUb3BpY01vZGFsSWQsXHJcbiAgICAgICAgICB0b3VjaDogZmFsc2VcclxuICAgICAgICB9KVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qTW92ZSBkb3duKi9cclxuICAgICAgdG9waWNXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5pY29uLWNoZXZyb24tZG93bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgc3dhcFRvcGljcyh0b3BpY0lkLCAxKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKkVkaXQqL1xyXG4gICAgICB0b3BpY1dyYXBwZXIucXVlcnlTZWxlY3RvcignLmljb24tZWRpdCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgY3VycmVudEVkaXRUb3BpY0lkID0gdG9waWNJZDtcclxuICAgICAgICBlZGl0VG9waWNOYW1lSW5wdXQudmFsdWUgPSB0b3BpY05hbWU7XHJcbiAgICAgICAgJC5mYW5jeWJveC5vcGVuKHtcclxuICAgICAgICAgIHNyYzogZWRpdFRvcGljTW9kYWxJZCxcclxuICAgICAgICAgIHRvdWNoOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChsZXNzb25zKSB7XHJcbiAgICAgICAgbGV0IHRvcGljVGl0bGUgPSB0b3BpY1dyYXBwZXIucXVlcnlTZWxlY3RvcignLnRpdGxlJyk7XHJcbiAgICAgICAgbGV0IHRvcGljRHVyYXRpb25FbCA9IHRvcGljV3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuZHVyYXRpb24nKTtcclxuICAgICAgICBsZXQgdG9waWNCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbGV0IHRvcGljRHVyYXRpb24gPSAwO1xyXG5cclxuICAgICAgICB0b3BpY1dyYXBwZXIuY2xhc3NMaXN0LmFkZCgnc3BvaWxlcicpO1xyXG4gICAgICAgIHRvcGljQm9keS5jbGFzc05hbWUgPSAndG9waWNfX2JvZHknO1xyXG5cclxuICAgICAgICBsZXQgbGVzc29uc1NvcnRlZCA9IGxlc3NvbnMuc29ydChmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgcmV0dXJuIGEub3JkZXIgLSBiLm9yZGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxlc3NvbnNTb3J0ZWQuZm9yRWFjaChmdW5jdGlvbiAoe2lkOiBsZXNzb25JZCwgbmFtZTogbGVzc29uTmFtZSwgb3JkZXI6IGxlc3Nvbk9yZGVyLCBkdXJhdGlvbjogbGVzc29uRHVyYXRpb259KSB7XHJcbiAgICAgICAgICBsZXQgbGVzc29uV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgbGV0IGxlc3NvbkVkaXRMaW5rID0gYC8ke2xhbmd9L215LWNvdXJzZXMvY291cnNlLyR7Y291cnNlSWR9L3RoZW1lLSR7dG9waWNJZH0vZWRpdC1sZXNzb24tJHtsZXNzb25JZH1gO1xyXG4gICAgICAgICAgbGV0IGxlc3NvbkxpbmsgPSBgLyR7bGFuZ30vbXktY291cnNlcy9jb3Vyc2UvJHtjb3Vyc2VJZH0vdGhlbWUtJHt0b3BpY0lkfS92aWV3LWxlc3Nvbi0ke2xlc3NvbklkfWA7XHJcbiAgICAgICAgICBsZXNzb25XcmFwcGVyLmNsYXNzTmFtZSA9ICdsZXNzb24nO1xyXG4gICAgICAgICAgbGVzc29uV3JhcHBlci5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz1cInRpdGxlXCI+PGEgaHJlZj1cIiR7bGVzc29uTGlua31cIiB0aXRsZT1cIiR7bGVzc29uTmFtZX1cIj4ke2xlc3Nvbk5hbWV9PC9hPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkdXJhdGlvblwiPiR7bWludXRlc1RvSG91cnMobGVzc29uRHVyYXRpb24pfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlZGl0LWJ1dHRvbnNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInVuaXRlZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNcIiB0aXRsZT1cIiR7dXBUZXh0fVwiIGNsYXNzPVwiYnRuLWljb24gYnRuLWljb24tLWdob3N0IGljb24tY2hldnJvbi11cFwiPiA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIHRpdGxlPVwiJHtkZWxldGVUZXh0fVwiIGNsYXNzPVwiYnRuLWljb24gYnRuLWljb24tLWdob3N0IGljb24tdHJhc2gtY2FuXCI+IDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgdGl0bGU9XCIke2Rvd25UZXh0fVwiIGNsYXNzPVwiYnRuLWljb24gYnRuLWljb24tLWdob3N0IGljb24tY2hldnJvbi1kb3duXCI+IDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIke2xlc3NvbkVkaXRMaW5rfVwiIHRpdGxlPVwiJHtlZGl0VGV4dH1cIiBjbGFzcz1cImJ0bi1pY29uIGJ0bi1pY29uLS1naG9zdCBpY29uLWVkaXRcIj4gPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7XHJcblxyXG4gICAgICAgICAgLypNb3ZlIHVwKi9cclxuICAgICAgICAgIGxlc3NvbldyYXBwZXIucXVlcnlTZWxlY3RvcignLmljb24tY2hldnJvbi11cCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzd2FwTGVzc29ucyh0b3BpY0lkLCBsZXNzb25JZCwgbGVzc29uc1NvcnRlZCwgLTEpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgLypEZWxldGUqL1xyXG4gICAgICAgICAgbGVzc29uV3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuaWNvbi10cmFzaC1jYW4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgY3VycmVudFJlbW92ZUxlc3NvbklkID0gbGVzc29uSWQ7XHJcbiAgICAgICAgICAgIGN1cnJlbnRSZW1vdmVUb3BpY0lkID0gdG9waWNJZDtcclxuICAgICAgICAgICAgJC5mYW5jeWJveC5vcGVuKHtcclxuICAgICAgICAgICAgICBzcmM6IHJlbW92ZUxlc3Nvbk1vZGFsSWQsXHJcbiAgICAgICAgICAgICAgdG91Y2g6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAvKk1vdmUgZG93biovXHJcbiAgICAgICAgICBsZXNzb25XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5pY29uLWNoZXZyb24tZG93bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzd2FwTGVzc29ucyh0b3BpY0lkLCBsZXNzb25JZCwgbGVzc29uc1NvcnRlZCwgMSk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICB0b3BpY0R1cmF0aW9uICs9IGxlc3NvbkR1cmF0aW9uO1xyXG5cclxuICAgICAgICAgIHRvcGljQm9keS5hcHBlbmQobGVzc29uV3JhcHBlcik7XHJcblxyXG4gICAgICAgICAgbGVzc29uc0NvdW50Kys7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRvcGljVGl0bGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICB0b3BpY1dyYXBwZXIuY2xhc3NMaXN0LnRvZ2dsZSgnY29sbGFwc2VkJyk7XHJcbiAgICAgICAgICBsZXQgdG9waWNPYmogPSBnZXRPYmplY3RCeUlkKHRvcGljSWQsIGNvdXJzZURhdGEpO1xyXG4gICAgICAgICAgdG9waWNPYmouY29sbGFwc2VkID0gIXRvcGljT2JqLmNvbGxhcHNlZDtcclxuICAgICAgICAgIHJlbmRlckRhdGEoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdG9waWNEdXJhdGlvbkVsLmlubmVySFRNTCA9IG1pbnV0ZXNUb0hvdXJzKHRvcGljRHVyYXRpb24pO1xyXG5cclxuICAgICAgICBjb3Vyc2VEdXJhdGlvbiArPSB0b3BpY0R1cmF0aW9uO1xyXG5cclxuICAgICAgICB0b3BpY1dyYXBwZXIuYXBwZW5kKHRvcGljQm9keSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8qQWRkIGNyZWF0ZWQgdG9waWMgdG8gY291cnNlIGNvbnRhaW5lciovXHJcbiAgICAgIGNvdXJzZURhdGFDb250YWluZXIuYXBwZW5kKHRvcGljV3JhcHBlcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXNzb25zQ291bnRFbC5pbm5lckhUTUwgPSBsZXNzb25zQ291bnQ7XHJcbiAgICBjb3Vyc2VEdXJhdGlvbkVsLmlubmVySFRNTCA9IG1pbnV0ZXNUb0hvdXJzKGNvdXJzZUR1cmF0aW9uKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNob3dNb2RhbE1zZyh0aXRsZSwgdGV4dCkge1xyXG4gICAgbGV0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihtb2RhbE1zZ0lkKSxcclxuICAgICAgbW9kYWxUaXRsZSA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy50aXRsZS1wcmltYXJ5JyksXHJcbiAgICAgIG1vZGFsVGV4dCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5wbGFpbi10ZXh0Jyk7XHJcblxyXG4gICAgbW9kYWxUaXRsZS5pbm5lckhUTUwgPSB0aXRsZTtcclxuICAgIG1vZGFsVGV4dC5pbm5lckhUTUwgPSB0ZXh0O1xyXG5cclxuICAgICQuZmFuY3lib3gub3Blbih7XHJcbiAgICAgIHNyYzogbW9kYWxNc2dJZCxcclxuICAgICAgdG91Y2g6IGZhbHNlXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldE9iamVjdEJ5SWQoaWQsIGRhdGEpIHtcclxuICAgIHJldHVybiBkYXRhLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgcmV0dXJuIGl0ZW0uaWQgPT09IE51bWJlcihpZClcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRJbmRleEJ5SWQoaWQsIGRhdGEpIHtcclxuICAgIHJldHVybiBkYXRhLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICByZXR1cm4gaXRlbS5pZCA9PT0gTnVtYmVyKGlkKVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzd2FwVG9waWNzKHRvcGljSWQsIGRpcmVjdGlvbikge1xyXG4gICAgbGV0IGN1cnJlbnQgPSBnZXRPYmplY3RCeUlkKHRvcGljSWQsIGNvdXJzZURhdGEpO1xyXG4gICAgbGV0IHN3YXBJdGVtID0gY291cnNlRGF0YS5maW5kKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgIHJldHVybiAoKGl0ZW0ub3JkZXIgLSBjdXJyZW50Lm9yZGVyKSAqIGRpcmVjdGlvbiA9PT0gMSlcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChzd2FwSXRlbSkge1xyXG4gICAgICB0bXBEYXRhU2VydmljZS5zd2FwVG9waWNzT3JkZXJzKGNvdXJzZUlkLCBjdXJyZW50LmlkLCBzd2FwSXRlbS5pZCkudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY3VycmVudC5vcmRlciA9IGN1cnJlbnQub3JkZXIgKyBkaXJlY3Rpb247XHJcbiAgICAgICAgc3dhcEl0ZW0ub3JkZXIgPSBjdXJyZW50Lm9yZGVyIC0gZGlyZWN0aW9uO1xyXG4gICAgICAgIHJlbmRlckRhdGEoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzd2FwTGVzc29ucyh0b3BpY0lkLCBsZXNzb25JZCwgbGVzc29ucywgZGlyZWN0aW9uKSB7XHJcbiAgICBsZXQgY3VycmVudCA9IGdldE9iamVjdEJ5SWQobGVzc29uSWQsIGxlc3NvbnMpO1xyXG4gICAgbGV0IHN3YXBJdGVtID0gbGVzc29ucy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgIHJldHVybiAoKGl0ZW0ub3JkZXIgLSBjdXJyZW50Lm9yZGVyKSAqIGRpcmVjdGlvbiA9PT0gMSlcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChzd2FwSXRlbSkge1xyXG4gICAgICB0bXBEYXRhU2VydmljZS5zd2FwTGVzc29uc09yZGVycyhjb3Vyc2VJZCwgdG9waWNJZCwgY3VycmVudC5pZCwgc3dhcEl0ZW0uaWQpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGN1cnJlbnQub3JkZXIgPSBjdXJyZW50Lm9yZGVyICsgZGlyZWN0aW9uO1xyXG4gICAgICAgIHN3YXBJdGVtLm9yZGVyID0gY3VycmVudC5vcmRlciAtIGRpcmVjdGlvbjtcclxuICAgICAgICByZW5kZXJEYXRhKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gbWludXRlc1RvSG91cnMobWludXRlcykge1xyXG4gICAgbGV0IGhvdXJzID0gcGFyc2VJbnQobWludXRlcy82MCk7XHJcbiAgICBsZXQgZm9ybWF0dGVkSG91cnMgPSBhZGRaZXJvVG9OdW1iZXIoaG91cnMpO1xyXG4gICAgbGV0IGZvcm1hdHRlZE1pbnV0ZXMgPSBhZGRaZXJvVG9OdW1iZXIobWludXRlcyU2MCk7XHJcblxyXG4gICAgcmV0dXJuIGZvcm1hdHRlZEhvdXJzICsgJzonICsgZm9ybWF0dGVkTWludXRlc1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWRkWmVyb1RvTnVtYmVyKG51bWJlcikge1xyXG4gICAgcmV0dXJuIFN0cmluZyhudW1iZXIpLmxlbmd0aCA9PT0gMSA/ICcwJyArIFN0cmluZyhudW1iZXIpIDogU3RyaW5nKG51bWJlcilcclxuICB9XHJcblxyXG4gIHRoaXMuaW5pdENvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGFkZFRvcGljQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBsZXQgbmFtZSA9IG5ld1RvcGljTmFtZUlucHV0LnZhbHVlO1xyXG5cclxuICAgICAgLypJZiBuYW1lIGlucHV0IGlzIGVtcHR5IGhpZ2hsaWdodCBpbnB1dCBhbmQgc3RvcCB0aGUgc2NyaXB0Ki9cclxuICAgICAgaWYgKCFuYW1lKSB7XHJcbiAgICAgICAgbmV3VG9waWNOYW1lSW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvKlJlbW92ZSBpbnB1dCdzIHJlZCBoaWdobGlnaHQgYW5kIHNlbmQgbmV3IHRvcGljIHRvIHNlcnZlciovXHJcbiAgICAgIG5ld1RvcGljTmFtZUlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcclxuICAgICAgdG1wRGF0YVNlcnZpY2UuYWRkVG9waWMoY291cnNlSWQsIG5hbWUpLnRoZW4oZnVuY3Rpb24oe2lkLCBuYW1lfSkge1xyXG4gICAgICAgIGNvdXJzZURhdGEucHVzaChhZGRUb3BpYyhpZCwgbmFtZSkpOyAvL3VuY29tbWVudCBvbiBwcm9kdWN0aW9uXHJcbiAgICAgICAgLy8gY291cnNlRGF0YS5wdXNoKGFkZFRvcGljKGlkICsgaWRJbmNyZW1lbnQsIG5hbWUpKTsgLy9yZW1vdmUgb24gcHJvZHVjdGlvblxyXG4gICAgICAgIC8vIGlkSW5jcmVtZW50ICs9IDE7IC8vcmVtb3ZlIG9uIHByb2R1Y3Rpb25cclxuICAgICAgICBwYXJlbnQualF1ZXJ5LmZhbmN5Ym94LmdldEluc3RhbmNlKCkuY2xvc2UoKTtcclxuICAgICAgICByZW5kZXJEYXRhKCk7XHJcbiAgICAgICAgbmV3VG9waWNOYW1lSW5wdXQudmFsdWUgPSAnJztcclxuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZWRpdFRvcGljQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBsZXQgbmFtZSA9IGVkaXRUb3BpY05hbWVJbnB1dC52YWx1ZTtcclxuXHJcbiAgICAgIC8qSWYgbmFtZSBpbnB1dCBpcyBlbXB0eSBoaWdobGlnaHQgaW5wdXQgYW5kIHN0b3AgdGhlIHNjcmlwdCovXHJcbiAgICAgIGlmICghbmFtZSkge1xyXG4gICAgICAgIG5ld1RvcGljTmFtZUlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZXJyb3InKTtcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfVxyXG5cclxuICAgICAgLypSZW1vdmUgaW5wdXQncyByZWQgaGlnaGxpZ2h0IGFuZCBzZW5kIG5ldyB0b3BpYyBuYW1lIHRvIHNlcnZlciovXHJcbiAgICAgIG5ld1RvcGljTmFtZUlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcclxuICAgICAgdG1wRGF0YVNlcnZpY2UuZWRpdFRvcGljKGNvdXJzZUlkLCBjdXJyZW50RWRpdFRvcGljSWQsIG5hbWUpLnRoZW4oZnVuY3Rpb24gKHttc2dUaXRsZSwgbXNnVGV4dH0pIHtcclxuICAgICAgICBwYXJlbnQualF1ZXJ5LmZhbmN5Ym94LmdldEluc3RhbmNlKCkuY2xvc2UoKTtcclxuXHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBzaG93TW9kYWxNc2cobXNnVGl0bGUsIG1zZ1RleHQpO1xyXG4gICAgICAgIH0sIDM4MCk7XHJcblxyXG4gICAgICAgIGxldCBjdXJyZW50T2JqID0gZ2V0T2JqZWN0QnlJZChjdXJyZW50RWRpdFRvcGljSWQsIGNvdXJzZURhdGEpO1xyXG4gICAgICAgIGN1cnJlbnRPYmoubmFtZSA9IG5hbWU7XHJcblxyXG4gICAgICAgIHJlbmRlckRhdGEoKTtcclxuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmVtb3ZlVG9waWNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRtcERhdGFTZXJ2aWNlLnJlbW92ZVRvcGljKGNvdXJzZUlkLCBjdXJyZW50UmVtb3ZlVG9waWNJZCkudGhlbihmdW5jdGlvbiAoe21zZ1RpdGxlLCBtc2dUZXh0fSkge1xyXG4gICAgICAgIHBhcmVudC5qUXVlcnkuZmFuY3lib3guZ2V0SW5zdGFuY2UoKS5jbG9zZSgpO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIHNob3dNb2RhbE1zZyhtc2dUaXRsZSwgbXNnVGV4dCk7XHJcbiAgICAgICAgfSwgMzgwKTtcclxuXHJcbiAgICAgICAgbGV0IGN1cnJlbnRPYmpJbmRleCA9IGdldEluZGV4QnlJZChjdXJyZW50UmVtb3ZlVG9waWNJZCwgY291cnNlRGF0YSk7XHJcblxyXG4gICAgICAgIGNvdXJzZURhdGEuc3BsaWNlKGN1cnJlbnRPYmpJbmRleCwgMSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSBjdXJyZW50T2JqSW5kZXg7IGkgPCBjb3Vyc2VEYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBjb3Vyc2VEYXRhW2ldLm9yZGVyLS1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlbmRlckRhdGEoKTtcclxuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmVtb3ZlTGVzc29uQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0bXBEYXRhU2VydmljZS5yZW1vdmVMZXNzb24oY291cnNlSWQsIGN1cnJlbnRSZW1vdmVUb3BpY0lkLCBjdXJyZW50UmVtb3ZlTGVzc29uSWQpLnRoZW4oZnVuY3Rpb24oe21zZ1RpdGxlLCBtc2dUZXh0fSkge1xyXG4gICAgICAgIHBhcmVudC5qUXVlcnkuZmFuY3lib3guZ2V0SW5zdGFuY2UoKS5jbG9zZSgpO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIHNob3dNb2RhbE1zZyhtc2dUaXRsZSwgbXNnVGV4dCk7XHJcbiAgICAgICAgfSwgMzgwKTtcclxuXHJcbiAgICAgICAgbGV0IGxlc3NvbnMgPSBnZXRPYmplY3RCeUlkKGN1cnJlbnRSZW1vdmVUb3BpY0lkLCBjb3Vyc2VEYXRhKS5sZXNzb25zO1xyXG5cclxuICAgICAgICBsZXQgY3VycmVudE9iakluZGV4ID0gZ2V0SW5kZXhCeUlkKGN1cnJlbnRSZW1vdmVMZXNzb25JZCwgbGVzc29ucyk7XHJcblxyXG4gICAgICAgIGxlc3NvbnMuc3BsaWNlKGN1cnJlbnRPYmpJbmRleCwgMSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSBjdXJyZW50T2JqSW5kZXg7IGkgPCBsZXNzb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBsZXNzb25zW2ldLm9yZGVyLS1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlbmRlckRhdGEoKTtcclxuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIH0pXHJcbiAgICB9KTtcclxuXHJcbiAgICB0bXBEYXRhU2VydmljZS5nZXRDb3Vyc2VEYXRhKGNvdXJzZUlkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgIGNvdXJzZURhdGEgPSBbLi4uZGF0YV07XHJcbiAgICAgIHJlbmRlckRhdGEoKTtcclxuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHRoaXMucmVuZGVyRGF0YSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJlbmRlckRhdGEoKTtcclxuICB9O1xyXG59OyJdLCJmaWxlIjoiY291cnNlLWVkaXQuanMifQ==
