let courseController = function (a, b) {
    function c(a, b) {
        return {id: a, name: b, order: F.length, lessons: null}
    }

    function d() {
        y.innerHTML = "";
        let b = 0, c = 0, e = F.sort(function (c, a) {
            return c.order - a.order
        });
        e.forEach(function ({id: g, name: k, order: r, lessons: s, collapsed: t}) {
            let u = document.createElement("div");
            if (u.className = "topic", t && u.classList.add("collapsed"), u.innerHTML = `<div class="topic__header">
                                    <div class="title">${k}</div>
                                    <div class="duration"></div>
                                    <div class="edit-buttons">
                                        <a href="#" title="${m}" class="btn-icon small btn-icon--ghost icon-chevron-up"> </a>
                                        <a href="#" title="${o}" class="btn-icon small btn-icon--ghost icon-trash-can"> </a>
                                        <a href="#" title="${n}" class="btn-icon small btn-icon--ghost icon-chevron-down"> </a>
                                        <a href="#" title="${p}" class="btn-icon small btn-icon--ghost icon-edit"> </a>
                                        <a href="${`/${l}/my-courses/course/${a}/theme-${g}/create-lesson`}" title="${q}" class="btn-icon small icon-plus"> </a>
                                    </div>
                                </div>`, u.querySelector(".icon-chevron-up").addEventListener("click", function (a) {
                a.preventDefault(), h(g, -1)
            }), u.querySelector(".icon-trash-can").addEventListener("click", function (a) {
                a.preventDefault(), G = g, $.fancybox.open({src: A, touch: !1})
            }), u.querySelector(".icon-chevron-down").addEventListener("click", function (a) {
                a.preventDefault(), h(g, 1)
            }), u.querySelector(".icon-edit").addEventListener("click", function (a) {
                a.preventDefault(), H = g, x.value = k, $.fancybox.open({src: z, touch: !1})
            }), s) {
                let e = u.querySelector(".title"), h = u.querySelector(".duration"), k = document.createElement("div"),
                    q = 0;
                u.classList.add("spoiler"), k.className = "topic__body";
                let r = s.sort(function (c, a) {
                    return c.order - a.order
                });
                r.forEach(function ({id: c, name: d, order: e, duration: f, type: h}) {
                    let s = document.createElement("div");
                    s.className = "lesson", s.innerHTML = `<div class="title"><a href="${`/${l}/my-courses/course/${a}/view-lesson-${c}`}" title="${d}">${d} <div class="type">${h}</div></a></div>
                                      <div class="duration">${j(f)}</div>
                                      <div class="edit-buttons">
                                          <div class="united">
                                              <a href="#" title="${m}" class="btn-icon btn-icon--ghost icon-chevron-up"> </a>
                                              <a href="#" title="${o}" class="btn-icon btn-icon--ghost icon-trash-can"> </a>
                                              <a href="#" title="${n}" class="btn-icon btn-icon--ghost icon-chevron-down"> </a>
                                          </div>
                                          <a href="${`/${l}/my-courses/course/${a}/edit-lesson-${c}`}" title="${p}" class="btn-icon btn-icon--ghost icon-edit"> </a>
                                      </div>`, s.querySelector(".icon-chevron-up").addEventListener("click", function (a) {
                        a.preventDefault(), i(g, c, r, -1)
                    }), s.querySelector(".icon-trash-can").addEventListener("click", function (a) {
                        a.preventDefault(), I = c, G = g, $.fancybox.open({src: B, touch: !1})
                    }), s.querySelector(".icon-chevron-down").addEventListener("click", function (a) {
                        a.preventDefault(), i(g, c, r, 1)
                    }), q += f, k.append(s), b++
                }), e.addEventListener("click", function () {
                    u.classList.toggle("collapsed");
                    let a = f(g, F);
                    a.collapsed = !a.collapsed, d()
                }), h.innerHTML = j(q), c += q, u.append(k)
            }
            y.append(u)
        }), D.innerHTML = b, C.innerHTML = j(c)
    }

    function e(a, b) {
        let c = document.querySelector(E), d = c.querySelector(".title-primary"), e = c.querySelector(".plain-text");
        d.innerHTML = a, e.innerHTML = b, $.fancybox.open({src: E, touch: !1})
    }

    function f(a, b) {
        return b.find(function (b) {
            return b.id === +a
        })
    }

    function g(a, b) {
        return b.findIndex(function (b) {
            return b.id === +a
        })
    }

    function h(b, c) {
        let e = f(b, F), g = F.find(function (a) {
            return 1 == (a.order - e.order) * c
        });
        g && r.swapTopicsOrders(a, e.id, g.id).then(function () {
            e.order += c, g.order = e.order - c, d()
        }).catch(function (a) {
            console.log(a.message)
        })
    }

    function i(b, c, e, g) {
        let h = f(c, e), i = e.find(function (a) {
            return 1 == (a.order - h.order) * g
        });
        i && r.swapLessonsOrders(a, b, h.id, i.id).then(function () {
            h.order += g, i.order = h.order - g, d()
        }).catch(function (a) {
            console.log(a.message)
        })
    }

    function j(a) {
        let b = parseInt(a / 60), c = k(b), d = k(a % 60);
        return c + ":" + d
    }

    function k(a) {
        return 1 === (a + "").length ? "0" + (a + "") : a + ""
    }

    const l = window.Laravel.lang, {upText: m, downText: n, deleteText: o, editText: p, addText: q} = b,
        r = new DataService, s = document.querySelector("#addTopicBtn"), t = document.querySelector("#editTopicBtn"),
        u = document.querySelector("#removeTopicBtn"), v = document.querySelector("#removeLessonBtn"),
        w = document.querySelector("#newTopicNameInput"), x = document.querySelector("#editTopicNameInput"),
        y = document.querySelector("#courseDataContainer"), z = "#editTopicModal", A = "#removeTopicModal",
        B = "#removeLessonModal", C = document.querySelector("#courseDuration"),
        D = document.querySelector("#lessonsCount"), E = "#modalMsg";
    let F = [], G = null, H = null, I = null;
    this.initComponent = function () {
        s.addEventListener("click", function (b) {
            b.preventDefault();
            let e = w.value;
            return e ? void (w.parentElement.classList.remove("error"), r.addTopic(a, e).then(function ({id: a, name: b}) {
                F.push(c(a, b)), parent.jQuery.fancybox.getInstance().close(), d(), w.value = ""
            }).catch(function (a) {
                console.log(a.message)
            })) : (w.parentElement.classList.add("error"), !1)
        }), t.addEventListener("click", function (b) {
            b.preventDefault();
            let c = x.value;
            return c ? void (w.parentElement.classList.remove("error"), r.editTopic(a, H, c).then(function ({msgTitle: a, msgText: b}) {
                parent.jQuery.fancybox.getInstance().close(), setTimeout(function () {
                    e(a, b)
                }, 380);
                let g = f(H, F);
                g.name = c, d()
            }).catch(function (a) {
                console.log(a.message)
            })) : (w.parentElement.classList.add("error"), !1)
        }), u.addEventListener("click", function (b) {
            b.preventDefault(), r.removeTopic(a, G).then(function ({msgTitle: a, msgText: b}) {
                parent.jQuery.fancybox.getInstance().close(), setTimeout(function () {
                    e(a, b)
                }, 380);
                let c = g(G, F);
                F.splice(c, 1);
                for (let d = c; d < F.length; d++) F[d].order--;
                d()
            }).catch(function (a) {
                console.log(a.message)
            })
        }), v.addEventListener("click", function (b) {
            b.preventDefault(), r.removeLesson(a, G, I).then(function ({msgTitle: a, msgText: b}) {
                parent.jQuery.fancybox.getInstance().close(), setTimeout(function () {
                    e(a, b)
                }, 380);
                let c = f(G, F).lessons, h = g(I, c);
                c.splice(h, 1);
                for (let d = h; d < c.length; d++) c[d].order--;
                d()
            }).catch(function (a) {
                console.log(a.message)
            })
        }), r.getCourseData(a).then(function (a) {
            F = [...a], d()
        }).catch(function (a) {
            console.log(a.message)
        })
    }, this.renderData = function () {
        d()
    }
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvdXJzZS1lZGl0LmpzIl0sIm5hbWVzIjpbImNvdXJzZUNvbnRyb2xsZXIiLCJjb3Vyc2VJZCIsInRleHREYXRhIiwiYWRkVG9waWMiLCJpZCIsIm5hbWUiLCJvcmRlciIsImNvdXJzZURhdGEiLCJsZW5ndGgiLCJsZXNzb25zIiwicmVuZGVyRGF0YSIsImNvdXJzZURhdGFDb250YWluZXIiLCJpbm5lckhUTUwiLCJsZXNzb25zQ291bnQiLCJjb3Vyc2VEdXJhdGlvbiIsImNvdXJzZURhdGFTb3J0ZWQiLCJzb3J0IiwiYSIsImIiLCJmb3JFYWNoIiwidG9waWNJZCIsInRvcGljTmFtZSIsInRvcGljT3JkZXIiLCJjb2xsYXBzZWQiLCJ0b3BpY1dyYXBwZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJ1cFRleHQiLCJkZWxldGVUZXh0IiwiZG93blRleHQiLCJlZGl0VGV4dCIsImxhbmciLCJhZGRUZXh0IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJzd2FwVG9waWNzIiwiY3VycmVudFJlbW92ZVRvcGljSWQiLCIkIiwiZmFuY3lib3giLCJvcGVuIiwic3JjIiwicmVtb3ZlVG9waWNNb2RhbElkIiwidG91Y2giLCJjdXJyZW50RWRpdFRvcGljSWQiLCJlZGl0VG9waWNOYW1lSW5wdXQiLCJ2YWx1ZSIsImVkaXRUb3BpY01vZGFsSWQiLCJ0b3BpY1RpdGxlIiwidG9waWNEdXJhdGlvbkVsIiwidG9waWNCb2R5IiwidG9waWNEdXJhdGlvbiIsImxlc3NvbnNTb3J0ZWQiLCJsZXNzb25JZCIsImxlc3Nvbk5hbWUiLCJsZXNzb25PcmRlciIsImR1cmF0aW9uIiwibGVzc29uRHVyYXRpb24iLCJ0eXBlIiwibGVzc29uVHlwZSIsImxlc3NvbldyYXBwZXIiLCJtaW51dGVzVG9Ib3VycyIsInN3YXBMZXNzb25zIiwiY3VycmVudFJlbW92ZUxlc3NvbklkIiwicmVtb3ZlTGVzc29uTW9kYWxJZCIsImFwcGVuZCIsInRvZ2dsZSIsInRvcGljT2JqIiwiZ2V0T2JqZWN0QnlJZCIsImxlc3NvbnNDb3VudEVsIiwiY291cnNlRHVyYXRpb25FbCIsInNob3dNb2RhbE1zZyIsInRpdGxlIiwidGV4dCIsIm1vZGFsIiwibW9kYWxNc2dJZCIsIm1vZGFsVGl0bGUiLCJtb2RhbFRleHQiLCJkYXRhIiwiZmluZCIsIml0ZW0iLCJnZXRJbmRleEJ5SWQiLCJmaW5kSW5kZXgiLCJkaXJlY3Rpb24iLCJjdXJyZW50Iiwic3dhcEl0ZW0iLCJ0bXBEYXRhU2VydmljZSIsInN3YXBUb3BpY3NPcmRlcnMiLCJ0aGVuIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJtZXNzYWdlIiwic3dhcExlc3NvbnNPcmRlcnMiLCJtaW51dGVzIiwiaG91cnMiLCJwYXJzZUludCIsImZvcm1hdHRlZEhvdXJzIiwiYWRkWmVyb1RvTnVtYmVyIiwiZm9ybWF0dGVkTWludXRlcyIsIm51bWJlciIsIndpbmRvdyIsIkxhcmF2ZWwiLCJEYXRhU2VydmljZSIsImFkZFRvcGljQnRuIiwiZWRpdFRvcGljQnRuIiwicmVtb3ZlVG9waWNCdG4iLCJyZW1vdmVMZXNzb25CdG4iLCJuZXdUb3BpY05hbWVJbnB1dCIsImluaXRDb21wb25lbnQiLCJwYXJlbnRFbGVtZW50IiwicmVtb3ZlIiwicHVzaCIsInBhcmVudCIsImpRdWVyeSIsImdldEluc3RhbmNlIiwiY2xvc2UiLCJlZGl0VG9waWMiLCJtc2dUaXRsZSIsIm1zZ1RleHQiLCJzZXRUaW1lb3V0IiwiY3VycmVudE9iaiIsInJlbW92ZVRvcGljIiwiY3VycmVudE9iakluZGV4Iiwic3BsaWNlIiwiaSIsInJlbW92ZUxlc3NvbiIsImdldENvdXJzZURhdGEiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLENBQUFBLGdCQUFnQixDQUFHLFNBQVVDLENBQVYsQ0FBb0JDLENBQXBCLENBQThCLENBMEJuRCxRQUFTQyxDQUFBQSxDQUFU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Q0FFMUR4RSxDQUFVLEVBQ1gsQ0FIRCxFQUdHbUYsS0FISCxDQUdTLFNBQVVDLENBQVYsQ0FBaUIsQ0FDeEJDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRixDQUFLLENBQUNHLE9BQWxCLENBQ0QsQ0FMRCxDQU1ELENBeFdrRCxDQTBXbkQsS0FBS3ZGLFVBQUwsQ0FBa0IsVUFBWSxDQUM1QkEsQ0FBVSxFQUNYLENBQ0YsQ0E3V0QiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgY291cnNlQ29udHJvbGxlciA9IGZ1bmN0aW9uIChjb3Vyc2VJZCwgdGV4dERhdGEpIHtcclxuICBjb25zdCBsYW5nID0gd2luZG93LkxhcmF2ZWwubGFuZztcclxuICBjb25zdCB7dXBUZXh0LCBkb3duVGV4dCwgZGVsZXRlVGV4dCwgZWRpdFRleHQsIGFkZFRleHR9ID0gdGV4dERhdGE7XHJcbiAgY29uc3QgdG1wRGF0YVNlcnZpY2UgPSBuZXcgRGF0YVNlcnZpY2UoKTtcclxuICBjb25zdCBhZGRUb3BpY0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGRUb3BpY0J0bicpO1xyXG4gIGNvbnN0IGVkaXRUb3BpY0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlZGl0VG9waWNCdG4nKTtcclxuICBjb25zdCByZW1vdmVUb3BpY0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZW1vdmVUb3BpY0J0bicpO1xyXG4gIGNvbnN0IHJlbW92ZUxlc3NvbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZW1vdmVMZXNzb25CdG4nKTtcclxuICBjb25zdCBuZXdUb3BpY05hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdUb3BpY05hbWVJbnB1dCcpO1xyXG4gIGNvbnN0IGVkaXRUb3BpY05hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlZGl0VG9waWNOYW1lSW5wdXQnKTtcclxuICBjb25zdCBjb3Vyc2VEYXRhQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvdXJzZURhdGFDb250YWluZXInKTtcclxuICBjb25zdCBlZGl0VG9waWNNb2RhbElkID0gJyNlZGl0VG9waWNNb2RhbCc7XHJcbiAgY29uc3QgcmVtb3ZlVG9waWNNb2RhbElkID0gJyNyZW1vdmVUb3BpY01vZGFsJztcclxuICBjb25zdCByZW1vdmVMZXNzb25Nb2RhbElkID0gJyNyZW1vdmVMZXNzb25Nb2RhbCc7XHJcbiAgY29uc3QgY291cnNlRHVyYXRpb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb3Vyc2VEdXJhdGlvbicpO1xyXG4gIGNvbnN0IGxlc3NvbnNDb3VudEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xlc3NvbnNDb3VudCcpO1xyXG4gIGNvbnN0IG1vZGFsTXNnSWQgPSAnI21vZGFsTXNnJztcclxuXHJcbiAgbGV0IGNvdXJzZURhdGEgPSBbXTtcclxuXHJcbiAgbGV0IGN1cnJlbnRSZW1vdmVUb3BpY0lkID0gbnVsbDtcclxuICBsZXQgY3VycmVudEVkaXRUb3BpY0lkID0gbnVsbDtcclxuICBsZXQgY3VycmVudFJlbW92ZUxlc3NvbklkID0gbnVsbDtcclxuXHJcbiAgLy8gbGV0IGlkSW5jcmVtZW50ID0gNTA7IC8vIHJlbW92ZSBvbiBwcm9kdWN0aW9uXHJcblxyXG4gIGZ1bmN0aW9uIGFkZFRvcGljKGlkLCBuYW1lKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpZCxcclxuICAgICAgbmFtZSxcclxuICAgICAgb3JkZXI6IGNvdXJzZURhdGEubGVuZ3RoLFxyXG4gICAgICBsZXNzb25zOiBudWxsXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJEYXRhKCkge1xyXG4gICAgY291cnNlRGF0YUNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICBsZXQgbGVzc29uc0NvdW50ID0gMCxcclxuICAgICAgY291cnNlRHVyYXRpb24gPSAwO1xyXG5cclxuICAgIGxldCBjb3Vyc2VEYXRhU29ydGVkID0gY291cnNlRGF0YS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgIHJldHVybiBhLm9yZGVyIC0gYi5vcmRlclxyXG4gICAgfSk7XHJcblxyXG4gICAgY291cnNlRGF0YVNvcnRlZC5mb3JFYWNoKGZ1bmN0aW9uICh7aWQ6IHRvcGljSWQsIG5hbWU6IHRvcGljTmFtZSwgb3JkZXI6IHRvcGljT3JkZXIsIGxlc3NvbnMsIGNvbGxhcHNlZH0pIHtcclxuICAgICAgbGV0IHRvcGljV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICBsZXQgbGVzc29uQ3JlYXRlTGluayA9IGAvJHtsYW5nfS9teS1jb3Vyc2VzL2NvdXJzZS8ke2NvdXJzZUlkfS90aGVtZS0ke3RvcGljSWR9L2NyZWF0ZS1sZXNzb25gO1xyXG5cclxuICAgICAgdG9waWNXcmFwcGVyLmNsYXNzTmFtZSA9ICd0b3BpYyc7XHJcblxyXG4gICAgICBpZiAoY29sbGFwc2VkKSB7XHJcbiAgICAgICAgdG9waWNXcmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2NvbGxhcHNlZCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0b3BpY1dyYXBwZXIuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9XCJ0b3BpY19faGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aXRsZVwiPiR7dG9waWNOYW1lfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHVyYXRpb25cIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImVkaXQtYnV0dG9uc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNcIiB0aXRsZT1cIiR7dXBUZXh0fVwiIGNsYXNzPVwiYnRuLWljb24gc21hbGwgYnRuLWljb24tLWdob3N0IGljb24tY2hldnJvbi11cFwiPiA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIHRpdGxlPVwiJHtkZWxldGVUZXh0fVwiIGNsYXNzPVwiYnRuLWljb24gc21hbGwgYnRuLWljb24tLWdob3N0IGljb24tdHJhc2gtY2FuXCI+IDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgdGl0bGU9XCIke2Rvd25UZXh0fVwiIGNsYXNzPVwiYnRuLWljb24gc21hbGwgYnRuLWljb24tLWdob3N0IGljb24tY2hldnJvbi1kb3duXCI+IDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgdGl0bGU9XCIke2VkaXRUZXh0fVwiIGNsYXNzPVwiYnRuLWljb24gc21hbGwgYnRuLWljb24tLWdob3N0IGljb24tZWRpdFwiPiA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHtsZXNzb25DcmVhdGVMaW5rfVwiIHRpdGxlPVwiJHthZGRUZXh0fVwiIGNsYXNzPVwiYnRuLWljb24gc21hbGwgaWNvbi1wbHVzXCI+IDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDtcclxuXHJcbiAgICAgIC8qTW92ZSB1cCovXHJcbiAgICAgIHRvcGljV3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuaWNvbi1jaGV2cm9uLXVwJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBzd2FwVG9waWNzKHRvcGljSWQsIC0xKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKkRlbGV0ZSovXHJcbiAgICAgIHRvcGljV3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuaWNvbi10cmFzaC1jYW4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGN1cnJlbnRSZW1vdmVUb3BpY0lkID0gdG9waWNJZDtcclxuICAgICAgICAkLmZhbmN5Ym94Lm9wZW4oe1xyXG4gICAgICAgICAgc3JjOiByZW1vdmVUb3BpY01vZGFsSWQsXHJcbiAgICAgICAgICB0b3VjaDogZmFsc2VcclxuICAgICAgICB9KVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qTW92ZSBkb3duKi9cclxuICAgICAgdG9waWNXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5pY29uLWNoZXZyb24tZG93bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgc3dhcFRvcGljcyh0b3BpY0lkLCAxKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKkVkaXQqL1xyXG4gICAgICB0b3BpY1dyYXBwZXIucXVlcnlTZWxlY3RvcignLmljb24tZWRpdCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgY3VycmVudEVkaXRUb3BpY0lkID0gdG9waWNJZDtcclxuICAgICAgICBlZGl0VG9waWNOYW1lSW5wdXQudmFsdWUgPSB0b3BpY05hbWU7XHJcbiAgICAgICAgJC5mYW5jeWJveC5vcGVuKHtcclxuICAgICAgICAgIHNyYzogZWRpdFRvcGljTW9kYWxJZCxcclxuICAgICAgICAgIHRvdWNoOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChsZXNzb25zKSB7XHJcbiAgICAgICAgbGV0IHRvcGljVGl0bGUgPSB0b3BpY1dyYXBwZXIucXVlcnlTZWxlY3RvcignLnRpdGxlJyk7XHJcbiAgICAgICAgbGV0IHRvcGljRHVyYXRpb25FbCA9IHRvcGljV3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuZHVyYXRpb24nKTtcclxuICAgICAgICBsZXQgdG9waWNCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbGV0IHRvcGljRHVyYXRpb24gPSAwO1xyXG5cclxuICAgICAgICB0b3BpY1dyYXBwZXIuY2xhc3NMaXN0LmFkZCgnc3BvaWxlcicpO1xyXG4gICAgICAgIHRvcGljQm9keS5jbGFzc05hbWUgPSAndG9waWNfX2JvZHknO1xyXG5cclxuICAgICAgICBsZXQgbGVzc29uc1NvcnRlZCA9IGxlc3NvbnMuc29ydChmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgcmV0dXJuIGEub3JkZXIgLSBiLm9yZGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxlc3NvbnNTb3J0ZWQuZm9yRWFjaChmdW5jdGlvbiAoe2lkOiBsZXNzb25JZCwgbmFtZTogbGVzc29uTmFtZSwgb3JkZXI6IGxlc3Nvbk9yZGVyLCBkdXJhdGlvbjogbGVzc29uRHVyYXRpb24sIHR5cGU6IGxlc3NvblR5cGV9KSB7XHJcbiAgICAgICAgICBsZXQgbGVzc29uV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgbGV0IGxlc3NvbkVkaXRMaW5rID0gYC8ke2xhbmd9L215LWNvdXJzZXMvY291cnNlLyR7Y291cnNlSWR9L3RoZW1lLSR7dG9waWNJZH0vZWRpdC1sZXNzb24tJHtsZXNzb25JZH1gO1xyXG4gICAgICAgICAgbGV0IGxlc3NvbkxpbmsgPSBgLyR7bGFuZ30vbXktY291cnNlcy9jb3Vyc2UvJHtjb3Vyc2VJZH0vdGhlbWUtJHt0b3BpY0lkfS92aWV3LWxlc3Nvbi0ke2xlc3NvbklkfWA7XHJcbiAgICAgICAgICBsZXNzb25XcmFwcGVyLmNsYXNzTmFtZSA9ICdsZXNzb24nO1xyXG4gICAgICAgICAgbGVzc29uV3JhcHBlci5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz1cInRpdGxlXCI+PGEgaHJlZj1cIiR7bGVzc29uTGlua31cIiB0aXRsZT1cIiR7bGVzc29uTmFtZX1cIj4ke2xlc3Nvbk5hbWV9IDxkaXYgY2xhc3M9XCJ0eXBlXCI+JHtsZXNzb25UeXBlfTwvZGl2PjwvYT48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHVyYXRpb25cIj4ke21pbnV0ZXNUb0hvdXJzKGxlc3NvbkR1cmF0aW9uKX08L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZWRpdC1idXR0b25zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1bml0ZWRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgdGl0bGU9XCIke3VwVGV4dH1cIiBjbGFzcz1cImJ0bi1pY29uIGJ0bi1pY29uLS1naG9zdCBpY29uLWNoZXZyb24tdXBcIj4gPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNcIiB0aXRsZT1cIiR7ZGVsZXRlVGV4dH1cIiBjbGFzcz1cImJ0bi1pY29uIGJ0bi1pY29uLS1naG9zdCBpY29uLXRyYXNoLWNhblwiPiA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIHRpdGxlPVwiJHtkb3duVGV4dH1cIiBjbGFzcz1cImJ0bi1pY29uIGJ0bi1pY29uLS1naG9zdCBpY29uLWNoZXZyb24tZG93blwiPiA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHtsZXNzb25FZGl0TGlua31cIiB0aXRsZT1cIiR7ZWRpdFRleHR9XCIgY2xhc3M9XCJidG4taWNvbiBidG4taWNvbi0tZ2hvc3QgaWNvbi1lZGl0XCI+IDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gO1xyXG5cclxuICAgICAgICAgIC8qTW92ZSB1cCovXHJcbiAgICAgICAgICBsZXNzb25XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5pY29uLWNoZXZyb24tdXAnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgc3dhcExlc3NvbnModG9waWNJZCwgbGVzc29uSWQsIGxlc3NvbnNTb3J0ZWQsIC0xKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIC8qRGVsZXRlKi9cclxuICAgICAgICAgIGxlc3NvbldyYXBwZXIucXVlcnlTZWxlY3RvcignLmljb24tdHJhc2gtY2FuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRSZW1vdmVMZXNzb25JZCA9IGxlc3NvbklkO1xyXG4gICAgICAgICAgICBjdXJyZW50UmVtb3ZlVG9waWNJZCA9IHRvcGljSWQ7XHJcbiAgICAgICAgICAgICQuZmFuY3lib3gub3Blbih7XHJcbiAgICAgICAgICAgICAgc3JjOiByZW1vdmVMZXNzb25Nb2RhbElkLFxyXG4gICAgICAgICAgICAgIHRvdWNoOiBmYWxzZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgLypNb3ZlIGRvd24qL1xyXG4gICAgICAgICAgbGVzc29uV3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuaWNvbi1jaGV2cm9uLWRvd24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgc3dhcExlc3NvbnModG9waWNJZCwgbGVzc29uSWQsIGxlc3NvbnNTb3J0ZWQsIDEpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgdG9waWNEdXJhdGlvbiArPSBsZXNzb25EdXJhdGlvbjtcclxuXHJcbiAgICAgICAgICB0b3BpY0JvZHkuYXBwZW5kKGxlc3NvbldyYXBwZXIpO1xyXG5cclxuICAgICAgICAgIGxlc3NvbnNDb3VudCsrO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0b3BpY1RpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgdG9waWNXcmFwcGVyLmNsYXNzTGlzdC50b2dnbGUoJ2NvbGxhcHNlZCcpO1xyXG4gICAgICAgICAgbGV0IHRvcGljT2JqID0gZ2V0T2JqZWN0QnlJZCh0b3BpY0lkLCBjb3Vyc2VEYXRhKTtcclxuICAgICAgICAgIHRvcGljT2JqLmNvbGxhcHNlZCA9ICF0b3BpY09iai5jb2xsYXBzZWQ7XHJcbiAgICAgICAgICByZW5kZXJEYXRhKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRvcGljRHVyYXRpb25FbC5pbm5lckhUTUwgPSBtaW51dGVzVG9Ib3Vycyh0b3BpY0R1cmF0aW9uKTtcclxuXHJcbiAgICAgICAgY291cnNlRHVyYXRpb24gKz0gdG9waWNEdXJhdGlvbjtcclxuXHJcbiAgICAgICAgdG9waWNXcmFwcGVyLmFwcGVuZCh0b3BpY0JvZHkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvKkFkZCBjcmVhdGVkIHRvcGljIHRvIGNvdXJzZSBjb250YWluZXIqL1xyXG4gICAgICBjb3Vyc2VEYXRhQ29udGFpbmVyLmFwcGVuZCh0b3BpY1dyYXBwZXIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGVzc29uc0NvdW50RWwuaW5uZXJIVE1MID0gbGVzc29uc0NvdW50O1xyXG4gICAgY291cnNlRHVyYXRpb25FbC5pbm5lckhUTUwgPSBtaW51dGVzVG9Ib3Vycyhjb3Vyc2VEdXJhdGlvbik7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzaG93TW9kYWxNc2codGl0bGUsIHRleHQpIHtcclxuICAgIGxldCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobW9kYWxNc2dJZCksXHJcbiAgICAgIG1vZGFsVGl0bGUgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcudGl0bGUtcHJpbWFyeScpLFxyXG4gICAgICBtb2RhbFRleHQgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcucGxhaW4tdGV4dCcpO1xyXG5cclxuICAgIG1vZGFsVGl0bGUuaW5uZXJIVE1MID0gdGl0bGU7XHJcbiAgICBtb2RhbFRleHQuaW5uZXJIVE1MID0gdGV4dDtcclxuXHJcbiAgICAkLmZhbmN5Ym94Lm9wZW4oe1xyXG4gICAgICBzcmM6IG1vZGFsTXNnSWQsXHJcbiAgICAgIHRvdWNoOiBmYWxzZVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRPYmplY3RCeUlkKGlkLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gZGF0YS5maW5kKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgIHJldHVybiBpdGVtLmlkID09PSBOdW1iZXIoaWQpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0SW5kZXhCeUlkKGlkLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gZGF0YS5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgcmV0dXJuIGl0ZW0uaWQgPT09IE51bWJlcihpZClcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc3dhcFRvcGljcyh0b3BpY0lkLCBkaXJlY3Rpb24pIHtcclxuICAgIGxldCBjdXJyZW50ID0gZ2V0T2JqZWN0QnlJZCh0b3BpY0lkLCBjb3Vyc2VEYXRhKTtcclxuICAgIGxldCBzd2FwSXRlbSA9IGNvdXJzZURhdGEuZmluZChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICByZXR1cm4gKChpdGVtLm9yZGVyIC0gY3VycmVudC5vcmRlcikgKiBkaXJlY3Rpb24gPT09IDEpXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoc3dhcEl0ZW0pIHtcclxuICAgICAgdG1wRGF0YVNlcnZpY2Uuc3dhcFRvcGljc09yZGVycyhjb3Vyc2VJZCwgY3VycmVudC5pZCwgc3dhcEl0ZW0uaWQpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGN1cnJlbnQub3JkZXIgPSBjdXJyZW50Lm9yZGVyICsgZGlyZWN0aW9uO1xyXG4gICAgICAgIHN3YXBJdGVtLm9yZGVyID0gY3VycmVudC5vcmRlciAtIGRpcmVjdGlvbjtcclxuICAgICAgICByZW5kZXJEYXRhKCk7XHJcbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHN3YXBMZXNzb25zKHRvcGljSWQsIGxlc3NvbklkLCBsZXNzb25zLCBkaXJlY3Rpb24pIHtcclxuICAgIGxldCBjdXJyZW50ID0gZ2V0T2JqZWN0QnlJZChsZXNzb25JZCwgbGVzc29ucyk7XHJcbiAgICBsZXQgc3dhcEl0ZW0gPSBsZXNzb25zLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgcmV0dXJuICgoaXRlbS5vcmRlciAtIGN1cnJlbnQub3JkZXIpICogZGlyZWN0aW9uID09PSAxKVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKHN3YXBJdGVtKSB7XHJcbiAgICAgIHRtcERhdGFTZXJ2aWNlLnN3YXBMZXNzb25zT3JkZXJzKGNvdXJzZUlkLCB0b3BpY0lkLCBjdXJyZW50LmlkLCBzd2FwSXRlbS5pZCkudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY3VycmVudC5vcmRlciA9IGN1cnJlbnQub3JkZXIgKyBkaXJlY3Rpb247XHJcbiAgICAgICAgc3dhcEl0ZW0ub3JkZXIgPSBjdXJyZW50Lm9yZGVyIC0gZGlyZWN0aW9uO1xyXG4gICAgICAgIHJlbmRlckRhdGEoKTtcclxuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gbWludXRlc1RvSG91cnMobWludXRlcykge1xyXG4gICAgbGV0IGhvdXJzID0gcGFyc2VJbnQobWludXRlcy82MCk7XHJcbiAgICBsZXQgZm9ybWF0dGVkSG91cnMgPSBhZGRaZXJvVG9OdW1iZXIoaG91cnMpO1xyXG4gICAgbGV0IGZvcm1hdHRlZE1pbnV0ZXMgPSBhZGRaZXJvVG9OdW1iZXIobWludXRlcyU2MCk7XHJcblxyXG4gICAgcmV0dXJuIGZvcm1hdHRlZEhvdXJzICsgJzonICsgZm9ybWF0dGVkTWludXRlc1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWRkWmVyb1RvTnVtYmVyKG51bWJlcikge1xyXG4gICAgcmV0dXJuIFN0cmluZyhudW1iZXIpLmxlbmd0aCA9PT0gMSA/ICcwJyArIFN0cmluZyhudW1iZXIpIDogU3RyaW5nKG51bWJlcilcclxuICB9XHJcblxyXG4gIHRoaXMuaW5pdENvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGFkZFRvcGljQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBsZXQgbmFtZSA9IG5ld1RvcGljTmFtZUlucHV0LnZhbHVlO1xyXG5cclxuICAgICAgLypJZiBuYW1lIGlucHV0IGlzIGVtcHR5IGhpZ2hsaWdodCBpbnB1dCBhbmQgc3RvcCB0aGUgc2NyaXB0Ki9cclxuICAgICAgaWYgKCFuYW1lKSB7XHJcbiAgICAgICAgbmV3VG9waWNOYW1lSW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvKlJlbW92ZSBpbnB1dCdzIHJlZCBoaWdobGlnaHQgYW5kIHNlbmQgbmV3IHRvcGljIHRvIHNlcnZlciovXHJcbiAgICAgIG5ld1RvcGljTmFtZUlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcclxuICAgICAgdG1wRGF0YVNlcnZpY2UuYWRkVG9waWMoY291cnNlSWQsIG5hbWUpLnRoZW4oZnVuY3Rpb24oe2lkLCBuYW1lfSkge1xyXG4gICAgICAgIGNvdXJzZURhdGEucHVzaChhZGRUb3BpYyhpZCwgbmFtZSkpOyAvL3VuY29tbWVudCBvbiBwcm9kdWN0aW9uXHJcbiAgICAgICAgLy8gY291cnNlRGF0YS5wdXNoKGFkZFRvcGljKGlkICsgaWRJbmNyZW1lbnQsIG5hbWUpKTsgLy9yZW1vdmUgb24gcHJvZHVjdGlvblxyXG4gICAgICAgIC8vIGlkSW5jcmVtZW50ICs9IDE7IC8vcmVtb3ZlIG9uIHByb2R1Y3Rpb25cclxuICAgICAgICBwYXJlbnQualF1ZXJ5LmZhbmN5Ym94LmdldEluc3RhbmNlKCkuY2xvc2UoKTtcclxuICAgICAgICByZW5kZXJEYXRhKCk7XHJcbiAgICAgICAgbmV3VG9waWNOYW1lSW5wdXQudmFsdWUgPSAnJztcclxuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZWRpdFRvcGljQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBsZXQgbmFtZSA9IGVkaXRUb3BpY05hbWVJbnB1dC52YWx1ZTtcclxuXHJcbiAgICAgIC8qSWYgbmFtZSBpbnB1dCBpcyBlbXB0eSBoaWdobGlnaHQgaW5wdXQgYW5kIHN0b3AgdGhlIHNjcmlwdCovXHJcbiAgICAgIGlmICghbmFtZSkge1xyXG4gICAgICAgIG5ld1RvcGljTmFtZUlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZXJyb3InKTtcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfVxyXG5cclxuICAgICAgLypSZW1vdmUgaW5wdXQncyByZWQgaGlnaGxpZ2h0IGFuZCBzZW5kIG5ldyB0b3BpYyBuYW1lIHRvIHNlcnZlciovXHJcbiAgICAgIG5ld1RvcGljTmFtZUlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcclxuICAgICAgdG1wRGF0YVNlcnZpY2UuZWRpdFRvcGljKGNvdXJzZUlkLCBjdXJyZW50RWRpdFRvcGljSWQsIG5hbWUpLnRoZW4oZnVuY3Rpb24gKHttc2dUaXRsZSwgbXNnVGV4dH0pIHtcclxuICAgICAgICBwYXJlbnQualF1ZXJ5LmZhbmN5Ym94LmdldEluc3RhbmNlKCkuY2xvc2UoKTtcclxuXHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBzaG93TW9kYWxNc2cobXNnVGl0bGUsIG1zZ1RleHQpO1xyXG4gICAgICAgIH0sIDM4MCk7XHJcblxyXG4gICAgICAgIGxldCBjdXJyZW50T2JqID0gZ2V0T2JqZWN0QnlJZChjdXJyZW50RWRpdFRvcGljSWQsIGNvdXJzZURhdGEpO1xyXG4gICAgICAgIGN1cnJlbnRPYmoubmFtZSA9IG5hbWU7XHJcblxyXG4gICAgICAgIHJlbmRlckRhdGEoKTtcclxuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmVtb3ZlVG9waWNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRtcERhdGFTZXJ2aWNlLnJlbW92ZVRvcGljKGNvdXJzZUlkLCBjdXJyZW50UmVtb3ZlVG9waWNJZCkudGhlbihmdW5jdGlvbiAoe21zZ1RpdGxlLCBtc2dUZXh0fSkge1xyXG4gICAgICAgIHBhcmVudC5qUXVlcnkuZmFuY3lib3guZ2V0SW5zdGFuY2UoKS5jbG9zZSgpO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIHNob3dNb2RhbE1zZyhtc2dUaXRsZSwgbXNnVGV4dCk7XHJcbiAgICAgICAgfSwgMzgwKTtcclxuXHJcbiAgICAgICAgbGV0IGN1cnJlbnRPYmpJbmRleCA9IGdldEluZGV4QnlJZChjdXJyZW50UmVtb3ZlVG9waWNJZCwgY291cnNlRGF0YSk7XHJcblxyXG4gICAgICAgIGNvdXJzZURhdGEuc3BsaWNlKGN1cnJlbnRPYmpJbmRleCwgMSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSBjdXJyZW50T2JqSW5kZXg7IGkgPCBjb3Vyc2VEYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBjb3Vyc2VEYXRhW2ldLm9yZGVyLS1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlbmRlckRhdGEoKTtcclxuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmVtb3ZlTGVzc29uQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0bXBEYXRhU2VydmljZS5yZW1vdmVMZXNzb24oY291cnNlSWQsIGN1cnJlbnRSZW1vdmVUb3BpY0lkLCBjdXJyZW50UmVtb3ZlTGVzc29uSWQpLnRoZW4oZnVuY3Rpb24oe21zZ1RpdGxlLCBtc2dUZXh0fSkge1xyXG4gICAgICAgIHBhcmVudC5qUXVlcnkuZmFuY3lib3guZ2V0SW5zdGFuY2UoKS5jbG9zZSgpO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIHNob3dNb2RhbE1zZyhtc2dUaXRsZSwgbXNnVGV4dCk7XHJcbiAgICAgICAgfSwgMzgwKTtcclxuXHJcbiAgICAgICAgbGV0IGxlc3NvbnMgPSBnZXRPYmplY3RCeUlkKGN1cnJlbnRSZW1vdmVUb3BpY0lkLCBjb3Vyc2VEYXRhKS5sZXNzb25zO1xyXG5cclxuICAgICAgICBsZXQgY3VycmVudE9iakluZGV4ID0gZ2V0SW5kZXhCeUlkKGN1cnJlbnRSZW1vdmVMZXNzb25JZCwgbGVzc29ucyk7XHJcblxyXG4gICAgICAgIGxlc3NvbnMuc3BsaWNlKGN1cnJlbnRPYmpJbmRleCwgMSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSBjdXJyZW50T2JqSW5kZXg7IGkgPCBsZXNzb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBsZXNzb25zW2ldLm9yZGVyLS1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlbmRlckRhdGEoKTtcclxuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIH0pXHJcbiAgICB9KTtcclxuXHJcbiAgICB0bXBEYXRhU2VydmljZS5nZXRDb3Vyc2VEYXRhKGNvdXJzZUlkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgIGNvdXJzZURhdGEgPSBbLi4uZGF0YV07XHJcbiAgICAgIHJlbmRlckRhdGEoKTtcclxuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHRoaXMucmVuZGVyRGF0YSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJlbmRlckRhdGEoKTtcclxuICB9O1xyXG59OyJdLCJmaWxlIjoiY291cnNlLWVkaXQuanMifQ==
