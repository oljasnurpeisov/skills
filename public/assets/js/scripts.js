let changeEvent=new Event("change");function getScrollbarWidth(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var a=document.createElement("div");a.style.width="100%",e.appendChild(a);var n=a.offsetWidth;return e.parentNode.removeChild(e),t-n}function bodyUnscrollable(){if(!$("body").hasClass("no-scroll")){let e=$(window).scrollTop(),t=$("*").filter(function(){return"fixed"==$(this).css("position")});$(".main-wrapper").css("margin-top",-e),$("body").addClass("no-scroll").css("margin-right",getScrollbarWidth()),t.css("margin-right",getScrollbarWidth())}}function bodyScrollable(){if($("body").hasClass("no-scroll")){let e=$(".main-wrapper").css("margin-top").slice(0,-2),t=$("*").filter(function(){return"fixed"==$(this).css("position")});$("body").removeClass("no-scroll").css("margin-right",0),t.css("margin-right",0),$(".main-wrapper").css("margin-top",0),$(window).scrollTop(-e)}}function scrollToBottom(e){let t=document.querySelector(e);t.scrollTop=t.scrollHeight}function renderAuthorStats(e){const t=e.dataset.url;am4core.ready(function(){am4core.useTheme(am4themes_animated);let a=am4core.create(e,am4charts.XYChart);const n=window.Laravel.lang;"ru"===n?a.language.locale=am4lang_ru_RU:"kk"===n&&(a.language.locale=am4lang_ko_KR);let l={language:n,autoClose:!0,maxDate:new Date,onSelect:function(n){var l,r;e.classList.add("preloader"),n?(l=i.el.value,r=o.el.value,$.ajax({url:t+"?date_from="+l+"&date_to="+r,success:function(t){a.data=t.data,e.classList.remove("preloader")}})):$.ajax({url:t,success:function(t){a.data=t.data,e.classList.remove("preloader")}})}},i=$('[name="dateFrom"]').datepicker(l).data("datepicker"),o=$('[name="dateTo"]').datepicker(l).data("datepicker"),r=document.querySelector("#clear"),c=i.el.value?moment(i.el.value,"DD.MM.YYYY").format("YYYY-MM-DD"):"",s=o.el.value?moment(o.el.value,"DD.MM.YYYY").format("YYYY-MM-DD"):"";function d(e){e.dataFields.dateX="date",e.strokeWidth=3,e.minBulletDistance=10,e.tooltip.pointerOrientation="vertical",e.tooltip.background.cornerRadius=20,e.tooltip.background.strokeOpacity=0,e.tooltip.label.minWidth=40,e.tooltip.label.minHeight=40,e.tooltip.label.textAlign="middle",e.tooltip.label.textValign="middle",e.tooltip.getFillFromObject=!1,e.tooltip.background.fill=am4core.color("#f5f5f5"),e.tooltip.autoTextColor=!1,e.tooltip.label.fill=am4core.color("#333")}$.ajax({url:t+"?date_from="+c+"&date_to="+s,success:function(e){const t=e.color1,n=e.color2;a.data=e.data;let l=a.xAxes.push(new am4charts.DateAxis);l.renderer.minGridDistance=50;a.yAxes.push(new am4charts.ValueAxis);let i=a.series.push(new am4charts.LineSeries);i.dataFields.valueY="value1",i.stroke=t,i.tooltipText="{value1}",d(i);let o=a.series.push(new am4charts.LineSeries);o.dataFields.valueY="value2",o.stroke=n,o.tooltipText="{value2}",d(o),a.cursor=new am4charts.XYCursor,a.cursor.xAxis=l}}),r.addEventListener("click",function(e){e.preventDefault(),i.clear(),o.clear()})})}function toArray(e){return Array.isArray(e)?e:Array(e)}function htmlCollectionToArray(e){return Array.prototype.slice.call(e)}function hideAllChildren(e){Array.prototype.slice.call(e.children).forEach(function(e){e.style.display="none"})}function showEl(e){e.style.display="block"}function hideEl(e){e.style.display="none"}function toggleEl(e){"none"===e.style.display||"none"===window.getComputedStyle(e,null).getPropertyValue("display")?e.style.display="block":e.style.display="none"}function returnCheckedRadio(e){return Array.prototype.slice.call(e).find(function(e){return!0===e.checked})}$(function(){let e=window.Laravel.lang;$(".header-dropdown__title").click(function(){let e=$(this).closest(".header-dropdown");e.hasClass("opened")?e.removeClass("opened"):($(".header-dropdown.opened").removeClass("opened"),e.addClass("opened"))}),$(document).click(function(e){$(e.target).closest(".header-dropdown").length||$(".header-dropdown").hasClass("opened")&&$(".header-dropdown").removeClass("opened")}),$(".mob-overlay-btn").click(function(){let e=$(this).data("target");$("#"+e).addClass("opened"),bodyUnscrollable()}),$(".mob-overlay__close").click(function(e){e.preventDefault(),$(this).closest(".mob-overlay").removeClass("opened"),bodyScrollable()}),$("[data-fancybox]").click(function(e){if("#"===$(this).attr("href").charAt(0)){e.preventDefault();let t=$(this).attr("href"),a=$(this).data("options");$.fancybox.getInstance()?($.fancybox.getInstance("close"),setTimeout(function(){$.fancybox.open({src:t,touch:!1,...a})},380)):$.fancybox.open({src:t,touch:!1,...a})}}),$(".tabs-links a").click(function(){let e=$(this).parent(),t=$(this).closest(".tabs"),a=t.find(".tabs-contents>div").eq(e.index());if(t.find(".tabs-contents>div.active").removeClass("active"),a.addClass("active"),e.addClass("active").siblings(".active").removeClass("active"),$(window).width()<1025){let e=$(this).closest(".mobile-dropdown"),t=$(".mobile-dropdown__title",e);e.removeClass("opened"),t.hasClass("dynamic")&&t.html($(this).html())}}),document.querySelectorAll(".dropzone-multiple").forEach(function(e){let t=e.dataset.url,a=Number(e.dataset.maxfiles),n=Number(e.dataset.maxsize),l=e.dataset.required,i=e.dataset.acceptedfiles;new CustomDropzone(e,t,a,n,i,"image/*"===i,l)}),document.querySelectorAll(".dropzone-avatar").forEach(function(e){let t="#"+e.id,a=e.dataset.url,n=Number(e.dataset.maxsize),l=e.dataset.acceptedfiles;new AvatarDropzone(t,a,n,l)}),$(".mobile-dropdown__title").click(function(){let e=$(this).closest(".mobile-dropdown");e.hasClass("opened")?e.removeClass("opened"):($(".mobile-dropdown.opened").removeClass("opened"),e.addClass("opened"))}),$(document).click(function(e){$(e.target).closest(".mobile-dropdown").length||$(".mobile-dropdown").hasClass("opened")&&$(".mobile-dropdown").removeClass("opened")}),document.querySelectorAll(".single-range-slider").forEach(function(e){let t=e.parentElement,a=Number(e.min),n=Number(e.max),l=Number(e.step),i=Number(e.value),o=e.dataset.decimals?Number(e.dataset.decimals):0;noUiSlider.create(t,{start:i,connect:"lower",tooltips:!0,step:l,range:{min:a,max:n},format:{to:function(e){return Number(e).toFixed(o)},from:function(e){return Number(e).toFixed(o)}}}),t.noUiSlider.on("change",function(){e.value=t.noUiSlider.get(),e.dispatchEvent(changeEvent)})}),document.querySelectorAll("[data-duplicate]").forEach(function(e){let t=document.querySelector("#"+e.dataset.duplicate),a=e.closest(".pull-up").previousElementSibling;if(!t)return;let n=t.cloneNode(!0);n.value="",e.addEventListener("click",function(t){t.preventDefault();let l=n.cloneNode(!0);l.removeAttribute("required"),l.removeAttribute("disabled"),l.removeAttribute("id");let i=document.createElement("div");i.className="btn-icon small icon-close";let o=document.createElement("div");o.className="form-group",o.innerHTML='<div class="input-addon">\n\n                                <div class="addon"></div>\n                            </div>\n      ';let r=o.querySelector(".addon");if(r.before(l),r.append(i),i.addEventListener("click",function(){o.remove(),e.style.display="inline-flex"}),a.append(o),l.classList.contains("selectize-regular")&&(l.hasAttribute("multiple")?$(`[name="${l.name}"]`).selectize(selectizeMultipleOptions):$(`[name="${l.name}"]`).selectize(selectizeSingleOptions)),l.hasAttribute("data-method")){new ajaxSelect($(`[name="${l.name}"]`).not(".selectized")).clear()}e.dataset.maxcount&&a.children.length>=e.dataset.maxcount&&hideEl(e)})}),selectizeRegularInit(),document.querySelector(".tinymce-here")&&TinyMceInit(".tinymce-here"),document.querySelector(".tinymce-text-here")&&TinyMceInit(".tinymce-text-here",!0),$(".custom-datepicker").each(function(){let t=$(this).datepicker({language:e,autoClose:!0});$(this).val()&&t.data("datepicker").selectDate(moment($(this).val(),"DD.MM.YYYY").toDate())}),document.querySelectorAll("[data-toggle]").forEach(function(e){let t=e.dataset.toggle.split(",");e.addEventListener("change",function(e){t.forEach(function(e){toggleEl(document.querySelector("#"+e)),document.querySelector("#"+e).querySelectorAll("[required]").forEach(function(e){e.toggleAttribute("disabled")})})})}),document.querySelectorAll(".topic.spoiler").forEach(function(e){e.querySelector(".topic__header").addEventListener("click",function(){e.classList.toggle("collapsed")})}),document.querySelectorAll(".removable-items").forEach(function(e){htmlCollectionToArray(e.children).forEach(function(e){let t=e.querySelector(".icon-close");t&&t.addEventListener("click",function(){e.remove()})})}),document.querySelectorAll(".dz-stored").forEach(function(e){let t=e.querySelector(".link.red"),a=e.querySelector(".link.green"),n=e.querySelector("input");t.addEventListener("click",function(){n.setAttribute("disabled","disabled"),hideEl(t),showEl(a),checkRequiredDropzone($(e).parent().parent())}),a.addEventListener("click",function(){n.removeAttribute("disabled"),hideEl(a),showEl(t),checkRequiredDropzone($(e).parent().parent())})}),document.querySelectorAll(".accordion").forEach(function(e){let t=e.closest(".accordion-group"),a=!t.classList.contains("independent"),n=e.querySelector(".accordion__header"),l=n.nextElementSibling;n.addEventListener("click",function(){if(a&&!e.classList.contains("active")&&t.querySelector(".accordion.active")){let a=t.querySelector(".accordion.active"),n=a.querySelector(".accordion__header").nextElementSibling;a.classList.remove("active"),n.style.maxHeight=null,n.style.opacity=0,e.classList.add("active"),l.style.maxHeight=l.scrollHeight+"px",l.style.opacity=1}else e.classList.toggle("active"),l.style.maxHeight?(l.style.maxHeight=null,l.style.opacity=0):(l.style.maxHeight=l.scrollHeight+"px",l.style.opacity=1)})}),document.querySelectorAll(".extendable").forEach(function(e){let t=e.nextElementSibling,a=t.title,n=t.dataset.alternativetitle,l=t.dataset.maxheight;e.offsetHeight>Number(l)&&(showEl(t),e.style.maxHeight=l+"px",e.classList.add("extended"),t.addEventListener("click",function(l){l.preventDefault(),e.classList.contains("opened")?(t.innerHTML=a,t.title=a,e.classList.remove("opened")):(t.innerHTML=n,t.title=n,e.classList.add("opened"))}))}),document.querySelectorAll("[data-enable]").forEach(function(e){e.addEventListener("change",function(){let t=document.querySelector(e.dataset.enable);e.checked?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled")})}),window.innerWidth<1024&&document.querySelectorAll("[data-toggle-title]").forEach(function(e){let t=document.createElement("div");t.className="toggle-link",t.innerHTML=e.getAttribute("data-toggle-title"),t.addEventListener("click",function(){toggleEl(e)}),e.before(t)}),$.bvi({bvi_target:".bvi-open",bvi_theme:"white",bvi_font:"arial",bvi_font_size:16,bvi_letter_spacing:"normal",bvi_line_height:"normal",bvi_images:!0,bvi_reload:!1,bvi_fixed:!1,bvi_tts:!1,bvi_flash_iframe:!0,bvi_hide:!1}),$(".plain-text table").each(function(){$(this).wrap('<div class="scroll-x"><div class="scroll-x__inner"></div></div>')}),document.querySelector(".notifications [data-unread]")&&document.querySelector(".notifications [data-unread]").addEventListener("click",function(e){let t=e.target,a=t.closest(".notifications"),n=new DataService,l=[];t.classList.contains("updated")||(a.querySelectorAll("[data-id]").forEach(function(e){l.push(Number(e.dataset.id))}),n.updateUnreadMessages(l).then(function(e){t.dataset.unread=e,t.classList.add("updated")}).catch(function(e){console.log(`Error ${e}`)}))})}),$(window).scroll(function(){$(window).scrollTop()>$(".main-wrapper").offset().top?$(".header").addClass("fixed"):$(".header").removeClass("fixed")});let AvatarDropzone=function(e,t,a,n){const l=document.querySelector(e),i=window.Laravel.lang,o=document.querySelector(e).querySelector(".previews-container"),r=l.querySelector(".avatar-preview").dataset.defaultsrc,c=l.querySelector(".avatar-preview-template"),s=l.querySelector(".avatar-preview"),d=l.querySelector(".avatar-pick"),u=l.querySelector(".avatar-path");let p=null;"ru"===i?p=dropzoneRU:"kk"===i&&(p=dropzoneKK);let m=new Dropzone(e,{url:t,previewTemplate:c.innerHTML,maxFilesize:a,acceptedFiles:n,timeout:18e4,lastFile:null,previewsContainer:o,clickable:[d,s],init:function(){this.on("success",function(e,t){s.src=e.dataURL,u.value=t.location}),this.on("removedfile",function(){s.src=r,u.value=""}),this.on("addedfile",function(e){this.lastFile&&this.removeFile(this.lastFile),this.lastFile=e})},...p});if(""!==o.innerHTML){let e=o.querySelector(".dz-preview"),t=e.querySelector(".dz-filename")?e.querySelector(".dz-filename").textContent:"",a=e.querySelector(".dz-size strong")?e.querySelector(".dz-size strong").textContent:"",n={name:t,size:1e3*Number(a)};o.innerHTML="",m.displayExistingFile(n,u.value)}},CustomDropzone=function(e,t,a,n,l,i=!1,o=!1){const r=e.querySelector(".previews-container"),c=e.querySelector(".dropzone-default__link"),s=e.querySelector("input"),d=window.Laravel.lang;let u=[],p=null,m="Remove";"ru"===d?(p=dropzoneRU,m="Удалить"):"kk"===d&&(p=dropzoneKK,m="Жою");let f=new Dropzone(e,{url:t,paramName:"files[]",clickable:c,maxFiles:a,maxFilesize:n,required:o,acceptedFiles:l,thumbnailHeight:null,previewsContainer:r,previewTemplate:`<div class="dz-preview dz-file-preview">\n                            <div class="dz-details">\n                                ${i?"<img data-dz-thumbnail />":""}\n                                <div class="dz-filename"><span data-dz-name></span></div>\n                                <div class="dz-size" data-dz-size></div>\n                                <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n                            </div>\n                            <div class="alert alert-danger"><span data-dz-errormessage> </span></div>\n                            <a href="javascript:undefined;" title="${m}" class="link red" data-dz-remove>${m}</a>\n                        </div>`,init:function(){this.on("success",(t,n)=>{u.push(String(n.filenames)),s.value=1===a?u:JSON.stringify(u),o&&checkRequiredDropzone(e)}),this.on("removedfile",t=>{if(t.xhr){let a=String(JSON.parse(t.xhr.response).filenames);u=u.filter(function(t){return o&&checkRequiredDropzone(e),t!==a})}s.value=1===a?u:JSON.stringify(u),o&&checkRequiredDropzone(e)})},...p});if(o&&checkRequiredDropzone(e),1===a&&""!==r.innerHTML){let e=r.querySelector(".dz-preview"),t=e.querySelector(".dz-filename")?e.querySelector(".dz-filename").textContent:"",a=e.querySelector(".dz-size strong")?e.querySelector(".dz-size strong").textContent:"",n={name:t,size:1e3*Number(a)};r.innerHTML="",f.displayExistingFile(n,s.value)}};function checkRequiredDropzone(e){let t=$(e).find('.link.red:not([style="display: none;"])').length;$(e).find("input.req")[0].value=t>0?1:""}function TinyMceInit(e,t=!1){let a,n,l,i,o,r=window.Laravel.lang,c="",s="/ajax_upload_lesson_another_file?_token="+window.Laravel.csrfToken,d="",u={en:{uploadTitle:"File upload",cancel:"Cancel",fail:"Failed to load file"},kk:{uploadTitle:"Файл жүктеу",cancel:"Жою",fail:"Файл жүктелмеді"},ru:{uploadTitle:"Загрузка файла",cancel:"Отмена",fail:"Не удалось загрузить файл"}},p=`<div class="text-center">\n                                    <h4 class="title-primary">${u[r].uploadTitle}</h4>\n                                    <div class="progress-bar"><span></span></div>\n                                    <div class="plain-text gray"></div>\n                                    <a href="javascript:;" title="Отмена" class="btn">${u[r].cancel}</a>\n                                </div>`;function m(e,t=null){a.click(),a.onchange=function(){let d=new FormData,p=a.files[0];d.append("file",p);let m=$.ajax({xhr:function(){let e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){let t=e.loaded/e.total*100;l.style.width=t+"%"}},!1),e},url:c+s,type:"POST",processData:!1,contentType:!1,data:d,beforeSend:function(){o.style.display="none",l.style.width=0,i.addEventListener("click",f),$.fancybox.open({src:"#"+n.id,touch:!1,smallBtn:!1,buttons:[],clickSlide:!1,clickOutside:!1})},error:function(e){console.log(e),a.value="",l.style.width=0,o.style.display="block",o.innerHTML=u[r].fail},success:function(n){switch(t){case"video":e(c+n.location,{width:"100%",height:"auto"});break;case"image":default:e(c+n.location,{})}a.value="",parent.jQuery.fancybox.getInstance().close(),i.removeEventListener("click",f)}});function f(){m.abort(),a.value="",$.fancybox.close(),l.style.width=0,i.removeEventListener("click",f)}}}t||(d="image media"),document.querySelector("#filePicker")?a=document.querySelector("#filePicker"):((a=document.createElement("input")).type="file",a.id="filePicker",a.style.cssText="position: fixed; top: -9999px; left: -9999px; z-index: -1",document.querySelector("body").append(a)),document.querySelector("#progressModal")?n=document.querySelector("#progressModal"):((n=document.createElement("div")).id="progressModal",n.innerHTML=p,n.style.display="none",document.querySelector("body").append(n)),l=n.querySelector(".progress-bar span"),i=n.querySelector(".btn"),(o=n.querySelector(".plain-text")).style.display="none",tinymce.init({selector:e,menubar:!1,plugins:["lists link "+d+" table paste code wordcount"],toolbar:"undo redo | formatselect | bold italic link "+d+" | alignleft aligncenter alignright alignjustify | bullist numlist | removeformat | help",images_upload_url:s,files_upload_url:s,file_picker_types:"file image media",invalid_elements:"table,tr,td",relative_urls:!1,language:r,file_picker_callback:function(e,t,n){"file"===n.filetype&&(a.accept=".pdf, .doc, .xls, .ppt, .docx, .xlsx, .pptx, .png, .jpg, .rar, .zip, .7z, .mp3, .mp4, .avi, .mov",m(e)),"image"===n.filetype&&(a.accept=".png, .jpg, .jpeg, .gif",m(e,"image")),"media"===n.filetype&&(a.accept=".mp4, .avi, .mov",m(e,"video"))},setup:function(e){e.on("change",function(){e.save()}),e.on("Undo",function(){e.save()}),e.on("Redo",function(){e.save()})}})}const selectizeSingleOptions={allowEmptyOption:!0,onChange:function(){this.$input[0].dispatchEvent(changeEvent)}},selectizeMultipleOptions={allowEmptyOption:!0,plugins:["remove_button","silent_remove","stop_backspace_delete"],onChange:function(){this.$input[0].attributes.placeholder&&(this.$control_input[0].placeholder=this.$input[0].attributes.placeholder.value),this.$input[0].dispatchEvent(changeEvent)}};function selectizeRegularInit(){$(".selectize-regular:not([multiple]):not(.selectized)").selectize(selectizeSingleOptions),$(".selectize-regular[multiple]:not(.selectized)").selectize(selectizeMultipleOptions)}$.fn.datepicker.language.en={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii aa",firstDay:0},$.fn.datepicker.language.kk={days:["Жексенбі","Дүйсенбі","Сейсенбі","Сәрсенбі","Бейсенбі","Жұма","Сенбі"],daysShort:["Жек","Дүй","Сей","Сәр","Бей","Жұм","Сен"],daysMin:["Же","Дү","Се","Сә","Бе","Жұ","Се"],months:["Қаңтар","Ақпан","Наурыз","Сәуір","Мамыр","Маусым","Шілде","Тамыз","Қыркүйек","Қазан","Қараша","Желтоқсан"],monthsShort:["Қаң","Ақп","Нау","Сәу","Мам","Мау","Шіл","Там","Қыр","Қаз","Қар","Жел"],today:"Бүгін",clear:"Тазалау",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii aa",firstDay:0},$.fn.datepicker.language.ru={days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii aa",firstDay:0};
