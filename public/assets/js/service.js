const DataService = function () {
    function b(a) {
        return {
            id: a.id,
            name: a.name,
            order: a.order,
            lessons: 0 === a.lessons.length ? null : a.lessons,
            collapsed: !1
        }
    }

    let c = window.Laravel.lang, d = "", e = window.Laravel.csrfToken;
    this.getCourseData = async function (c) {
        let a = await this.getResource("GET", window.Laravel.lang+"/getCourseData/" + c, "", !1);
        return JSON.parse(a.response).map(b)
    }, this.addTopic = async function (c, a) {
        let b = await this.getResource("POST", "create-theme", "course_id=" + c + "&name=" + a + "", !1);
        return {id: parseInt(b.response), name: a}
    }, this.editTopic = async function (b, a, d) {
        let c = await this.getResource("POST", "edit-theme", "theme_id=" + a + "&theme_name=" + d + "", !1),
            e = JSON.parse(c.response);
        return {msgTitle: e.title, msgText: e.body}
    }, this.removeTopic = async function (b, a) {
        let c = await this.getResource("DELETE", "delete-theme", "theme_id=" + a + "&course_id=" + b + "", !0),
            d = JSON.parse(c.response);
        return {msgTitle: d.title, msgText: d.body}
    }, this.removeLesson = async function (b, a, c) {
        let d = await this.getResource("DELETE", "delete-lesson", "lesson_id=" + c + "&theme_id=" + a + "", !0),
            e = JSON.parse(d.response);
        return {msgTitle: e.title, msgText: e.body}
    }, this.swapTopicsOrders = async function (b, a, c) {
        this.getResource("POST", "move-theme", "theme_1_id=" + a + "&theme_2_id=" + c + "", !0)
    }, this.swapLessonsOrders = async function (c, a, b, d) {
        this.getResource("POST", "move-lesson", "lesson_1_id=" + b + "&lesson_2_id=" + d + "", !0)
    }, this.getResource = async function (a, b, c, f) {
        let g = await new Promise(function (g) {
            let h = new XMLHttpRequest;
            h.open(a, `${d}/${b}`, f), h.setRequestHeader("Content-type", "application/x-www-form-urlencoded"), h.setRequestHeader("X-CSRF-TOKEN", e), h.onload = function () {
                g(h)
            }, h.onerror = function () {
                g(void 0)
            }, h.send(c)
        });
        if (200 !== g.status) throw new Error(`Error. Received status ${g.status}`);
        return await g
    }, this.updateUnreadMessages = async function (a) {
        let b = new Promise(function (b, f) {
            let g = new XMLHttpRequest;
            g.open("POST", `${d}/${c}/markAsReadNotifications`), g.setRequestHeader("Content-type", "application/json; charset=UTF-8"), g.setRequestHeader("X-CSRF-TOKEN", e), g.onload = function () {
                200 === g.status ? b(g.response) : f(g.status)
            }, g.onerror = function () {
                console.log("Request error")
            }, g.send(JSON.stringify({data: a}))
        });
        return await b
    }
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2UuanMiXSwibmFtZXMiOlsiRGF0YVNlcnZpY2UiLCJ0cmFuc2Zvcm1Ub3BpYyIsInRvcGljIiwiaWQiLCJuYW1lIiwib3JkZXIiLCJsZXNzb25zIiwibGVuZ3RoIiwiY29sbGFwc2VkIiwibGFuZyIsIndpbmRvdyIsIkxhcmF2ZWwiLCJkb21haW5OYW1lIiwidG9rZW4iLCJjc3JmVG9rZW4iLCJnZXRDb3Vyc2VEYXRhIiwiYSIsInhoclJlcyIsImdldFJlc291cmNlIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2UiLCJtYXAiLCJhZGRUb3BpYyIsImIiLCJwYXJzZUludCIsImVkaXRUb3BpYyIsIkgiLCJjIiwidHJhbnNmb3JtZWRSZXMiLCJtc2dUaXRsZSIsInRpdGxlIiwibXNnVGV4dCIsImJvZHkiLCJyZW1vdmVUb3BpYyIsIkciLCJyZW1vdmVMZXNzb24iLCJJIiwic3dhcFRvcGljc09yZGVycyIsImUiLCJnIiwic3dhcExlc3NvbnNPcmRlcnMiLCJoIiwiaSIsInR5cGUiLCJtZXRob2QiLCJhc3luYyIsIlByb21pc2UiLCJyZXNvbHZlIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ubG9hZCIsIm9uZXJyb3IiLCJzZW5kIiwic3RhdHVzIiwiRXJyb3IiLCJ1cGRhdGVVbnJlYWRNZXNzYWdlcyIsImlkcyIsInJlamVjdCIsImNvbnNvbGUiLCJsb2ciLCJzdHJpbmdpZnkiLCJkYXRhIl0sIm1hcHBpbmdzIjoiQUFBQSxLQUFNQSxDQUFBQSxXQUFXLENBQUcsVUFBWSxDQTZHNUIsUUFBU0MsQ0FBQUEsQ0FBVCxDQUF3QkMsQ0FBeEIsQ0FBK0IsQ0FDM0IsTUFBTyxDQUNIQyxFQUFFLENBQUVELENBQUssQ0FBQ0MsRUFEUCxDQUVIQyxJQUFJLENBQUVGLENBQUssQ0FBQ0UsSUFGVCxDQUdIQyxLQUFLLENBQUVILENBQUssQ0FBQ0csS0FIVixDQUlIQyxPQUFPLENBQTJCLENBQXpCLEdBQUFKLENB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ImNvbnN0IERhdGFTZXJ2aWNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IGxhbmcgPSB3aW5kb3cuTGFyYXZlbC5sYW5nLFxyXG4gICAgICAgIC8vIGRvbWFpbk5hbWUgPSAnaHR0cHM6Ly9kZXYzLnBhbmFtYS5reicsXHJcbiAgICAgICAgZG9tYWluTmFtZSA9ICcnLFxyXG4gICAgICAgIHRva2VuID0gd2luZG93LkxhcmF2ZWwuY3NyZlRva2VuO1xyXG5cclxuICAgIHRoaXMuZ2V0Q291cnNlRGF0YSA9IGFzeW5jIGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgbGV0IHhoclJlcyA9IGF3YWl0IHRoaXMuZ2V0UmVzb3VyY2UoXCJHRVRcIiwgJ2dldENvdXJzZURhdGEvJyArIGEsICcnLCBmYWxzZSk7XHJcblxyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHhoclJlcy5yZXNwb25zZSkubWFwKHRyYW5zZm9ybVRvcGljKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5hZGRUb3BpYyA9IGFzeW5jIGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgbGV0IHhoclJlcyA9IGF3YWl0IHRoaXMuZ2V0UmVzb3VyY2UoXCJQT1NUXCIsICdjcmVhdGUtdGhlbWUnLCAnY291cnNlX2lkPScgKyBhICsgJyZuYW1lPScgKyBiICsgJycsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWQ6IHBhcnNlSW50KHhoclJlcy5yZXNwb25zZSksXHJcbiAgICAgICAgICAgIG5hbWU6IGJcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZWRpdFRvcGljID0gYXN5bmMgZnVuY3Rpb24gKGEsIEgsIGMpIHtcclxuICAgICAgICBsZXQgeGhyUmVzID0gYXdhaXQgdGhpcy5nZXRSZXNvdXJjZSgnUE9TVCcsICdlZGl0LXRoZW1lJywgJ3RoZW1lX2lkPScgKyBIICsgJyZ0aGVtZV9uYW1lPScgKyBjICsgJycsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgbGV0IHRyYW5zZm9ybWVkUmVzID0gSlNPTi5wYXJzZSh4aHJSZXMucmVzcG9uc2UpO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtc2dUaXRsZTogdHJhbnNmb3JtZWRSZXMudGl0bGUsXHJcbiAgICAgICAgICAgIG1zZ1RleHQ6IHRyYW5zZm9ybWVkUmVzLmJvZHlcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucmVtb3ZlVG9waWMgPSBhc3luYyBmdW5jdGlvbiAoYSwgRykge1xyXG4gICAgICAgIGxldCB4aHJSZXMgPSBhd2FpdCB0aGlzLmdldFJlc291cmNlKCdERUxFVEUnLCAnZGVsZXRlLXRoZW1lJywgJ3RoZW1lX2lkPScgKyBHICsgJyZjb3Vyc2VfaWQ9JyArIGEgKyAnJywgdHJ1ZSk7XHJcblxyXG4gICAgICAgIGxldCB0cmFuc2Zvcm1lZFJlcyA9IEpTT04ucGFyc2UoeGhyUmVzLnJlc3BvbnNlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbXNnVGl0bGU6IHRyYW5zZm9ybWVkUmVzLnRpdGxlLFxyXG4gICAgICAgICAgICBtc2dUZXh0OiB0cmFuc2Zvcm1lZFJlcy5ib2R5XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnJlbW92ZUxlc3NvbiA9IGFzeW5jIGZ1bmN0aW9uIChhLCBHLCBJKSB7XHJcbiAgICAgICAgbGV0IHhoclJlcyA9IGF3YWl0IHRoaXMuZ2V0UmVzb3VyY2UoJ0RFTEVURScsICdkZWxldGUtbGVzc29uJywgJ2xlc3Nvbl9pZD0nICsgSSArICcmdGhlbWVfaWQ9JyArIEcgKyAnJywgdHJ1ZSk7XHJcblxyXG4gICAgICAgIGxldCB0cmFuc2Zvcm1lZFJlcyA9IEpTT04ucGFyc2UoeGhyUmVzLnJlc3BvbnNlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbXNnVGl0bGU6IHRyYW5zZm9ybWVkUmVzLnRpdGxlLFxyXG4gICAgICAgICAgICBtc2dUZXh0OiB0cmFuc2Zvcm1lZFJlcy5ib2R5XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnN3YXBUb3BpY3NPcmRlcnMgPSBhc3luYyBmdW5jdGlvbiAoYSwgZSwgZykge1xyXG4gICAgICAgIGxldCB4aHJSZXMgPSB0aGlzLmdldFJlc291cmNlKCdQT1NUJywgJ21vdmUtdGhlbWUnLCAndGhlbWVfMV9pZD0nICsgZSArICcmdGhlbWVfMl9pZD0nICsgZyArICcnLCB0cnVlKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zd2FwTGVzc29uc09yZGVycyA9IGFzeW5jIGZ1bmN0aW9uIChhLCBiLCBoLCBpKSB7XHJcbiAgICAgICAgbGV0IHhoclJlcyA9IHRoaXMuZ2V0UmVzb3VyY2UoJ1BPU1QnLCAnbW92ZS1sZXNzb24nLCAnbGVzc29uXzFfaWQ9JyArIGggKyAnJmxlc3Nvbl8yX2lkPScgKyBpICsgJycsIHRydWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldFJlc291cmNlID0gYXN5bmMgZnVuY3Rpb24gKHR5cGUsIG1ldGhvZCwgYm9keSwgYXN5bmMpIHtcclxuICAgICAgICBsZXQgeGhyUmVzID0gYXdhaXQgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIub3Blbih0eXBlLCBgJHtkb21haW5OYW1lfS8ke21ldGhvZH1gLCBhc3luYyk7XHJcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyk7XHJcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLUNTUkYtVE9LRU4nLCB0b2tlbik7XHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUodW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgeGhyLnNlbmQoYm9keSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh4aHJSZXMuc3RhdHVzICE9PSAyMDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvci4gUmVjZWl2ZWQgc3RhdHVzICR7eGhyUmVzLnN0YXR1c31gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCB4aHJSZXM7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudXBkYXRlVW5yZWFkTWVzc2FnZXMgPSBhc3luYyBmdW5jdGlvbiAoaWRzKSB7XHJcbiAgICAgICAgbGV0IHhoclJlcyA9IG5ldyBQcm9taXNlIChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGxldCB1cmwgPSBgJHtkb21haW5OYW1lfS8ke2xhbmd9L21hcmtBc1JlYWROb3RpZmljYXRpb25zYDtcclxuICAgICAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIub3BlbignUE9TVCcsIHVybCk7XHJcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04Jyk7XHJcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLUNTUkYtVE9LRU4nLCB0b2tlbik7XHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyAhPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHhoci5zdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHhoci5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZXF1ZXN0IGVycm9yJyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeSh7ZGF0YTogaWRzfSkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gYXdhaXQgeGhyUmVzO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiB0cmFuc2Zvcm1Ub3BpYyh0b3BpYykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlkOiB0b3BpYy5pZCxcclxuICAgICAgICAgICAgbmFtZTogdG9waWMubmFtZSxcclxuICAgICAgICAgICAgb3JkZXI6IHRvcGljLm9yZGVyLFxyXG4gICAgICAgICAgICBsZXNzb25zOiB0b3BpYy5sZXNzb25zLmxlbmd0aCA9PT0gMCA/IG51bGwgOiB0b3BpYy5sZXNzb25zLFxyXG4gICAgICAgICAgICBjb2xsYXBzZWQ6IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59OyJdLCJmaWxlIjoic2VydmljZS5qcyJ9
