const DataService=function(){function a(a){return"theme"===a.item_type?{id:a.id,name:a.name,order:a.order,lessons:0===a.lessons.length?null:a.lessons,collapsed:!1,itemType:a.item_type}:{id:a.id,name:a.name,order:a.order,collapsed:!1,itemType:a.item_type,duration:a.duration,type:a.type}}let b=window.Laravel.lang,c="",d=window.Laravel.csrfToken;this.getCourseData=async function(c){let d=await this.getResource("GET",b+"/getCourseDataTest/"+c,"",!0);return JSON.parse(d.response).map(a)},this.addTopic=async function(a,b){let c=await this.getResource("POST","create-theme","course_id="+a+"&name="+b+"",!0);return console.log(c),{id:parseInt(c.response),name:b}},this.editTopic=async function(a,b){let c=await this.getResource("POST","edit-theme","theme_id="+a+"&theme_name="+b+"",!0),d=JSON.parse(c.response);return{msgTitle:d.title,msgText:d.body}},this.removeTopic=async function(a){let b=await this.getResource("DELETE","delete-theme","theme_id="+a+"",!0),c=JSON.parse(b.response);return{msgTitle:c.title,msgText:c.body}},this.removeLesson=async function(a,b){let c=await this.getResource("DELETE","delete-lesson","lesson_id="+b+"&theme_id="+a+"",!0),d=JSON.parse(c.response);return{msgTitle:d.title,msgText:d.body}},this.swapItems=async function(a,b,c,d){this.getResource("POST","move-item","item_1_id="+a+"&item_1_type="+b+"&item_2_id="+c+"&item_2_type="+d+"",!0)},this.swapLessonsOrders=async function(a,b){this.getResource("POST","move-lesson","lesson_1_id="+a+"&lesson_2_id="+b+"",!0)},this.getResource=async function(a,b,e,f){let g=await new Promise(function(g){let h=new XMLHttpRequest;h.open(a,`${c}/${b}`,f),h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.setRequestHeader("X-CSRF-TOKEN",d),h.onload=function(){g(h)},h.onerror=function(){g(void 0)},h.send(e)});if(200!==g.status)throw new Error(`Error. Received status ${g.status}`);return await g},this.updateUnreadMessages=async function(a){let e=new Promise(function(e,f){let g=new XMLHttpRequest;g.open("POST",`${c}/${b}/markAsReadNotifications`),g.setRequestHeader("Content-type","application/json; charset=UTF-8"),g.setRequestHeader("X-CSRF-TOKEN",d),g.onload=function(){200===g.status?e(g.response):f(g.status)},g.onerror=function(){console.log("Request error")},g.send(JSON.stringify({data:a}))});return await e}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2UuanMiXSwibmFtZXMiOlsiRGF0YVNlcnZpY2UiLCJ0cmFuc2Zvcm1JdGVtIiwiaXRlbSIsIml0ZW1fdHlwZSIsImlkIiwibmFtZSIsIm9yZGVyIiwibGVzc29ucyIsImxlbmd0aCIsImNvbGxhcHNlZCIsIml0ZW1UeXBlIiwiZHVyYXRpb24iLCJ0eXBlIiwibGFuZyIsIndpbmRvdyIsIkxhcmF2ZWwiLCJkb21haW5OYW1lIiwidG9rZW4iLCJjc3JmVG9rZW4iLCJnZXRDb3Vyc2VEYXRhIiwiY291cnNlSWQiLCJ4aHJSZXMiLCJnZXRSZXNvdXJjZSIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlIiwibWFwIiwiYWRkVG9waWMiLCJ0aGVtZU5hbWUiLCJjb25zb2xlIiwibG9nIiwicGFyc2VJbnQiLCJlZGl0VG9waWMiLCJ0aGVtZUlkIiwidHJhbnNmb3JtZWRSZXMiLCJtc2dUaXRsZSIsInRpdGxlIiwibXNnVGV4dCIsImJvZHkiLCJyZW1vdmVUb3BpYyIsInJlbW92ZUxlc3NvbiIsImxlc3NvbklkIiwic3dhcEl0ZW1zIiwiaWQxIiwidHlwZTEiLCJpZDIiLCJ0eXBlMiIsInN3YXBMZXNzb25zT3JkZXJzIiwibWV0aG9kIiwiYXN5bmMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJvbmxvYWQiLCJvbmVycm9yIiwic2VuZCIsInN0YXR1cyIsIkVycm9yIiwidXBkYXRlVW5yZWFkTWVzc2FnZXMiLCJpZHMiLCJyZWplY3QiLCJzdHJpbmdpZnkiLCJkYXRhIl0sIm1hcHBpbmdzIjoiQUFBQSxLQUFNQSxDQUFBQSxXQUFXLENBQUcsVUFBWSxDQStHNUIsUUFBU0MsQ0FBQUEsQ0FBVCxDQUF1QkMsQ0FBdkIsQ0FBNkIsT0FDRixPQUFuQixHQUFBQSxDQUFJLENBQUNDLFNBRGdCLENBRWQsQ0FDSEMsRUFBRSxDQUFFRixDQUFJLENBQUNFLEVBRE4sQ0FFSEMsSUFBSSxDQUFFSCxDQUFJLENBQUNHLElBRlIsQ0FHSEMsS0FBSyxDQUFFSixDQUFJLENBQUNJLEtBSFQsQ0FJSEMsT0FBTyxDQUEwQixDQUF4QixHQUFBTCxDQUFJLENBQUNLLE9BQUwsQ0FBYUMsTUFBYixDQUE0QixJQUE1QixDQUFtQ04sQ0FBSSxDQUFDSyxPQUo5QyxDQUtIRSxTQUFTLEdBTE4sQ0FNSEMsUUFBUSxDQUFFUixDQUFJLENBQUNDLFNBTlosQ0FGYyxDQVdkLENBQ0hDLEVBQUUsQ0FBRUYsQ0FBSSxDQUFDRSxFQUROLENBRUhDLElBQUksQ0FBRUgsQ0FBSSxDQUFDRyxJQUZSLENBR0hDLEtBQUssQ0FBRUosQ0FBSSxDQUFDSSxLQUhULENBSUhHLFNBQVMsR0FKTixDQUtIQyxRQUFRLENBQUVSLENBQUksQ0FBQ0MsU0FMWixDQU1IUSxRQUFRLENBQUVULENBQUksQ0FBQ1MsUUFOWixDQU9IQyxJQUFJLENBQUVWLENBQUksQ0FBQ1UsSUFQUixDQVVkLENBbklELEdBQUlDLENBQUFBLENBQUksQ0FBR0MsTUFBTSxDQUFDQyxPQUFQLENBQWVGLElBQTFCLENBRUlHLENBQVUsQ0FBRyxFQUZqQixDQUdJQyxDQUFLLENBQUdILE1BQU0sQ0FBQ0MsT0FBUCxDQUFlRyxTQUgzQixDQUtBLEtBQUtDLGFBQUwsQ0FBcUIsZUFBZ0JDLENBQWhCLENBQTBCLENBQzNDLEdBQUlDLENBQUFBLENBQU0sQ0FBRyxLQUFNLE1BQUtDLFdBQUwsQ0FBaUIsS0FBakIsQ0FBd0JULENBQUksQ0FBRyxxQkFBUCxDQUErQk8sQ0FBdkQsQ0FBaUUsRUFBakUsSUFBbkIsQ0FFQSxNQUFPRyxDQUFBQSxJQUFJLENBQUNDLEtBQUwsQ0FBV0gsQ0FBTSxDQUFDSSxRQUFsQixFQUE0QkMsR0FBNUIsQ0FBZ0N6QixDQUFoQyxDQUNWLENBVjJCLENBWTVCLEtBQUswQixRQUFMLENBQWdCLGVBQWdCUCxDQUFoQixDQUEwQlEsQ0FBMUIsQ0FBcUMsQ0FDakQsR0FBSVAsQ0FBQUEsQ0FBTSxDQUFHLEtBQU0sTUFBS0MsV0FBTCxDQUFpQixNQUFqQixDQUF5QixjQUF6QixDQUF5QyxhQUFlRixDQUFmLENBQTBCLFFBQTFCLENBQXFDUSxDQUFyQyxDQUFpRCxFQUExRixJQUFuQixDQUlBLE1BRkFDLENBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZVCxDQUFaLENBRUEsQ0FBTyxDQUNIakIsRUFBRSxDQUFFMkIsUUFBUSxDQUFDVixDQUFNLENBQUNJLFFBQVIsQ0FEVCxDQUVIcEIsSUFBSSxDQUFFdUIsQ0FGSCxDQUlWLENBckIyQixDQXVCNUIsS0FBS0ksU0FBTCxDQUFpQixlQUFnQkMsQ0FBaEIsQ0FBeUJMLENBQXpCLENBQW9DLElBQzdDUCxDQUFBQSxDQUFNLENBQUcsS0FBTSxNQUFLQyxXQUFMLENBQWlCLE1BQWpCLENBQXlCLFlBQXpCLENBQXVDLFlBQWNXLENBQWQsQ0FBd0IsY0FBeEIsQ0FBeUNMLENBQXpDLENBQXFELEVBQTVGLElBRDhCLENBRzdDTSxDQUFjLENBQUdYLElBQUksQ0FBQ0MsS0FBTCxDQUFXSCxDQUFNLENBQUNJLFFBQWxCLENBSDRCLENBS2pELE1BQU8sQ0FDSFUsUUFBUSxDQUFFRCxDQUFjLENBQUNFLEtBRHRCLENBRUhDLE9BQU8sQ0FBRUgsQ0FBYyxDQUFDSSxJQUZyQixDQUlWLENBaEMyQixDQWtDNUIsS0FBS0MsV0FBTCxDQUFtQixlQUFnQk4sQ0FBaEIsQ0FBeUIsSUFDcENaLENBQUFBLENBQU0sQ0FBRyxLQUFNLE1BQUtDLFdBQUwsQ0FBaUIsUUFBakIsQ0FBMkIsY0FBM0IsQ0FBMkMsWUFBY1csQ0FBZCxDQUF3QixFQUFuRSxJQURxQixDQUdwQ0MsQ0FBYyxDQUFHWCxJQUFJLENBQUNDLEtBQUwsQ0FBV0gsQ0FBTSxDQUFDSSxRQUFsQixDQUhtQixDQUt4QyxNQUFPLENBQ0hVLFFBQVEsQ0FBRUQsQ0FBYyxDQUFDRSxLQUR0QixDQUVIQyxPQUFPLENBQUVILENBQWMsQ0FBQ0ksSUFGckIsQ0FJVixDQTNDMkIsQ0E2QzVCLEtBQUtFLFlBQUwsQ0FBb0IsZUFBZ0JQLENBQWhCLENBQXlCUSxDQUF6QixDQUFtQyxJQUMvQ3BCLENBQUFBLENBQU0sQ0FBRyxLQUFNLE1BQUtDLFdBQUwsQ0FBaUIsUUFBakIsQ0FBMkIsZUFBM0IsQ0FBNEMsYUFBZW1CLENBQWYsQ0FBMEIsWUFBMUIsQ0FBeUNSLENBQXpDLENBQW1ELEVBQS9GLElBRGdDLENBRy9DQyxDQUFjLENBQUdYLElBQUksQ0FBQ0MsS0FBTCxDQUFXSCxDQUFNLENBQUNJLFFBQWxCLENBSDhCLENBS25ELE1BQU8sQ0FDSFUsUUFBUSxDQUFFRCxDQUFjLENBQUNFLEtBRHRCLENBRUhDLE9BQU8sQ0FBRUgsQ0FBYyxDQUFDSSxJQUZyQixDQUlWLENBdEQyQixDQXdENUIsS0FBS0ksU0FBTCxDQUFpQixlQUFnQkMsQ0FBaEIsQ0FBcUJDLENBQXJCLENBQTRCQyxDQUE1QixDQUFpQ0MsQ0FBakMsQ0FBd0MsQ0FDeEMsS0FBS3hCLFdBQUwsQ0FBaUIsTUFBakIsQ0FBeUIsV0FBekIsQ0FBc0MsYUFBZXFCLENBQWYsQ0FBcUIsZUFBckIsQ0FBdUNDLENBQXZDLENBQStDLGFBQS9DLENBQStEQyxDQUEvRCxDQUFxRSxlQUFyRSxDQUF1RkMsQ0FBdkYsQ0FBK0YsRUFBckksSUFDaEIsQ0ExRDJCLENBNEQ1QixLQUFLQyxpQkFBTCxDQUF5QixlQUFnQkosQ0FBaEIsQ0FBcUJFLENBQXJCLENBQTBCLENBQ2xDLEtBQUt2QixXQUFMLENBQWlCLE1BQWpCLENBQXlCLGFBQXpCLENBQXdDLGVBQWlCcUIsQ0FBakIsQ0FBdUIsZUFBdkIsQ0FBeUNFLENBQXpDLENBQStDLEVBQXZGLElBQ2hCLENBOUQyQixDQWdFNUIsS0FBS3ZCLFdBQUwsQ0FBbUIsZUFBZ0JWLENBQWhCLENBQXNCb0MsQ0FBdEIsQ0FBOEJWLENBQTlCLENBQW9DVyxDQUFwQyxDQUEyQyxDQUMxRCxHQUFJNUIsQ0FBQUEsQ0FBTSxDQUFHLEtBQU0sSUFBSTZCLENBQUFBLE9BQUosQ0FBWSxTQUFVQyxDQUFWLENBQW1CLENBQzlDLEdBQUlDLENBQUFBLENBQUcsQ0FBRyxHQUFJQyxDQUFBQSxjQUFkLENBQ0FELENBQUcsQ0FBQ0UsSUFBSixDQUFTMUMsQ0FBVCxDQUFnQixHQUFFSSxDQUFXLElBQUdnQyxDQUFPLEVBQXZDLENBQTBDQyxDQUExQyxDQUY4QyxDQUc5Q0csQ0FBRyxDQUFDRyxnQkFBSixDQUFxQixjQUFyQixDQUFxQyxtQ0FBckMsQ0FIOEMsQ0FJOUNILENBQUcsQ0FBQ0csZ0JBQUosQ0FBcUIsY0FBckIsQ0FBcUN0QyxDQUFyQyxDQUo4QyxDQUs5Q21DLENBQUcsQ0FBQ0ksTUFBSixDQUFhLFVBQWEsQ0FDdEJMLENBQU8sQ0FBQ0MsQ0FBRCxDQUNWLENBUDZDLENBUTlDQSxDQUFHLENBQUNLLE9BQUosQ0FBYyxVQUFZLENBQ3RCTixDQUFPLFFBQ1YsQ0FWNkMsQ0FXOUNDLENBQUcsQ0FBQ00sSUFBSixDQUFTcEIsQ0FBVCxDQUNILENBWmtCLENBQW5CLENBY0EsR0FBc0IsR0FBbEIsR0FBQWpCLENBQU0sQ0FBQ3NDLE1BQVgsQ0FDSSxLQUFNLElBQUlDLENBQUFBLEtBQUosQ0FBVywwQkFBeUJ2QyxDQUFNLENBQUNzQyxNQUFPLEVBQWxELENBQU4sQ0FHSixNQUFPLE1BQU10QyxDQUFBQSxDQUNoQixDQXBGMkIsQ0FzRjVCLEtBQUt3QyxvQkFBTCxDQUE0QixlQUFnQkMsQ0FBaEIsQ0FBcUIsQ0FDN0MsR0FBSXpDLENBQUFBLENBQU0sQ0FBRyxHQUFJNkIsQ0FBQUEsT0FBSixDQUFhLFNBQVVDLENBQVYsQ0FBbUJZLENBQW5CLENBQTJCLElBRTdDWCxDQUFBQSxDQUFHLENBQUcsR0FBSUMsQ0FBQUEsY0FGbUMsQ0FHakRELENBQUcsQ0FBQ0UsSUFBSixDQUFTLE1BQVQsQ0FGVyxHQUFFdEMsQ0FBVyxJQUFHSCxDQUFLLDBCQUVoQyxDQUhpRCxDQUlqRHVDLENBQUcsQ0FBQ0csZ0JBQUosQ0FBcUIsY0FBckIsQ0FBcUMsaUNBQXJDLENBSmlELENBS2pESCxDQUFHLENBQUNHLGdCQUFKLENBQXFCLGNBQXJCLENBQXFDdEMsQ0FBckMsQ0FMaUQsQ0FNakRtQyxDQUFHLENBQUNJLE1BQUosQ0FBYSxVQUFZLENBQ0YsR0FBZixHQUFBSixDQUFHLENBQUNPLE1BRGEsQ0FJakJSLENBQU8sQ0FBQ0MsQ0FBRyxDQUFDM0IsUUFBTCxDQUpVLENBRWpCc0MsQ0FBTSxDQUFDWCxDQUFHLENBQUNPLE1BQUwsQ0FJYixDQVpnRCxDQWNqRFAsQ0FBRyxDQUFDSyxPQUFKLENBQWMsVUFBWSxDQUN0QjVCLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGVBQVosQ0FDSCxDQWhCZ0QsQ0FrQmpEc0IsQ0FBRyxDQUFDTSxJQUFKLENBQVNuQyxJQUFJLENBQUN5QyxTQUFMLENBQWUsQ0FBQ0MsSUFBSSxDQUFFSCxDQUFQLENBQWYsQ0FBVCxDQUNILENBbkJZLENBQWIsQ0FxQkEsTUFBTyxNQUFNekMsQ0FBQUEsQ0FDaEIsQ0F3QkosQ0FySUQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBEYXRhU2VydmljZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgbGFuZyA9IHdpbmRvdy5MYXJhdmVsLmxhbmcsXG4gICAgICAgIC8vIGRvbWFpbk5hbWUgPSAnaHR0cHM6Ly9kZXYzLnBhbmFtYS5reicsXG4gICAgICAgIGRvbWFpbk5hbWUgPSAnJyxcbiAgICAgICAgdG9rZW4gPSB3aW5kb3cuTGFyYXZlbC5jc3JmVG9rZW47XG5cbiAgICB0aGlzLmdldENvdXJzZURhdGEgPSBhc3luYyBmdW5jdGlvbiAoY291cnNlSWQpIHtcbiAgICAgICAgbGV0IHhoclJlcyA9IGF3YWl0IHRoaXMuZ2V0UmVzb3VyY2UoXCJHRVRcIiwgbGFuZyArICcvZ2V0Q291cnNlRGF0YVRlc3QvJyArIGNvdXJzZUlkLCAnJywgdHJ1ZSk7XG5cbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoeGhyUmVzLnJlc3BvbnNlKS5tYXAodHJhbnNmb3JtSXRlbSk7XG4gICAgfTtcblxuICAgIHRoaXMuYWRkVG9waWMgPSBhc3luYyBmdW5jdGlvbiAoY291cnNlSWQsIHRoZW1lTmFtZSkge1xuICAgICAgICBsZXQgeGhyUmVzID0gYXdhaXQgdGhpcy5nZXRSZXNvdXJjZShcIlBPU1RcIiwgJ2NyZWF0ZS10aGVtZScsICdjb3Vyc2VfaWQ9JyArIGNvdXJzZUlkICsgJyZuYW1lPScgKyB0aGVtZU5hbWUgKyAnJywgdHJ1ZSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coeGhyUmVzKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IHBhcnNlSW50KHhoclJlcy5yZXNwb25zZSksXG4gICAgICAgICAgICBuYW1lOiB0aGVtZU5hbWVcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmVkaXRUb3BpYyA9IGFzeW5jIGZ1bmN0aW9uICh0aGVtZUlkLCB0aGVtZU5hbWUpIHtcbiAgICAgICAgbGV0IHhoclJlcyA9IGF3YWl0IHRoaXMuZ2V0UmVzb3VyY2UoJ1BPU1QnLCAnZWRpdC10aGVtZScsICd0aGVtZV9pZD0nICsgdGhlbWVJZCArICcmdGhlbWVfbmFtZT0nICsgdGhlbWVOYW1lICsgJycsIHRydWUpO1xuXG4gICAgICAgIGxldCB0cmFuc2Zvcm1lZFJlcyA9IEpTT04ucGFyc2UoeGhyUmVzLnJlc3BvbnNlKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbXNnVGl0bGU6IHRyYW5zZm9ybWVkUmVzLnRpdGxlLFxuICAgICAgICAgICAgbXNnVGV4dDogdHJhbnNmb3JtZWRSZXMuYm9keVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMucmVtb3ZlVG9waWMgPSBhc3luYyBmdW5jdGlvbiAodGhlbWVJZCkge1xuICAgICAgICBsZXQgeGhyUmVzID0gYXdhaXQgdGhpcy5nZXRSZXNvdXJjZSgnREVMRVRFJywgJ2RlbGV0ZS10aGVtZScsICd0aGVtZV9pZD0nICsgdGhlbWVJZCArICcnLCB0cnVlKTtcblxuICAgICAgICBsZXQgdHJhbnNmb3JtZWRSZXMgPSBKU09OLnBhcnNlKHhoclJlcy5yZXNwb25zZSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1zZ1RpdGxlOiB0cmFuc2Zvcm1lZFJlcy50aXRsZSxcbiAgICAgICAgICAgIG1zZ1RleHQ6IHRyYW5zZm9ybWVkUmVzLmJvZHlcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnJlbW92ZUxlc3NvbiA9IGFzeW5jIGZ1bmN0aW9uICh0aGVtZUlkLCBsZXNzb25JZCkge1xuICAgICAgICBsZXQgeGhyUmVzID0gYXdhaXQgdGhpcy5nZXRSZXNvdXJjZSgnREVMRVRFJywgJ2RlbGV0ZS1sZXNzb24nLCAnbGVzc29uX2lkPScgKyBsZXNzb25JZCArICcmdGhlbWVfaWQ9JyArIHRoZW1lSWQgKyAnJywgdHJ1ZSk7XG5cbiAgICAgICAgbGV0IHRyYW5zZm9ybWVkUmVzID0gSlNPTi5wYXJzZSh4aHJSZXMucmVzcG9uc2UpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtc2dUaXRsZTogdHJhbnNmb3JtZWRSZXMudGl0bGUsXG4gICAgICAgICAgICBtc2dUZXh0OiB0cmFuc2Zvcm1lZFJlcy5ib2R5XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5zd2FwSXRlbXMgPSBhc3luYyBmdW5jdGlvbiAoaWQxLCB0eXBlMSwgaWQyLCB0eXBlMikge1xuICAgICAgICBsZXQgeGhyUmVzID0gdGhpcy5nZXRSZXNvdXJjZSgnUE9TVCcsICdtb3ZlLWl0ZW0nLCAnaXRlbV8xX2lkPScgKyBpZDEgKyAnJml0ZW1fMV90eXBlPScgKyB0eXBlMSArICcmaXRlbV8yX2lkPScgKyBpZDIgKyAnJml0ZW1fMl90eXBlPScgKyB0eXBlMiArICcnLCB0cnVlKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zd2FwTGVzc29uc09yZGVycyA9IGFzeW5jIGZ1bmN0aW9uIChpZDEsIGlkMikge1xuICAgICAgICBsZXQgeGhyUmVzID0gdGhpcy5nZXRSZXNvdXJjZSgnUE9TVCcsICdtb3ZlLWxlc3NvbicsICdsZXNzb25fMV9pZD0nICsgaWQxICsgJyZsZXNzb25fMl9pZD0nICsgaWQyICsgJycsIHRydWUpO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFJlc291cmNlID0gYXN5bmMgZnVuY3Rpb24gKHR5cGUsIG1ldGhvZCwgYm9keSwgYXN5bmMpIHtcbiAgICAgICAgbGV0IHhoclJlcyA9IGF3YWl0IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB4aHIub3Blbih0eXBlLCBgJHtkb21haW5OYW1lfS8ke21ldGhvZH1gLCBhc3luYyk7XG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpO1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ1gtQ1NSRi1UT0tFTicsIHRva2VuKTtcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoeGhyKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgeGhyLnNlbmQoYm9keSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh4aHJSZXMuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IuIFJlY2VpdmVkIHN0YXR1cyAke3hoclJlcy5zdGF0dXN9YCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYXdhaXQgeGhyUmVzO1xuICAgIH07XG5cbiAgICB0aGlzLnVwZGF0ZVVucmVhZE1lc3NhZ2VzID0gYXN5bmMgZnVuY3Rpb24gKGlkcykge1xuICAgICAgICBsZXQgeGhyUmVzID0gbmV3IFByb21pc2UgKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIGxldCB1cmwgPSBgJHtkb21haW5OYW1lfS8ke2xhbmd9L21hcmtBc1JlYWROb3RpZmljYXRpb25zYDtcbiAgICAgICAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgIHhoci5vcGVuKCdQT1NUJywgdXJsKTtcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04Jyk7XG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignWC1DU1JGLVRPS0VOJywgdG9rZW4pO1xuICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCh4aHIuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHhoci5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlcXVlc3QgZXJyb3InKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KHtkYXRhOiBpZHN9KSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBhd2FpdCB4aHJSZXM7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHRyYW5zZm9ybUl0ZW0oaXRlbSkge1xuICAgICAgICBpZiAoaXRlbS5pdGVtX3R5cGUgPT09ICd0aGVtZScpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgIG9yZGVyOiBpdGVtLm9yZGVyLFxuICAgICAgICAgICAgICAgIGxlc3NvbnM6IGl0ZW0ubGVzc29ucy5sZW5ndGggPT09IDAgPyBudWxsIDogaXRlbS5sZXNzb25zLFxuICAgICAgICAgICAgICAgIGNvbGxhcHNlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXRlbVR5cGU6IGl0ZW0uaXRlbV90eXBlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICBvcmRlcjogaXRlbS5vcmRlcixcbiAgICAgICAgICAgICAgICBjb2xsYXBzZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGl0ZW1UeXBlOiBpdGVtLml0ZW1fdHlwZSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogaXRlbS5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICB0eXBlOiBpdGVtLnR5cGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07Il0sImZpbGUiOiJzZXJ2aWNlLmpzIn0=
