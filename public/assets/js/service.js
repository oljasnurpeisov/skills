const DataService=function(){function e(e){return"theme"===e.item_type?{id:e.id,name:e.name,order:e.order,lessons:0===e.lessons.length?null:e.lessons,collapsed:!1,itemType:e.item_type}:{id:e.id,name:e.name,order:e.order,collapsed:!1,itemType:e.item_type,duration:e.duration,type:e.type}}let t=window.Laravel.lang,s=window.Laravel.csrfToken;this.getCourseData=async function(s){let n=await this.getResource("GET",t+"/getCourseData/"+s,"",!0);return JSON.parse(n.response).map(e)},this.addTopic=async function(e,t){let s=await this.getResource("POST","create-theme","course_id="+e+"&name="+t,!0);return console.log(s),{id:parseInt(s.response),name:t}},this.editTopic=async function(e,t){let s=await this.getResource("POST","edit-theme","theme_id="+e+"&theme_name="+t,!0),n=JSON.parse(s.response);return{msgTitle:n.title,msgText:n.body}},this.removeTopic=async function(e){let t=await this.getResource("DELETE","delete-theme","theme_id="+e,!0),s=JSON.parse(t.response);return{msgTitle:s.title,msgText:s.body}},this.removeLesson=async function(e,t){let s=await this.getResource("DELETE","delete-lesson","lesson_id="+t+"&theme_id="+e,!0),n=JSON.parse(s.response);return{msgTitle:n.title,msgText:n.body}},this.swapItems=async function(e,t,s,n){this.getResource("POST","move-item","item_1_id="+e+"&item_1_type="+t+"&item_2_id="+s+"&item_2_type="+n,!0)},this.swapLessonsOrders=async function(e,t){this.getResource("POST","move-lesson","lesson_1_id="+e+"&lesson_2_id="+t,!0)},this.getResource=async function(e,t,n,o){let i=await new Promise(function(i){let r=new XMLHttpRequest;r.open(e,`/${t}`,o),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.setRequestHeader("X-CSRF-TOKEN",s),r.onload=function(){i(r)},r.onerror=function(){i(void 0)},r.send(n)});if(200!==i.status)throw new Error(`Error. Received status ${i.status}`);return await i},this.updateUnreadMessages=async function(e){let n=new Promise(function(n,o){let i=new XMLHttpRequest;i.open("POST",`/${t}/markAsReadNotifications`),i.setRequestHeader("Content-type","application/json; charset=UTF-8"),i.setRequestHeader("X-CSRF-TOKEN",s),i.onload=function(){200===i.status?n(i.response):o(i.status)},i.onerror=function(){console.log("Request error")},i.send(JSON.stringify({data:e}))});return await n}};
