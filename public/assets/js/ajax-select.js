let ajaxSelect=function(a,b=null,c=!0){function d(a){let b=[];a.forEach(function(a){b.push({value:a.id,text:a["name"+(c?"_"+l:"")]})}),r.addOption(b)}function e(){let a=[];Object.values(r.options).forEach(b=>{a.push(b.value)}),r.setValue(a)}function f(){let a=document.createElement("div");a.className="noresults-message",a.innerHTML=t,r.$control[0].parentElement.append(a)}function g(){let a=r.$control[0].parentElement.querySelector(".noresults-message");a&&a.remove()}function h(a){r.setTextboxValue(a),r.focus()}function i(){r.addOption({$order:0,value:"",text:a.data("default")})}function j(b=null,c="",j=!1,k=!0){$.ajax({type:"POST",url:m,data:{...b,name:c},success:function(b){0===b.data.length?(r.$control[0].classList.add("no-results"),f()):(k&&r.clearOptions(),e(),a.data("default")&&i(),d(b.data),j&&h(c),g()),n=1,o=b.current_page===b.last_page},error:function(a){console.log(a)}})}let k=a.data("method"),l=window.Laravel.lang,m="/"+l+"/"+k,n=1,o=!1,p=!0,q=a.selectize({plugins:a[0].hasAttribute("multiple")?["remove_button","silent_remove","stop_backspace_delete"]:null,allowEmptyOption:!0,maxOptions:1e4,onInitialize:function(){let a=b?b.val()?{professions:toArray(b.val())}:null:null;j(a)}}),r=q[0].selectize,s=r.$dropdown_content,t=r.$input[0].dataset.noresults?r.$input[0].dataset.noresults:{en:"No results",ru:"\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E",kk:"\u0415\u0448\u0442\u0435\u043D\u0435 \u0442\u0430\u0431\u044B\u043B\u0433\u0430\u043D \u0436\u043E\u043A"}[l];r.on("type",delay(function(a){let c=b?b.val()?{professions:toArray(b.val())}:null:null;j(c,a,!0)},1e3)),r.on("change",function(){r.$control_input[0].placeholder=a[0].attributes.placeholder.value,p=!1,setTimeout(function(){p=!0},150)}),r.on("blur",function(){r.$control[0].classList.remove("no-results"),g()}),s.on("scroll",function(){let a=b?b.val()?{professions:toArray(b.val())}:null:null,c=s[0].scrollHeight-s[0].scrollTop-s[0].clientHeight;if(1e3>c&&p&&!o){p=!1,r.$dropdown[0].classList.add("loading");let b=s[0].scrollTop;$.ajax({type:"POST",url:m,data:{...a,name:r.lastQuery,page:n+1},success:function(a){d(a.data),r.refreshOptions(),p=!0,n++,setTimeout(function(){r.$dropdown[0].classList.remove("loading")},150),s[0].scrollTop=b,a.current_page===a.last_page&&(o=!0)},error:function(a){console.log(a)}})}}),a[0].hasAttribute("multiple")||r.on("focus",function(){r.clear()}),this.update=function(a){j(a)},this.clear=function(){r.clear()}};function delay(a,b){let c=0;return function(){let d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b||0)}}Selectize.define("silent_remove",function(){let a=this;this.on("item_remove",function(){this.plugin_silent_remove_in_remove=!0}),this.search=function(){let b=a.search;return function(){return"undefined"==typeof this.plugin_silent_remove_in_remove?b.apply(this,arguments):(delete this.plugin_silent_remove_in_remove,{items:{},query:[],tokens:[]})}}()}),Selectize.define("stop_backspace_delete",function(){let a=this;this.deleteSelection=function(){let b=a.deleteSelection;return function(a){return!(a&&8===a.keyCode)&&b.apply(this,arguments)}}()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXgtc2VsZWN0LmpzIl0sIm5hbWVzIjpbImFqYXhTZWxlY3QiLCJlbCIsInBhcmVudEVsIiwibXVsdGlMYW5nIiwicmVuZGVyTmV3T3B0aW9ucyIsImRhdGEiLCJuZXdPcHRpb25zIiwiZm9yRWFjaCIsIml0ZW0iLCJwdXNoIiwidmFsdWUiLCJpZCIsInRleHQiLCJsYW5nIiwiY29udHJvbHMiLCJhZGRPcHRpb24iLCJzYXZlT2xkT3B0aW9ucyIsInNlbGVjdGVkVmFsdWVzIiwiT2JqZWN0IiwidmFsdWVzIiwib3B0aW9ucyIsInNldFZhbHVlIiwiYWRkTWVzc2FnZSIsIm1lc3NhZ2UiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJpbm5lckhUTUwiLCJub1Jlc3VsdHNNc2ciLCIkY29udHJvbCIsInBhcmVudEVsZW1lbnQiLCJhcHBlbmQiLCJyZW1vdmVNZXNzYWdlIiwicXVlcnlTZWxlY3RvciIsInJlbW92ZSIsImZvY3VzT25TZWFyY2hGaWVsZCIsInZhbCIsInNldFRleHRib3hWYWx1ZSIsImZvY3VzIiwiYWRkRGVmYXVsdE9wdGlvbiIsIiRvcmRlciIsInNlbmRSZXF1ZXN0IiwiYWRkaXRpb25hbERhdGEiLCJzZWFyY2hWYWx1ZSIsImNsZWFyT3B0aW9ucyIsIiQiLCJhamF4IiwidHlwZSIsInVybCIsInN1Y2Nlc3MiLCJyZXNwb25zZSIsImxlbmd0aCIsImNsYXNzTGlzdCIsImFkZCIsInBhZ2VDb3VudGVyIiwibGFzdFBhZ2UiLCJjdXJyZW50X3BhZ2UiLCJsYXN0X3BhZ2UiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJtZXRob2QiLCJ3aW5kb3ciLCJMYXJhdmVsIiwibG9hZEVuYWJsZSIsInNlbGVjdCIsInNlbGVjdGl6ZSIsInBsdWdpbnMiLCJoYXNBdHRyaWJ1dGUiLCJhbGxvd0VtcHR5T3B0aW9uIiwibWF4T3B0aW9ucyIsIm9uSW5pdGlhbGl6ZSIsInRvQXJyYXkiLCJkcm9wZG93bkNvbnRlbnQiLCIkZHJvcGRvd25fY29udGVudCIsIiRpbnB1dCIsImRhdGFzZXQiLCJub3Jlc3VsdHMiLCJlbiIsInJ1Iiwia2siLCJvbiIsImRlbGF5IiwiJGNvbnRyb2xfaW5wdXQiLCJwbGFjZWhvbGRlciIsImF0dHJpYnV0ZXMiLCJzZXRUaW1lb3V0IiwicHhUb0JvdHRvbSIsInNjcm9sbEhlaWdodCIsInNjcm9sbFRvcCIsImNsaWVudEhlaWdodCIsIiRkcm9wZG93biIsImxhc3RRdWVyeSIsInJlZnJlc2hPcHRpb25zIiwiY2xlYXIiLCJ1cGRhdGUiLCJjYWxsYmFjayIsIm1zIiwidGltZXIiLCJjb250ZXh0IiwiYXJncyIsImFyZ3VtZW50cyIsImNsZWFyVGltZW91dCIsImFwcGx5IiwiU2VsZWN0aXplIiwiZGVmaW5lIiwic2VsZiIsInBsdWdpbl9zaWxlbnRfcmVtb3ZlX2luX3JlbW92ZSIsInNlYXJjaCIsIm9yaWdpbmFsIiwiaXRlbXMiLCJxdWVyeSIsInRva2VucyIsImRlbGV0ZVNlbGVjdGlvbiIsImUiLCJrZXlDb2RlIl0sIm1hcHBpbmdzIjoiQUFDQSxHQUFJQSxDQUFBQSxVQUFVLENBQUcsU0FBVUMsQ0FBVixDQUFjQyxDQUFRLENBQUcsSUFBekIsQ0FBK0JDLENBQVMsR0FBeEMsQ0FBaUQsQ0FxR2hFLFFBQVNDLENBQUFBLENBQVQsQ0FBMEJDLENBQTFCLENBQWdDLENBQzlCLEdBQUlDLENBQUFBLENBQVUsQ0FBRyxFQUFqQixDQUNBRCxDQUFJLENBQUNFLE9BQUwsQ0FBYSxTQUFVQyxDQUFWLENBQWdCLENBQzNCRixDQUFVLENBQUNHLElBQVgsQ0FBZ0IsQ0FDZEMsS0FBSyxDQUFFRixDQUFJLENBQUNHLEVBREUsQ0FFZEMsSUFBSSxDQUFFSixDQUFJLENBQUMsUUFBVUwsQ0FBUyxDQUFHLElBQU1VLENBQVQsQ0FBZ0IsRUFBbkMsQ0FBRCxDQUZJLENBQWhCLENBSUQsQ0FMRCxDQUY4QixDQVE5QkMsQ0FBUSxDQUFDQyxTQUFULENBQW1CVCxDQUFuQixDQUNELENBRUQsUUFBU1UsQ0FBQUEsQ0FBVCxF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LENBUWpELEtBQUtDLE1BQUwsQ0FBZSxVQUFXLENBQ3hCLEdBQUlDLENBQUFBLENBQVEsQ0FBR0gsQ0FBSSxDQUFDRSxNQUFwQixDQUNBLE1BQU8sV0FBVyxPQUNtQyxXQUEvQyxRQUFPLE1BQUtELDhCQURBLENBV1BFLENBQVEsQ0FBQ04sS0FBVCxDQUFlLElBQWYsQ0FBcUJGLFNBQXJCLENBWE8sRUFHZCxNQUFPLE1BQUtNLDhCQUhFLENBSVAsQ0FDTEcsS0FBSyxDQUFFLEVBREYsQ0FFTEMsS0FBSyxDQUFFLEVBRkYsQ0FHTEMsTUFBTSxDQUFFLEVBSEgsQ0FKTyxDQWFqQixDQUNGLENBaEJhLEVBaUJmLENBekJELEMsQ0EyQkFSLFNBQVMsQ0FBQ0MsTUFBVixDQUFpQix1QkFBakIsQ0FBMEMsVUFBbUIsQ0FDM0QsR0FBSUMsQ0FBQUEsQ0FBSSxDQUFHLElBQVgsQ0FFQSxLQUFLTyxlQUFMLENBQXdCLFVBQVcsQ0FDakMsR0FBSUosQ0FBQUEsQ0FBUSxDQUFHSCxDQUFJLENBQUNPLGVBQXBCLENBRUEsTUFBTyxVQUFVQyxDQUFWLENBQWEsU0FDYkEsQ0FBRCxFQUFvQixDQUFkLEdBQUFBLENBQUMsQ0FBQ0MsT0FETSxHQUVUTixDQUFRLENBQUNOLEtBQVQsQ0FBZSxJQUFmLENBQXFCRixTQUFyQixDQUlWLENBQ0YsQ0FWc0IsRUFXeEIsQ0FkRCxDIiwic291cmNlc0NvbnRlbnQiOlsiLy9BamF4IHNlbGVjdCBjb25zdHJ1Y3RvclxyXG5sZXQgYWpheFNlbGVjdCA9IGZ1bmN0aW9uIChlbCwgcGFyZW50RWwgPSBudWxsLCBtdWx0aUxhbmcgPSB0cnVlKSB7XHJcbiAgbGV0IGRvbWFpbk5hbWUgPSAnaHR0cHM6Ly9kZXYzLnBhbmFtYS5rei8nLFxyXG4gICAgbWV0aG9kID0gZWwuZGF0YSgnbWV0aG9kJyksXHJcbiAgICBsYW5nID0gd2luZG93LkxhcmF2ZWwubGFuZyxcclxuICAgIHVybCA9IGRvbWFpbk5hbWUgKyBsYW5nICsgJy8nICsgbWV0aG9kO1xyXG5cclxuICBsZXQgcGFnZUNvdW50ZXIgPSAxLFxyXG4gICAgbGFzdFBhZ2UgPSBmYWxzZSxcclxuICAgIGxvYWRFbmFibGUgPSB0cnVlO1xyXG5cclxuICAvL2luaXQgU2VsZWN0aXplXHJcbiAgbGV0IHNlbGVjdCA9IGVsLnNlbGVjdGl6ZSh7XHJcbiAgICBwbHVnaW5zOiBlbFswXS5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJykgPyBbJ3JlbW92ZV9idXR0b24nLCAnc2lsZW50X3JlbW92ZScsICdzdG9wX2JhY2tzcGFjZV9kZWxldGUnXSA6IG51bGwsXHJcbiAgICBhbGxvd0VtcHR5T3B0aW9uOiB0cnVlLFxyXG4gICAgbWF4T3B0aW9uczogMTAwMDAsXHJcbiAgICAvLyBzb3J0RmllbGQ6IFtcclxuICAgIC8vICAge1xyXG4gICAgLy8gICAgIGZpZWxkOiAndGV4dCcsXHJcbiAgICAvLyAgICAgZGlyZWN0aW9uOiAnYXNjJ1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyBdLFxyXG4gICAgb25Jbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGxldCBhZGRpdGlvbmFsRGF0YSA9IHBhcmVudEVsID8gKHBhcmVudEVsLnZhbCgpID8geydwcm9mZXNzaW9ucyc6IHRvQXJyYXkocGFyZW50RWwudmFsKCkpfSA6IG51bGwpIDogbnVsbDtcclxuICAgICAgc2VuZFJlcXVlc3QoYWRkaXRpb25hbERhdGEpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIC8vZmV0Y2ggdGhlIGluc3RhbmNlXHJcbiAgbGV0IGNvbnRyb2xzID0gc2VsZWN0WzBdLnNlbGVjdGl6ZSxcclxuICAgIGRyb3Bkb3duQ29udGVudCA9IGNvbnRyb2xzLiRkcm9wZG93bl9jb250ZW50LFxyXG4gICAgbm9SZXN1bHRzRGVmYXVsdE1zZyA9IHtcclxuICAgICAgZW46ICdObyByZXN1bHRzJyxcclxuICAgICAgcnU6ICfQndC40YfQtdCz0L4g0L3QtSDQvdCw0LnQtNC10L3QvicsXHJcbiAgICAgIGtrOiAn0JXRiNGC0LXQvdC1INGC0LDQsdGL0LvQs9Cw0L0g0LbQvtC6J1xyXG4gICAgfSxcclxuICAgIG5vUmVzdWx0c01zZyA9IGNvbnRyb2xzLiRpbnB1dFswXS5kYXRhc2V0Lm5vcmVzdWx0cyA/IGNvbnRyb2xzLiRpbnB1dFswXS5kYXRhc2V0Lm5vcmVzdWx0cyA6IG5vUmVzdWx0c0RlZmF1bHRNc2dbbGFuZ107XHJcblxyXG4gIC8vT24gdHlwZSBldmVudFxyXG4gIGNvbnRyb2xzLm9uKCd0eXBlJywgZGVsYXkoZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgbGV0IGFkZGl0aW9uYWxEYXRhID0gcGFyZW50RWwgPyAocGFyZW50RWwudmFsKCkgPyB7J3Byb2Zlc3Npb25zJzogdG9BcnJheShwYXJlbnRFbC52YWwoKSl9IDogbnVsbCkgOiBudWxsO1xyXG4gICAgc2VuZFJlcXVlc3QoYWRkaXRpb25hbERhdGEsIHZhbCwgdHJ1ZSk7XHJcbiAgfSwgMTAwMCkpO1xyXG5cclxuICBjb250cm9scy5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgY29udHJvbHMuJGNvbnRyb2xfaW5wdXRbMF0ucGxhY2Vob2xkZXIgPSBlbFswXS5hdHRyaWJ1dGVzLnBsYWNlaG9sZGVyLnZhbHVlO1xyXG4gICAgbG9hZEVuYWJsZSA9IGZhbHNlO1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGxvYWRFbmFibGUgPSB0cnVlO1xyXG4gICAgfSwgMTUwKTtcclxuICB9KTtcclxuXHJcbiAgY29udHJvbHMub24oJ2JsdXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb250cm9scy4kY29udHJvbFswXS5jbGFzc0xpc3QucmVtb3ZlKCduby1yZXN1bHRzJyk7XHJcbiAgICByZW1vdmVNZXNzYWdlKCk7XHJcbiAgfSk7XHJcblxyXG4gIGRyb3Bkb3duQ29udGVudC5vbignc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IGFkZGl0aW9uYWxEYXRhID0gcGFyZW50RWwgPyAocGFyZW50RWwudmFsKCkgPyB7J3Byb2Zlc3Npb25zJzogdG9BcnJheShwYXJlbnRFbC52YWwoKSl9IDogbnVsbCkgOiBudWxsO1xyXG4gICAgbGV0IHB4VG9Cb3R0b20gPSBkcm9wZG93bkNvbnRlbnRbMF0uc2Nyb2xsSGVpZ2h0IC0gZHJvcGRvd25Db250ZW50WzBdLnNjcm9sbFRvcCAtIGRyb3Bkb3duQ29udGVudFswXS5jbGllbnRIZWlnaHQ7XHJcbiAgICBpZiAocHhUb0JvdHRvbSA8IDEwMDAgJiYgbG9hZEVuYWJsZSAmJiAhbGFzdFBhZ2UpIHtcclxuICAgICAgbG9hZEVuYWJsZSA9IGZhbHNlO1xyXG4gICAgICBjb250cm9scy4kZHJvcGRvd25bMF0uY2xhc3NMaXN0LmFkZCgnbG9hZGluZycpO1xyXG5cclxuICAgICAgbGV0IHNjcm9sbFRvcCA9IGRyb3Bkb3duQ29udGVudFswXS5zY3JvbGxUb3A7XHJcblxyXG4gICAgICAkLmFqYXgoe1xyXG4gICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAuLi5hZGRpdGlvbmFsRGF0YSxcclxuICAgICAgICAgIFwibmFtZVwiOiBjb250cm9scy5sYXN0UXVlcnksXHJcbiAgICAgICAgICBcInBhZ2VcIjogcGFnZUNvdW50ZXIgKyAxXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgIHJlbmRlck5ld09wdGlvbnMocmVzcG9uc2UuZGF0YSk7XHJcbiAgICAgICAgICBjb250cm9scy5yZWZyZXNoT3B0aW9ucygpO1xyXG4gICAgICAgICAgbG9hZEVuYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICBwYWdlQ291bnRlcisrO1xyXG5cclxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb250cm9scy4kZHJvcGRvd25bMF0uY2xhc3NMaXN0LnJlbW92ZSgnbG9hZGluZycpO1xyXG4gICAgICAgICAgfSwgMTUwKTtcclxuXHJcbiAgICAgICAgICBkcm9wZG93bkNvbnRlbnRbMF0uc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xyXG5cclxuICAgICAgICAgIGlmIChyZXNwb25zZS5jdXJyZW50X3BhZ2UgPT09IHJlc3BvbnNlLmxhc3RfcGFnZSkge1xyXG4gICAgICAgICAgICBsYXN0UGFnZSA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGlmICghZWxbMF0uaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpKSB7XHJcbiAgICBjb250cm9scy5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGNvbnRyb2xzLmNsZWFyKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlck5ld09wdGlvbnMoZGF0YSkge1xyXG4gICAgbGV0IG5ld09wdGlvbnMgPSBbXTtcclxuICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICBuZXdPcHRpb25zLnB1c2goe1xyXG4gICAgICAgIHZhbHVlOiBpdGVtLmlkLFxyXG4gICAgICAgIHRleHQ6IGl0ZW1bXCJuYW1lXCIgKyAobXVsdGlMYW5nID8gJ18nICsgbGFuZyA6ICcnKV1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIGNvbnRyb2xzLmFkZE9wdGlvbihuZXdPcHRpb25zKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNhdmVPbGRPcHRpb25zKCkge1xyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWVzID0gW107XHJcbiAgICBPYmplY3QudmFsdWVzKGNvbnRyb2xzLm9wdGlvbnMpLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgc2VsZWN0ZWRWYWx1ZXMucHVzaChpdGVtLnZhbHVlKTtcclxuICAgIH0pO1xyXG4gICAgY29udHJvbHMuc2V0VmFsdWUoc2VsZWN0ZWRWYWx1ZXMpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWRkTWVzc2FnZSgpIHtcclxuICAgIGxldCBtZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBtZXNzYWdlLmNsYXNzTmFtZSA9ICdub3Jlc3VsdHMtbWVzc2FnZSc7XHJcbiAgICBtZXNzYWdlLmlubmVySFRNTCA9IG5vUmVzdWx0c01zZztcclxuICAgIGNvbnRyb2xzLiRjb250cm9sWzBdLnBhcmVudEVsZW1lbnQuYXBwZW5kKG1lc3NhZ2UpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVtb3ZlTWVzc2FnZSgpIHtcclxuICAgIGxldCBtZXNzYWdlID0gY29udHJvbHMuJGNvbnRyb2xbMF0ucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubm9yZXN1bHRzLW1lc3NhZ2UnKTtcclxuICAgIGlmIChtZXNzYWdlKSB7XHJcbiAgICAgIG1lc3NhZ2UucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBmb2N1c09uU2VhcmNoRmllbGQodmFsKSB7XHJcbiAgICBjb250cm9scy5zZXRUZXh0Ym94VmFsdWUodmFsKTtcclxuICAgIGNvbnRyb2xzLmZvY3VzKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhZGREZWZhdWx0T3B0aW9uKCkge1xyXG4gICAgY29udHJvbHMuYWRkT3B0aW9uKHtcclxuICAgICAgJG9yZGVyOiAwLFxyXG4gICAgICB2YWx1ZTogJycsXHJcbiAgICAgIHRleHQ6IGVsLmRhdGEoJ2RlZmF1bHQnKVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZW5kUmVxdWVzdChhZGRpdGlvbmFsRGF0YSA9IG51bGwsIHNlYXJjaFZhbHVlID0gJycsIGZvY3VzID0gZmFsc2UsIGNsZWFyT3B0aW9ucyA9IHRydWUpIHtcclxuICAgICQuYWpheCh7XHJcbiAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgdXJsOiB1cmwsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICAuLi5hZGRpdGlvbmFsRGF0YSxcclxuICAgICAgICBcIm5hbWVcIjogc2VhcmNoVmFsdWVcclxuICAgICAgfSxcclxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICBpZiAoY2xlYXJPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xzLmNsZWFyT3B0aW9ucygpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHNhdmVPbGRPcHRpb25zKCk7XHJcblxyXG4gICAgICAgICAgaWYgKGVsLmRhdGEoJ2RlZmF1bHQnKSkge1xyXG4gICAgICAgICAgICBhZGREZWZhdWx0T3B0aW9uKCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmVuZGVyTmV3T3B0aW9ucyhyZXNwb25zZS5kYXRhKTtcclxuXHJcbiAgICAgICAgICBpZiAoZm9jdXMpIHtcclxuICAgICAgICAgICAgZm9jdXNPblNlYXJjaEZpZWxkKHNlYXJjaFZhbHVlKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZW1vdmVNZXNzYWdlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnRyb2xzLiRjb250cm9sWzBdLmNsYXNzTGlzdC5hZGQoJ25vLXJlc3VsdHMnKTtcclxuICAgICAgICAgIGFkZE1lc3NhZ2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHBhZ2VDb3VudGVyID0gMTtcclxuICAgICAgICBsYXN0UGFnZSA9IChyZXNwb25zZS5jdXJyZW50X3BhZ2UgPT09IHJlc3BvbnNlLmxhc3RfcGFnZSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKGFkZGl0aW9uYWxEYXRhKSB7XHJcbiAgICBzZW5kUmVxdWVzdChhZGRpdGlvbmFsRGF0YSk7XHJcbiAgfTtcclxuXHJcbiAgdGhpcy5jbGVhciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnRyb2xzLmNsZWFyKCk7XHJcbiAgfTtcclxufTtcclxuXHJcbi8vRGVsYXkgZnVuY3Rpb25cclxuZnVuY3Rpb24gZGVsYXkoY2FsbGJhY2ssIG1zKSB7XHJcbiAgbGV0IHRpbWVyID0gMDtcclxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IGNvbnRleHQgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcclxuICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGNhbGxiYWNrLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xyXG4gICAgfSwgbXMgfHwgMCk7XHJcbiAgfTtcclxufVxyXG5cclxuU2VsZWN0aXplLmRlZmluZSgnc2lsZW50X3JlbW92ZScsIGZ1bmN0aW9uKG9wdGlvbnMpe1xyXG4gIGxldCBzZWxmID0gdGhpcztcclxuXHJcbiAgLy8gZGVmYW5nIHRoZSBpbnRlcm5hbCBzZWFyY2ggbWV0aG9kIHdoZW4gcmVtb3ZlIGhhcyBiZWVuIGNsaWNrZWRcclxuICB0aGlzLm9uKCdpdGVtX3JlbW92ZScsIGZ1bmN0aW9uKCl7XHJcbiAgICB0aGlzLnBsdWdpbl9zaWxlbnRfcmVtb3ZlX2luX3JlbW92ZSA9IHRydWU7XHJcbiAgfSk7XHJcblxyXG4gIHRoaXMuc2VhcmNoID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IG9yaWdpbmFsID0gc2VsZi5zZWFyY2g7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmICh0eXBlb2YodGhpcy5wbHVnaW5fc2lsZW50X3JlbW92ZV9pbl9yZW1vdmUpICE9IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAvLyByZS1lbmFibGUgbm9ybWFsIHNlYXJjaGluZ1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnBsdWdpbl9zaWxlbnRfcmVtb3ZlX2luX3JlbW92ZTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgaXRlbXM6IHt9LFxyXG4gICAgICAgICAgcXVlcnk6IFtdLFxyXG4gICAgICAgICAgdG9rZW5zOiBbXVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfSkoKTtcclxufSk7XHJcblxyXG5TZWxlY3RpemUuZGVmaW5lKFwic3RvcF9iYWNrc3BhY2VfZGVsZXRlXCIsIGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgbGV0IHNlbGYgPSB0aGlzO1xyXG5cclxuICB0aGlzLmRlbGV0ZVNlbGVjdGlvbiA9IChmdW5jdGlvbigpIHtcclxuICAgIGxldCBvcmlnaW5hbCA9IHNlbGYuZGVsZXRlU2VsZWN0aW9uO1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBpZiAoIWUgfHwgZS5rZXlDb2RlICE9PSA4KSB7XHJcbiAgICAgICAgcmV0dXJuIG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgfSkoKTtcclxufSk7Il0sImZpbGUiOiJhamF4LXNlbGVjdC5qcyJ9
