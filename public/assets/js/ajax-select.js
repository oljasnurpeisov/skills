let ajaxSelect=function(a,b=null,c=!0){function d(a){let b=[];a.forEach(function(a){b.push({value:a.id,text:a["name"+(c?"_"+l:"")]})}),r.addOption(b)}function e(){let a=[];Object.values(r.options).forEach(b=>{a.push(b.value)}),r.setValue(a)}function f(){let a=document.createElement("div");a.className="noresults-message",a.innerHTML=t,r.$control[0].parentElement.append(a)}function g(){let a=r.$control[0].parentElement.querySelector(".noresults-message");a&&a.remove()}function h(a){r.setTextboxValue(a),r.focus()}function i(){r.addOption({$order:0,value:"",text:a.data("default")})}function j(b=null,c="",j=!1,k=!0){$.ajax({type:"POST",url:m,data:{...b,name:c},success:function(b){k&&r.clearOptions(),0===b.data.length?(r.$control[0].classList.add("no-results"),f()):(e(),a.data("default")&&i(),d(b.data),j&&h(c),g()),n=1,o=b.current_page===b.last_page},error:function(a){console.log(a)}})}let k=a.data("method"),l=window.Laravel.lang,m=document.location.origin+"/"+l+"/"+k,n=1,o=!1,p=!0,q=a.selectize({plugins:a[0].hasAttribute("multiple")?["remove_button","silent_remove","stop_backspace_delete"]:null,allowEmptyOption:!0,maxOptions:1e4,onInitialize:function(){let a=b?b.val()?{professions:toArray(b.val())}:null:null;j(a)}}),r=q[0].selectize,s=r.$dropdown_content,t=r.$input[0].dataset.noresults?r.$input[0].dataset.noresults:{en:"No results",ru:"\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E",kk:"\u0415\u0448\u0442\u0435\u043D\u0435 \u0442\u0430\u0431\u044B\u043B\u0433\u0430\u043D \u0436\u043E\u043A"}[l];r.on("type",delay(function(a){let c=b?b.val()?{professions:toArray(b.val())}:null:null;j(c,a,!0)},1e3)),r.on("change",function(){r.$control_input[0].placeholder=a[0].attributes.placeholder.value,p=!1,setTimeout(function(){p=!0},150)}),r.on("blur",function(){r.$control[0].classList.remove("no-results"),g()}),s.on("scroll",function(){let a=b?b.val()?{professions:toArray(b.val())}:null:null,c=s[0].scrollHeight-s[0].scrollTop-s[0].clientHeight;if(1e3>c&&p&&!o){p=!1,r.$dropdown[0].classList.add("loading");let b=s[0].scrollTop;$.ajax({type:"POST",url:m,data:{...a,name:r.lastQuery,page:n+1},success:function(a){d(a.data),r.refreshOptions(),p=!0,n++,setTimeout(function(){r.$dropdown[0].classList.remove("loading")},150),s[0].scrollTop=b,a.current_page===a.last_page&&(o=!0)},error:function(a){console.log(a)}})}}),a[0].hasAttribute("multiple")||r.on("focus",function(){r.clear()}),this.update=function(a){j(a)},this.clear=function(){r.clear()},this.removeMessage=function(){g()}};function delay(a,b){let c=0;return function(){let d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b||0)}}Selectize.define("silent_remove",function(){let a=this;this.on("item_remove",function(){this.plugin_silent_remove_in_remove=!0}),this.search=function(){let b=a.search;return function(){return"undefined"==typeof this.plugin_silent_remove_in_remove?b.apply(this,arguments):(delete this.plugin_silent_remove_in_remove,{items:{},query:[],tokens:[]})}}()}),Selectize.define("stop_backspace_delete",function(){let a=this;this.deleteSelection=function(){let b=a.deleteSelection;return function(a){return!(a&&8===a.keyCode)&&b.apply(this,arguments)}}()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXgtc2VsZWN0LmpzIl0sIm5hbWVzIjpbImFqYXhTZWxlY3QiLCJlbCIsInBhcmVudEVsIiwibXVsdGlMYW5nIiwicmVuZGVyTmV3T3B0aW9ucyIsImRhdGEiLCJuZXdPcHRpb25zIiwiZm9yRWFjaCIsIml0ZW0iLCJwdXNoIiwidmFsdWUiLCJpZCIsInRleHQiLCJsYW5nIiwiY29udHJvbHMiLCJhZGRPcHRpb24iLCJzYXZlT2xkT3B0aW9ucyIsInNlbGVjdGVkVmFsdWVzIiwiT2JqZWN0IiwidmFsdWVzIiwib3B0aW9ucyIsInNldFZhbHVlIiwiYWRkTWVzc2FnZSIsIm1lc3NhZ2UiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJpbm5lckhUTUwiLCJub1Jlc3VsdHNNc2ciLCIkY29udHJvbCIsInBhcmVudEVsZW1lbnQiLCJhcHBlbmQiLCJyZW1vdmVNZXNzYWdlIiwicXVlcnlTZWxlY3RvciIsInJlbW92ZSIsImZvY3VzT25TZWFyY2hGaWVsZCIsInZhbCIsInNldFRleHRib3hWYWx1ZSIsImZvY3VzIiwiYWRkRGVmYXVsdE9wdGlvbiIsIiRvcmRlciIsInNlbmRSZXF1ZXN0IiwiYWRkaXRpb25hbERhdGEiLCJzZWFyY2hWYWx1ZSIsImNsZWFyT3B0aW9ucyIsIiQiLCJhamF4IiwidHlwZSIsInVybCIsInN1Y2Nlc3MiLCJyZXNwb25zZSIsImxlbmd0aCIsImNsYXNzTGlzdCIsImFkZCIsInBhZ2VDb3VudGVyIiwibGFzdFBhZ2UiLCJjdXJyZW50X3BhZ2UiLCJsYXN0X3BhZ2UiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJtZXRob2QiLCJ3aW5kb3ciLCJMYXJhdmVsIiwibG9jYXRpb24iLCJvcmlnaW4iLCJsb2FkRW5hYmxlIiwic2VsZWN0Iiwic2VsZWN0aXplIiwicGx1Z2lucyIsImhhc0F0dHJpYnV0ZSIsImFsbG93RW1wdHlPcHRpb24iLCJtYXhPcHRpb25zIiwib25Jbml0aWFsaXplIiwidG9BcnJheSIsImRyb3Bkb3duQ29udGVudCIsIiRkcm9wZG93bl9jb250ZW50IiwiJGlucHV0IiwiZGF0YXNldCIsIm5vcmVzdWx0cyIsImVuIiwicnUiLCJrayIsIm9uIiwiZGVsYXkiLCIkY29udHJvbF9pbnB1dCIsInBsYWNlaG9sZGVyIiwiYXR0cmlidXRlcyIsInNldFRpbWVvdXQiLCJweFRvQm90dG9tIiwic2Nyb2xsSGVpZ2h0Iiwic2Nyb2xsVG9wIiwiY2xpZW50SGVpZ2h0IiwiJGRyb3Bkb3duIiwibGFzdFF1ZXJ5IiwicmVmcmVzaE9wdGlvbnMiLCJjbGVhciIsInVwZGF0ZSIsImNhbGxiYWNrIiwibXMiLCJ0aW1lciIsImNvbnRleHQiLCJhcmdzIiwiYXJndW1lbnRzIiwiY2xlYXJUaW1lb3V0IiwiYXBwbHkiLCJTZWxlY3RpemUiLCJkZWZpbmUiLCJzZWxmIiwicGx1Z2luX3NpbGVudF9yZW1vdmVfaW5fcmVtb3ZlIiwic2VhcmNoIiwib3JpZ2luYWwiLCJpdGVtcyIsInF1ZXJ5IiwidG9rZW5zIiwiZGVsZXRlU2VsZWN0aW9uIiwiZSIsImtleUNvZGUiXSwibWFwcGluZ3MiOiJBQUNBLEdBQUlBLENBQUFBLFVBQVUsQ0FBRyxTQUFVQyxDQUFWLENBQWNDLENBQVEsQ0FBRyxJQUF6QixDQUErQkMsQ0FBUyxHQUF4QyxDQUFpRCxDQXNHOUQsUUFBU0MsQ0FBQUEsQ0FBVCxDQUEwQkMsQ0FBMUIsQ0FBZ0MsQ0FDNUIsR0FBSUMsQ0FBQUEsQ0FBVSxDQUFHLEVBQWpCLENBQ0FELENBQUksQ0FBQ0UsT0FBTCxDQUFhLFNBQVVDLENBQVYsQ0FBZ0IsQ0FDekJGLENBQVUsQ0FBQ0csSUFBWCxDQUFnQixDQUNaQyxLQUFLLENBQUVGLENBQUksQ0FBQ0csRUFEQSxDQUVaQyxJQUFJLENBQUVKLENBQUksQ0FBQyxRQUFVTCxDQUFTLENBQUcsSUFBTVUsQ0FBVCxDQUFnQixFQUFuQyxDQUFELENBRkUsQ0FBaEIsQ0FJSCxDQUxELENBRjRCLENBUTVCQyxDQUFRLENBQUNDLFNBQVQsQ0FBbUJULENBQW5CLENBQ0gsQ0FF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QW1CLENBQ2pELEdBQUlDLENBQUFBLENBQUksQ0FBRyxJQUFYLENBR0EsS0FBS3pCLEVBQUwsQ0FBUSxhQUFSLENBQXVCLFVBQVksQ0FDL0IsS0FBSzBCLDhCQUFMLEdBQ0gsQ0FGRCxDQUppRCxDQVFqRCxLQUFLQyxNQUFMLENBQWUsVUFBWSxDQUN2QixHQUFJQyxDQUFBQSxDQUFRLENBQUdILENBQUksQ0FBQ0UsTUFBcEIsQ0FDQSxNQUFPLFdBQVksT0FDcUMsV0FBaEQsUUFBUSxNQUFLRCw4QkFERixDQVVKRSxDQUFRLENBQUNOLEtBQVQsQ0FBZSxJQUFmLENBQXFCRixTQUFyQixDQVZJLEVBR1gsTUFBTyxNQUFLTSw4QkFIRCxDQUlKLENBQ0hHLEtBQUssQ0FBRSxFQURKLENBRUhDLEtBQUssQ0FBRSxFQUZKLENBR0hDLE1BQU0sQ0FBRSxFQUhMLENBSkksQ0FZbEIsQ0FDSixDQWZhLEVBZ0JqQixDQXhCRCxDLENBMEJBUixTQUFTLENBQUNDLE1BQVYsQ0FBaUIsdUJBQWpCLENBQTBDLFVBQW1CLENBQ3pELEdBQUlDLENBQUFBLENBQUksQ0FBRyxJQUFYLENBRUEsS0FBS08sZUFBTCxDQUF3QixVQUFZLENBQ2hDLEdBQUlKLENBQUFBLENBQVEsQ0FBR0gsQ0FBSSxDQUFDTyxlQUFwQixDQUVBLE1BQU8sVUFBVUMsQ0FBVixDQUFhLFNBQ1hBLENBQUQsRUFBb0IsQ0FBZCxHQUFBQSxDQUFDLENBQUNDLE9BREksR0FFTE4sQ0FBUSxDQUFDTixLQUFULENBQWUsSUFBZixDQUFxQkYsU0FBckIsQ0FJZCxDQUNKLENBVnNCLEVBVzFCLENBZEQsQyIsInNvdXJjZXNDb250ZW50IjpbIi8vQWpheCBzZWxlY3QgY29uc3RydWN0b3JcclxubGV0IGFqYXhTZWxlY3QgPSBmdW5jdGlvbiAoZWwsIHBhcmVudEVsID0gbnVsbCwgbXVsdGlMYW5nID0gdHJ1ZSkge1xyXG4gICAgbGV0IG1ldGhvZCA9IGVsLmRhdGEoJ21ldGhvZCcpLFxyXG4gICAgICAgIC8vIGRvbWFpbk5hbWUgPSAnaHR0cHM6Ly9kZXYzLnBhbmFtYS5rei8nLFxyXG4gICAgICAgIGRvbWFpbk5hbWUgPSAnJyxcclxuICAgICAgICBsYW5nID0gd2luZG93LkxhcmF2ZWwubGFuZyxcclxuICAgICAgICB1cmwgPSBkb2N1bWVudC5sb2NhdGlvbi5vcmlnaW4gKyAnLycgKyBsYW5nICsgJy8nICsgbWV0aG9kO1xyXG5cclxuICAgIGxldCBwYWdlQ291bnRlciA9IDEsXHJcbiAgICAgICAgbGFzdFBhZ2UgPSBmYWxzZSxcclxuICAgICAgICBsb2FkRW5hYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAvL2luaXQgU2VsZWN0aXplXHJcbiAgICBsZXQgc2VsZWN0ID0gZWwuc2VsZWN0aXplKHtcclxuICAgICAgICBwbHVnaW5zOiBlbFswXS5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJykgPyBbJ3JlbW92ZV9idXR0b24nLCAnc2lsZW50X3JlbW92ZScsICdzdG9wX2JhY2tzcGFjZV9kZWxldGUnXSA6IG51bGwsXHJcbiAgICAgICAgYWxsb3dFbXB0eU9wdGlvbjogdHJ1ZSxcclxuICAgICAgICBtYXhPcHRpb25zOiAxMDAwMCxcclxuICAgICAgICAvLyBzb3J0RmllbGQ6IFtcclxuICAgICAgICAvLyAgIHtcclxuICAgICAgICAvLyAgICAgZmllbGQ6ICd0ZXh0JyxcclxuICAgICAgICAvLyAgICAgZGlyZWN0aW9uOiAnYXNjJ1xyXG4gICAgICAgIC8vICAgfVxyXG4gICAgICAgIC8vIF0sXHJcbiAgICAgICAgb25Jbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxldCBhZGRpdGlvbmFsRGF0YSA9IHBhcmVudEVsID8gKHBhcmVudEVsLnZhbCgpID8geydwcm9mZXNzaW9ucyc6IHRvQXJyYXkocGFyZW50RWwudmFsKCkpfSA6IG51bGwpIDogbnVsbDtcclxuICAgICAgICAgICAgc2VuZFJlcXVlc3QoYWRkaXRpb25hbERhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy9mZXRjaCB0aGUgaW5zdGFuY2VcclxuICAgIGxldCBjb250cm9scyA9IHNlbGVjdFswXS5zZWxlY3RpemUsXHJcbiAgICAgICAgZHJvcGRvd25Db250ZW50ID0gY29udHJvbHMuJGRyb3Bkb3duX2NvbnRlbnQsXHJcbiAgICAgICAgbm9SZXN1bHRzRGVmYXVsdE1zZyA9IHtcclxuICAgICAgICAgICAgZW46ICdObyByZXN1bHRzJyxcclxuICAgICAgICAgICAgcnU6ICfQndC40YfQtdCz0L4g0L3QtSDQvdCw0LnQtNC10L3QvicsXHJcbiAgICAgICAgICAgIGtrOiAn0JXRiNGC0LXQvdC1INGC0LDQsdGL0LvQs9Cw0L0g0LbQvtC6J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm9SZXN1bHRzTXNnID0gY29udHJvbHMuJGlucHV0WzBdLmRhdGFzZXQubm9yZXN1bHRzID8gY29udHJvbHMuJGlucHV0WzBdLmRhdGFzZXQubm9yZXN1bHRzIDogbm9SZXN1bHRzRGVmYXVsdE1zZ1tsYW5nXTtcclxuXHJcbiAgICAvL09uIHR5cGUgZXZlbnRcclxuICAgIGNvbnRyb2xzLm9uKCd0eXBlJywgZGVsYXkoZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgIGxldCBhZGRpdGlvbmFsRGF0YSA9IHBhcmVudEVsID8gKHBhcmVudEVsLnZhbCgpID8geydwcm9mZXNzaW9ucyc6IHRvQXJyYXkocGFyZW50RWwudmFsKCkpfSA6IG51bGwpIDogbnVsbDtcclxuICAgICAgICBzZW5kUmVxdWVzdChhZGRpdGlvbmFsRGF0YSwgdmFsLCB0cnVlKTtcclxuICAgIH0sIDEwMDApKTtcclxuXHJcbiAgICBjb250cm9scy5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnRyb2xzLiRjb250cm9sX2lucHV0WzBdLnBsYWNlaG9sZGVyID0gZWxbMF0uYXR0cmlidXRlcy5wbGFjZWhvbGRlci52YWx1ZTtcclxuICAgICAgICBsb2FkRW5hYmxlID0gZmFsc2U7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxvYWRFbmFibGUgPSB0cnVlO1xyXG4gICAgICAgIH0sIDE1MCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb250cm9scy5vbignYmx1cicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb250cm9scy4kY29udHJvbFswXS5jbGFzc0xpc3QucmVtb3ZlKCduby1yZXN1bHRzJyk7XHJcbiAgICAgICAgcmVtb3ZlTWVzc2FnZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZHJvcGRvd25Db250ZW50Lm9uKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IGFkZGl0aW9uYWxEYXRhID0gcGFyZW50RWwgPyAocGFyZW50RWwudmFsKCkgPyB7J3Byb2Zlc3Npb25zJzogdG9BcnJheShwYXJlbnRFbC52YWwoKSl9IDogbnVsbCkgOiBudWxsO1xyXG4gICAgICAgIGxldCBweFRvQm90dG9tID0gZHJvcGRvd25Db250ZW50WzBdLnNjcm9sbEhlaWdodCAtIGRyb3Bkb3duQ29udGVudFswXS5zY3JvbGxUb3AgLSBkcm9wZG93bkNvbnRlbnRbMF0uY2xpZW50SGVpZ2h0O1xyXG4gICAgICAgIGlmIChweFRvQm90dG9tIDwgMTAwMCAmJiBsb2FkRW5hYmxlICYmICFsYXN0UGFnZSkge1xyXG4gICAgICAgICAgICBsb2FkRW5hYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNvbnRyb2xzLiRkcm9wZG93blswXS5jbGFzc0xpc3QuYWRkKCdsb2FkaW5nJyk7XHJcblxyXG4gICAgICAgICAgICBsZXQgc2Nyb2xsVG9wID0gZHJvcGRvd25Db250ZW50WzBdLnNjcm9sbFRvcDtcclxuXHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5hZGRpdGlvbmFsRGF0YSxcclxuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogY29udHJvbHMubGFzdFF1ZXJ5LFxyXG4gICAgICAgICAgICAgICAgICAgIFwicGFnZVwiOiBwYWdlQ291bnRlciArIDFcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZW5kZXJOZXdPcHRpb25zKHJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzLnJlZnJlc2hPcHRpb25zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZEVuYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUNvdW50ZXIrKztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzLiRkcm9wZG93blswXS5jbGFzc0xpc3QucmVtb3ZlKCdsb2FkaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMTUwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25Db250ZW50WzBdLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmN1cnJlbnRfcGFnZSA9PT0gcmVzcG9uc2UubGFzdF9wYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQYWdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghZWxbMF0uaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpKSB7XHJcbiAgICAgICAgY29udHJvbHMub24oJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb250cm9scy5jbGVhcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbmRlck5ld09wdGlvbnMoZGF0YSkge1xyXG4gICAgICAgIGxldCBuZXdPcHRpb25zID0gW107XHJcbiAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgIG5ld09wdGlvbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5pZCxcclxuICAgICAgICAgICAgICAgIHRleHQ6IGl0ZW1bXCJuYW1lXCIgKyAobXVsdGlMYW5nID8gJ18nICsgbGFuZyA6ICcnKV1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29udHJvbHMuYWRkT3B0aW9uKG5ld09wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVPbGRPcHRpb25zKCkge1xyXG4gICAgICAgIGxldCBzZWxlY3RlZFZhbHVlcyA9IFtdO1xyXG4gICAgICAgIE9iamVjdC52YWx1ZXMoY29udHJvbHMub3B0aW9ucykuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBzZWxlY3RlZFZhbHVlcy5wdXNoKGl0ZW0udmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnRyb2xzLnNldFZhbHVlKHNlbGVjdGVkVmFsdWVzKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhZGRNZXNzYWdlKCkge1xyXG4gICAgICAgIGxldCBtZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbWVzc2FnZS5jbGFzc05hbWUgPSAnbm9yZXN1bHRzLW1lc3NhZ2UnO1xyXG4gICAgICAgIG1lc3NhZ2UuaW5uZXJIVE1MID0gbm9SZXN1bHRzTXNnO1xyXG4gICAgICAgIGNvbnRyb2xzLiRjb250cm9sWzBdLnBhcmVudEVsZW1lbnQuYXBwZW5kKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZU1lc3NhZ2UoKSB7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSBjb250cm9scy4kY29udHJvbFswXS5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ub3Jlc3VsdHMtbWVzc2FnZScpO1xyXG4gICAgICAgIGlmIChtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGZvY3VzT25TZWFyY2hGaWVsZCh2YWwpIHtcclxuICAgICAgICBjb250cm9scy5zZXRUZXh0Ym94VmFsdWUodmFsKTtcclxuICAgICAgICBjb250cm9scy5mb2N1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZERlZmF1bHRPcHRpb24oKSB7XHJcbiAgICAgICAgY29udHJvbHMuYWRkT3B0aW9uKHtcclxuICAgICAgICAgICAgJG9yZGVyOiAwLFxyXG4gICAgICAgICAgICB2YWx1ZTogJycsXHJcbiAgICAgICAgICAgIHRleHQ6IGVsLmRhdGEoJ2RlZmF1bHQnKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNlbmRSZXF1ZXN0KGFkZGl0aW9uYWxEYXRhID0gbnVsbCwgc2VhcmNoVmFsdWUgPSAnJywgZm9jdXMgPSBmYWxzZSwgY2xlYXJPcHRpb25zID0gdHJ1ZSkge1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIC4uLmFkZGl0aW9uYWxEYXRhLFxyXG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IHNlYXJjaFZhbHVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNsZWFyT3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzLmNsZWFyT3B0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmxlbmd0aCAhPT0gMCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzYXZlT2xkT3B0aW9ucygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWwuZGF0YSgnZGVmYXVsdCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZERlZmF1bHRPcHRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlck5ld09wdGlvbnMocmVzcG9uc2UuZGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmb2N1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb2N1c09uU2VhcmNoRmllbGQoc2VhcmNoVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9scy4kY29udHJvbFswXS5jbGFzc0xpc3QuYWRkKCduby1yZXN1bHRzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHBhZ2VDb3VudGVyID0gMTtcclxuICAgICAgICAgICAgICAgIGxhc3RQYWdlID0gKHJlc3BvbnNlLmN1cnJlbnRfcGFnZSA9PT0gcmVzcG9uc2UubGFzdF9wYWdlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKGFkZGl0aW9uYWxEYXRhKSB7XHJcbiAgICAgICAgc2VuZFJlcXVlc3QoYWRkaXRpb25hbERhdGEpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNsZWFyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnRyb2xzLmNsZWFyKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucmVtb3ZlTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZW1vdmVNZXNzYWdlKCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4vL0RlbGF5IGZ1bmN0aW9uXHJcbmZ1bmN0aW9uIGRlbGF5KGNhbGxiYWNrLCBtcykge1xyXG4gICAgbGV0IHRpbWVyID0gMDtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XHJcbiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoY29udGV4dCwgYXJncyk7XHJcbiAgICAgICAgfSwgbXMgfHwgMCk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5TZWxlY3RpemUuZGVmaW5lKCdzaWxlbnRfcmVtb3ZlJywgZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIGxldCBzZWxmID0gdGhpcztcclxuXHJcbiAgICAvLyBkZWZhbmcgdGhlIGludGVybmFsIHNlYXJjaCBtZXRob2Qgd2hlbiByZW1vdmUgaGFzIGJlZW4gY2xpY2tlZFxyXG4gICAgdGhpcy5vbignaXRlbV9yZW1vdmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5wbHVnaW5fc2lsZW50X3JlbW92ZV9pbl9yZW1vdmUgPSB0cnVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zZWFyY2ggPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxldCBvcmlnaW5hbCA9IHNlbGYuc2VhcmNoO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKHRoaXMucGx1Z2luX3NpbGVudF9yZW1vdmVfaW5fcmVtb3ZlKSAhPSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAvLyByZS1lbmFibGUgbm9ybWFsIHNlYXJjaGluZ1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucGx1Z2luX3NpbGVudF9yZW1vdmVfaW5fcmVtb3ZlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuczogW11cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KSgpO1xyXG59KTtcclxuXHJcblNlbGVjdGl6ZS5kZWZpbmUoXCJzdG9wX2JhY2tzcGFjZV9kZWxldGVcIiwgZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIGxldCBzZWxmID0gdGhpcztcclxuXHJcbiAgICB0aGlzLmRlbGV0ZVNlbGVjdGlvbiA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IG9yaWdpbmFsID0gc2VsZi5kZWxldGVTZWxlY3Rpb247XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoIWUgfHwgZS5rZXlDb2RlICE9PSA4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICB9KSgpO1xyXG59KTsiXSwiZmlsZSI6ImFqYXgtc2VsZWN0LmpzIn0=
