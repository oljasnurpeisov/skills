let ajaxSelect=function(a,b=null,c=!0){function d(a){let b=[];a.forEach(function(a){b.push({value:a.id,text:a["name"+(c?"_"+j:"")]})}),p.addOption(b)}function e(){let a=[];Object.values(p.options).forEach(b=>{a.push(b.value)}),p.setValue(a)}function f(a){p.setTextboxValue(a),p.focus()}function g(){p.addOption({$order:0,value:"",text:a.data("default")})}function h(b=null,c="",h=!1,i=!0){$.ajax({type:"POST",url:k,data:{...b,name:c},success:function(b){i&&p.clearOptions(),e(),a.data("default")&&g(),d(b.data),h&&f(c),l=1,m=!1},error:function(a){console.log(a)}})}let i=a.data("method"),j=window.Laravel.lang,k="/"+j+"/"+i,l=1,m=!1,n=!0,o=a.selectize({plugins:a[0].hasAttribute("multiple")?["remove_button","silent_remove","stop_backspace_delete"]:null,allowEmptyOption:!0,maxOptions:1e4,onInitialize:function(){let a=b?b.val()?{professions:toArray(b.val())}:null:null;h(a)}}),p=o[0].selectize,q=p.$dropdown_content;p.on("type",delay(function(a){let c=b?b.val()?{professions:toArray(b.val())}:null:null;h(c,a,!0)},1e3)),p.on("change",function(){p.$control_input[0].placeholder=a[0].attributes.placeholder.value,console.log("clicked"),n=!1,setTimeout(function(){n=!0},150)}),q.on("scroll",function(){let a=b?b.val()?{professions:toArray(b.val())}:null:null,c=q[0].scrollHeight-q[0].scrollTop-q[0].clientHeight;if(1e3>c&&n&&!m){n=!1,console.log("start"),p.$dropdown[0].classList.add("loading");let b=q[0].scrollTop;$.ajax({type:"POST",url:k,data:{...a,name:p.lastQuery,page:l+1},success:function(a){d(a.data),p.refreshOptions(),n=!0,l++,setTimeout(function(){p.$dropdown[0].classList.remove("loading")},150),console.log("finish"),q[0].scrollTop=b,a.current_page===a.last_page&&(m=!0)},error:function(a){console.log(a)}})}}),a[0].hasAttribute("multiple")||p.on("focus",function(){p.clear()}),this.update=function(a){h(a)},this.clear=function(){p.clear()}};function delay(a,b){let c=0;return function(){let d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b||0)}}Selectize.define("silent_remove",function(){let a=this;this.on("item_remove",function(){this.plugin_silent_remove_in_remove=!0}),this.search=function(){let b=a.search;return function(){return"undefined"==typeof this.plugin_silent_remove_in_remove?b.apply(this,arguments):(delete this.plugin_silent_remove_in_remove,{items:{},query:[],tokens:[]})}}()}),Selectize.define("stop_backspace_delete",function(){let a=this;this.deleteSelection=function(){let b=a.deleteSelection;return function(a){return!(a&&8===a.keyCode)&&b.apply(this,arguments)}}()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXgtc2VsZWN0LmpzIl0sIm5hbWVzIjpbImFqYXhTZWxlY3QiLCJlbCIsInBhcmVudEVsIiwibXVsdGlMYW5nIiwicmVuZGVyTmV3T3B0aW9ucyIsImRhdGEiLCJuZXdPcHRpb25zIiwiZm9yRWFjaCIsIml0ZW0iLCJwdXNoIiwidmFsdWUiLCJpZCIsInRleHQiLCJsYW5nIiwiY29udHJvbHMiLCJhZGRPcHRpb24iLCJzYXZlT2xkT3B0aW9ucyIsInNlbGVjdGVkVmFsdWVzIiwiT2JqZWN0IiwidmFsdWVzIiwib3B0aW9ucyIsInNldFZhbHVlIiwiZm9jdXNPblNlYXJjaEZpZWxkIiwidmFsIiwic2V0VGV4dGJveFZhbHVlIiwiZm9jdXMiLCJhZGREZWZhdWx0T3B0aW9uIiwiJG9yZGVyIiwic2VuZFJlcXVlc3QiLCJhZGRpdGlvbmFsRGF0YSIsInNlYXJjaFZhbHVlIiwiY2xlYXJPcHRpb25zIiwiJCIsImFqYXgiLCJ0eXBlIiwidXJsIiwic3VjY2VzcyIsInJlc3BvbnNlIiwicGFnZUNvdW50ZXIiLCJsYXN0UGFnZSIsImVycm9yIiwiY29uc29sZSIsImxvZyIsIm1ldGhvZCIsIndpbmRvdyIsIkxhcmF2ZWwiLCJsb2FkRW5hYmxlIiwic2VsZWN0Iiwic2VsZWN0aXplIiwicGx1Z2lucyIsImhhc0F0dHJpYnV0ZSIsImFsbG93RW1wdHlPcHRpb24iLCJtYXhPcHRpb25zIiwib25Jbml0aWFsaXplIiwidG9BcnJheSIsImRyb3Bkb3duQ29udGVudCIsIiRkcm9wZG93bl9jb250ZW50Iiwib24iLCJkZWxheSIsIiRjb250cm9sX2lucHV0IiwicGxhY2Vob2xkZXIiLCJhdHRyaWJ1dGVzIiwic2V0VGltZW91dCIsInB4VG9Cb3R0b20iLCJzY3JvbGxIZWlnaHQiLCJzY3JvbGxUb3AiLCJjbGllbnRIZWlnaHQiLCIkZHJvcGRvd24iLCJjbGFzc0xpc3QiLCJhZGQiLCJsYXN0UXVlcnkiLCJyZWZyZXNoT3B0aW9ucyIsInJlbW92ZSIsImN1cnJlbnRfcGFnZSIsImxhc3RfcGFnZSIsImNsZWFyIiwidXBkYXRlIiwiY2FsbGJhY2siLCJtcyIsInRpbWVyIiwiY29udGV4dCIsImFyZ3MiLCJhcmd1bWVudHMiLCJjbGVhclRpbWVvdXQiLCJhcHBseSIsIlNlbGVjdGl6ZSIsImRlZmluZSIsInNlbGYiLCJwbHVnaW5fc2lsZW50X3JlbW92ZV9pbl9yZW1vdmUiLCJzZWFyY2giLCJvcmlnaW5hbCIsIml0ZW1zIiwicXVlcnkiLCJ0b2tlbnMiLCJkZWxldGVTZWxlY3Rpb24iLCJlIiwia2V5Q29kZSJdLCJtYXBwaW5ncyI6IkFBQ0EsR0FBSUEsQ0FBQUEsVUFBVSxDQUFHLFNBQVVDLENBQVYsQ0FBY0MsQ0FBUSxDQUFHLElBQXpCLENBQStCQyxDQUFTLEdBQXhDLENBQWlELENBOEZoRSxRQUFTQyxDQUFBQSxDQUFULENBQTBCQyxDQUExQixDQUFnQyxDQUM5QixHQUFJQyxDQUFBQSxDQUFVLENBQUcsRUFBakIsQ0FDQUQsQ0FBSSxDQUFDRSxPQUFMLENBQWEsU0FBVUMsQ0FBVixDQUFnQixDQUMzQkYsQ0FBVSxDQUFDRyxJQUFYLENBQWdCLENBQ2RDLEtBQUssQ0FBRUYsQ0FBSSxDQUFDRyxFQURFLENBRWRDLElBQUksQ0FBRUosQ0FBSSxDQUFDLFFBQVVMLENBQVMsQ0FBRyxJQUFNVSxDQUFULENBQWdCLEVBQW5DLENBQUQsQ0FGSSxDQUFoQixDQUlELENBTEQsQ0FGOEIsQ0FROUJDLENBQVEsQ0FBQ0MsU0FBVCxDQUFtQlQsQ0FBbkIsQ0FDRCxDQUVELFFBQVNVLENBQUFBLENBQVQsRUFBMEIsQ0FDeEIsR0FBSUMsQ0FBQUEsQ0FBYyxDQUFHLEVBQXJCLENBQ0FDLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjTCxDQUFRLENBQUNNLE9BQXZCLEVBQWdDYixPQUFoQyxDQUF5Q0MsQ0FBRCxFQUFVLENBQ2hEUyxDQUFjLENBQUNSLElBQWYsQ0FBb0JELENBQUksQ0FBQ0UsS0FBekIsQ0FDRCxDQUZELENBRndCLENBS3hCSSxDQUFRLENBQUNPLFFBQVQsQ0FBa0JKLENBQWxC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QUssQ0FBRSxFQUZGLENBR0xDLE1BQU0sQ0FBRSxFQUhILENBSk8sQ0FhakIsQ0FDRixDQWhCYSxFQWlCZixDQXpCRCxDLENBMkJBUixTQUFTLENBQUNDLE1BQVYsQ0FBaUIsdUJBQWpCLENBQTBDLFVBQW1CLENBQzNELEdBQUlDLENBQUFBLENBQUksQ0FBRyxJQUFYLENBRUEsS0FBS08sZUFBTCxDQUF3QixVQUFXLENBQ2pDLEdBQUlKLENBQUFBLENBQVEsQ0FBR0gsQ0FBSSxDQUFDTyxlQUFwQixDQUVBLE1BQU8sVUFBVUMsQ0FBVixDQUFhLFNBQ2JBLENBQUQsRUFBb0IsQ0FBZCxHQUFBQSxDQUFDLENBQUNDLE9BRE0sR0FFVE4sQ0FBUSxDQUFDTixLQUFULENBQWUsSUFBZixDQUFxQkYsU0FBckIsQ0FJVixDQUNGLENBVnNCLEVBV3hCLENBZEQsQyIsInNvdXJjZXNDb250ZW50IjpbIi8vQWpheCBzZWxlY3QgY29uc3RydWN0b3JcclxubGV0IGFqYXhTZWxlY3QgPSBmdW5jdGlvbiAoZWwsIHBhcmVudEVsID0gbnVsbCwgbXVsdGlMYW5nID0gdHJ1ZSkge1xyXG4gIGxldCBkb21haW5OYW1lID0gJ2h0dHBzOi8vZGV2My5wYW5hbWEua3ovJyxcclxuICAgIG1ldGhvZCA9IGVsLmRhdGEoJ21ldGhvZCcpLFxyXG4gICAgbGFuZyA9IHdpbmRvdy5MYXJhdmVsLmxhbmcsXHJcbiAgICB1cmwgPSBkb21haW5OYW1lICsgbGFuZyArICcvJyArIG1ldGhvZDtcclxuXHJcbiAgbGV0IHBhZ2VDb3VudGVyID0gMSxcclxuICAgIGxhc3RQYWdlID0gZmFsc2UsXHJcbiAgICBsb2FkRW5hYmxlID0gdHJ1ZTtcclxuXHJcbiAgLy9pbml0IFNlbGVjdGl6ZVxyXG4gIGxldCBzZWxlY3QgPSBlbC5zZWxlY3RpemUoe1xyXG4gICAgcGx1Z2luczogZWxbMF0uaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpID8gWydyZW1vdmVfYnV0dG9uJywgJ3NpbGVudF9yZW1vdmUnLCAnc3RvcF9iYWNrc3BhY2VfZGVsZXRlJ10gOiBudWxsLFxyXG4gICAgYWxsb3dFbXB0eU9wdGlvbjogdHJ1ZSxcclxuICAgIG1heE9wdGlvbnM6IDEwMDAwLFxyXG4gICAgLy8gc29ydEZpZWxkOiBbXHJcbiAgICAvLyAgIHtcclxuICAgIC8vICAgICBmaWVsZDogJ3RleHQnLFxyXG4gICAgLy8gICAgIGRpcmVjdGlvbjogJ2FzYydcclxuICAgIC8vICAgfVxyXG4gICAgLy8gXSxcclxuICAgIG9uSW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICBsZXQgYWRkaXRpb25hbERhdGEgPSBwYXJlbnRFbCA/IChwYXJlbnRFbC52YWwoKSA/IHsncHJvZmVzc2lvbnMnOiB0b0FycmF5KHBhcmVudEVsLnZhbCgpKX0gOiBudWxsKSA6IG51bGw7XHJcbiAgICAgIHNlbmRSZXF1ZXN0KGFkZGl0aW9uYWxEYXRhKTtcclxuICAgIH1cclxuICB9KTtcclxuICAvL2ZldGNoIHRoZSBpbnN0YW5jZVxyXG4gIGxldCBjb250cm9scyA9IHNlbGVjdFswXS5zZWxlY3RpemUsXHJcbiAgICBkcm9wZG93bkNvbnRlbnQgPSBjb250cm9scy4kZHJvcGRvd25fY29udGVudDtcclxuXHJcbiAgLy9PbiB0eXBlIGV2ZW50XHJcbiAgY29udHJvbHMub24oJ3R5cGUnLCBkZWxheShmdW5jdGlvbiAodmFsKSB7XHJcbiAgICBsZXQgYWRkaXRpb25hbERhdGEgPSBwYXJlbnRFbCA/IChwYXJlbnRFbC52YWwoKSA/IHsncHJvZmVzc2lvbnMnOiB0b0FycmF5KHBhcmVudEVsLnZhbCgpKX0gOiBudWxsKSA6IG51bGw7XHJcbiAgICBzZW5kUmVxdWVzdChhZGRpdGlvbmFsRGF0YSwgdmFsLCB0cnVlKTtcclxuICB9LCAxMDAwKSk7XHJcblxyXG4gIGNvbnRyb2xzLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb250cm9scy4kY29udHJvbF9pbnB1dFswXS5wbGFjZWhvbGRlciA9IGVsWzBdLmF0dHJpYnV0ZXMucGxhY2Vob2xkZXIudmFsdWU7XHJcbiAgICBjb25zb2xlLmxvZygnY2xpY2tlZCcpO1xyXG4gICAgbG9hZEVuYWJsZSA9IGZhbHNlO1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGxvYWRFbmFibGUgPSB0cnVlO1xyXG4gICAgfSwgMTUwKTtcclxuICB9KTtcclxuXHJcbiAgZHJvcGRvd25Db250ZW50Lm9uKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgYWRkaXRpb25hbERhdGEgPSBwYXJlbnRFbCA/IChwYXJlbnRFbC52YWwoKSA/IHsncHJvZmVzc2lvbnMnOiB0b0FycmF5KHBhcmVudEVsLnZhbCgpKX0gOiBudWxsKSA6IG51bGw7XHJcbiAgICBsZXQgcHhUb0JvdHRvbSA9IGRyb3Bkb3duQ29udGVudFswXS5zY3JvbGxIZWlnaHQgLSBkcm9wZG93bkNvbnRlbnRbMF0uc2Nyb2xsVG9wIC0gZHJvcGRvd25Db250ZW50WzBdLmNsaWVudEhlaWdodDtcclxuICAgIGlmIChweFRvQm90dG9tIDwgMTAwMCAmJiBsb2FkRW5hYmxlICYmICFsYXN0UGFnZSkge1xyXG4gICAgICBsb2FkRW5hYmxlID0gZmFsc2U7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdzdGFydCcpO1xyXG4gICAgICBjb250cm9scy4kZHJvcGRvd25bMF0uY2xhc3NMaXN0LmFkZCgnbG9hZGluZycpO1xyXG5cclxuICAgICAgbGV0IHNjcm9sbFRvcCA9IGRyb3Bkb3duQ29udGVudFswXS5zY3JvbGxUb3A7XHJcblxyXG4gICAgICAkLmFqYXgoe1xyXG4gICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAuLi5hZGRpdGlvbmFsRGF0YSxcclxuICAgICAgICAgIFwibmFtZVwiOiBjb250cm9scy5sYXN0UXVlcnksXHJcbiAgICAgICAgICBcInBhZ2VcIjogcGFnZUNvdW50ZXIgKyAxXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgIHJlbmRlck5ld09wdGlvbnMocmVzcG9uc2UuZGF0YSk7XHJcbiAgICAgICAgICBjb250cm9scy5yZWZyZXNoT3B0aW9ucygpO1xyXG4gICAgICAgICAgbG9hZEVuYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICBwYWdlQ291bnRlcisrO1xyXG5cclxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb250cm9scy4kZHJvcGRvd25bMF0uY2xhc3NMaXN0LnJlbW92ZSgnbG9hZGluZycpO1xyXG4gICAgICAgICAgfSwgMTUwKTtcclxuXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnZmluaXNoJyk7XHJcblxyXG4gICAgICAgICAgZHJvcGRvd25Db250ZW50WzBdLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcclxuXHJcbiAgICAgICAgICBpZiAocmVzcG9uc2UuY3VycmVudF9wYWdlID09PSByZXNwb25zZS5sYXN0X3BhZ2UpIHtcclxuICAgICAgICAgICAgbGFzdFBhZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBpZiAoIWVsWzBdLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKSkge1xyXG4gICAgY29udHJvbHMub24oJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBjb250cm9scy5jbGVhcigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJOZXdPcHRpb25zKGRhdGEpIHtcclxuICAgIGxldCBuZXdPcHRpb25zID0gW107XHJcbiAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgbmV3T3B0aW9ucy5wdXNoKHtcclxuICAgICAgICB2YWx1ZTogaXRlbS5pZCxcclxuICAgICAgICB0ZXh0OiBpdGVtW1wibmFtZVwiICsgKG11bHRpTGFuZyA/ICdfJyArIGxhbmcgOiAnJyldXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBjb250cm9scy5hZGRPcHRpb24obmV3T3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzYXZlT2xkT3B0aW9ucygpIHtcclxuICAgIGxldCBzZWxlY3RlZFZhbHVlcyA9IFtdO1xyXG4gICAgT2JqZWN0LnZhbHVlcyhjb250cm9scy5vcHRpb25zKS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHNlbGVjdGVkVmFsdWVzLnB1c2goaXRlbS52YWx1ZSk7XHJcbiAgICB9KTtcclxuICAgIGNvbnRyb2xzLnNldFZhbHVlKHNlbGVjdGVkVmFsdWVzKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGZvY3VzT25TZWFyY2hGaWVsZCh2YWwpIHtcclxuICAgIGNvbnRyb2xzLnNldFRleHRib3hWYWx1ZSh2YWwpO1xyXG4gICAgY29udHJvbHMuZm9jdXMoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFkZERlZmF1bHRPcHRpb24oKSB7XHJcbiAgICBjb250cm9scy5hZGRPcHRpb24oe1xyXG4gICAgICAkb3JkZXI6IDAsXHJcbiAgICAgIHZhbHVlOiAnJyxcclxuICAgICAgdGV4dDogZWwuZGF0YSgnZGVmYXVsdCcpXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNlbmRSZXF1ZXN0KGFkZGl0aW9uYWxEYXRhID0gbnVsbCwgc2VhcmNoVmFsdWUgPSAnJywgZm9jdXMgPSBmYWxzZSwgY2xlYXJPcHRpb25zID0gdHJ1ZSkge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICB1cmw6IHVybCxcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIC4uLmFkZGl0aW9uYWxEYXRhLFxyXG4gICAgICAgIFwibmFtZVwiOiBzZWFyY2hWYWx1ZVxyXG4gICAgICB9LFxyXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICBpZiAoY2xlYXJPcHRpb25zKSB7XHJcbiAgICAgICAgICBjb250cm9scy5jbGVhck9wdGlvbnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNhdmVPbGRPcHRpb25zKCk7XHJcblxyXG4gICAgICAgIGlmIChlbC5kYXRhKCdkZWZhdWx0JykpIHtcclxuICAgICAgICAgIGFkZERlZmF1bHRPcHRpb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlbmRlck5ld09wdGlvbnMocmVzcG9uc2UuZGF0YSk7XHJcblxyXG4gICAgICAgIGlmIChmb2N1cykge1xyXG4gICAgICAgICAgZm9jdXNPblNlYXJjaEZpZWxkKHNlYXJjaFZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHBhZ2VDb3VudGVyID0gMTtcclxuICAgICAgICBsYXN0UGFnZSA9IGZhbHNlO1xyXG4gICAgICB9LFxyXG4gICAgICBlcnJvcjogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uIChhZGRpdGlvbmFsRGF0YSkge1xyXG4gICAgc2VuZFJlcXVlc3QoYWRkaXRpb25hbERhdGEpO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb250cm9scy5jbGVhcigpO1xyXG4gIH07XHJcbn07XHJcblxyXG4vL0RlbGF5IGZ1bmN0aW9uXHJcbmZ1bmN0aW9uIGRlbGF5KGNhbGxiYWNrLCBtcykge1xyXG4gIGxldCB0aW1lciA9IDA7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cztcclxuICAgIGNsZWFyVGltZW91dCh0aW1lcik7XHJcbiAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICBjYWxsYmFjay5hcHBseShjb250ZXh0LCBhcmdzKTtcclxuICAgIH0sIG1zIHx8IDApO1xyXG4gIH07XHJcbn1cclxuXHJcblNlbGVjdGl6ZS5kZWZpbmUoJ3NpbGVudF9yZW1vdmUnLCBmdW5jdGlvbihvcHRpb25zKXtcclxuICBsZXQgc2VsZiA9IHRoaXM7XHJcblxyXG4gIC8vIGRlZmFuZyB0aGUgaW50ZXJuYWwgc2VhcmNoIG1ldGhvZCB3aGVuIHJlbW92ZSBoYXMgYmVlbiBjbGlja2VkXHJcbiAgdGhpcy5vbignaXRlbV9yZW1vdmUnLCBmdW5jdGlvbigpe1xyXG4gICAgdGhpcy5wbHVnaW5fc2lsZW50X3JlbW92ZV9pbl9yZW1vdmUgPSB0cnVlO1xyXG4gIH0pO1xyXG5cclxuICB0aGlzLnNlYXJjaCA9IChmdW5jdGlvbigpIHtcclxuICAgIGxldCBvcmlnaW5hbCA9IHNlbGYuc2VhcmNoO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAodHlwZW9mKHRoaXMucGx1Z2luX3NpbGVudF9yZW1vdmVfaW5fcmVtb3ZlKSAhPSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgLy8gcmUtZW5hYmxlIG5vcm1hbCBzZWFyY2hpbmdcclxuICAgICAgICBkZWxldGUgdGhpcy5wbHVnaW5fc2lsZW50X3JlbW92ZV9pbl9yZW1vdmU7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGl0ZW1zOiB7fSxcclxuICAgICAgICAgIHF1ZXJ5OiBbXSxcclxuICAgICAgICAgIHRva2VuczogW11cclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH0pKCk7XHJcbn0pO1xyXG5cclxuU2VsZWN0aXplLmRlZmluZShcInN0b3BfYmFja3NwYWNlX2RlbGV0ZVwiLCBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gIGxldCBzZWxmID0gdGhpcztcclxuXHJcbiAgdGhpcy5kZWxldGVTZWxlY3Rpb24gPSAoZnVuY3Rpb24oKSB7XHJcbiAgICBsZXQgb3JpZ2luYWwgPSBzZWxmLmRlbGV0ZVNlbGVjdGlvbjtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgaWYgKCFlIHx8IGUua2V5Q29kZSAhPT0gOCkge1xyXG4gICAgICAgIHJldHVybiBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gIH0pKCk7XHJcbn0pOyJdLCJmaWxlIjoiYWpheC1zZWxlY3QuanMifQ==
