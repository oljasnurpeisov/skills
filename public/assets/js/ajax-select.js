let ajaxSelect=function(a,b=null,c=!0){function d(a){let b=[];a.forEach(function(a){b.push({value:a.id,text:a["name"+(c?"_"+j:"")]})}),m.addOption(b)}function e(){let a=[];Object.values(m.options).forEach(b=>{a.push(b.value)}),m.setValue(a)}function f(a){m.setTextboxValue(a),m.focus()}function g(){m.addOption({$order:0,value:"",text:a.data("default")})}function h(b=null,c="",h=!1){$.ajax({type:"POST",url:k,data:{...b,name:c},success:function(b){m.clearOptions(),e(),a.data("default")&&g(),d(b),h&&f(c)},error:function(a){console.log(a)}})}const i=a.data("method"),j=window.Laravel.lang,k="https://dev3.panama.kz/"+j+"/"+i;let l=a.selectize({plugins:a[0].hasAttribute("multiple")?["remove_button","silent_remove","stop_backspace_delete"]:null,allowEmptyOption:!0,onInitialize:function(){let a=b?b.val()?{professions:toArray(b.val())}:null:null;h(a)}}),m=l[0].selectize;m.on("type",delay(function(a){let c=b?b.val()?{professions:toArray(b.val())}:null:null;h(c,a,!0)},600)),m.on("change",function(){m.$control_input[0].placeholder=a[0].attributes.placeholder.value}),a[0].hasAttribute("multiple")||m.on("focus",function(){m.clear()}),this.update=function(a){h(a)}};function delay(a,b){let c=0;return function(){let d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b||0)}}Selectize.define("silent_remove",function(){let a=this;this.on("item_remove",function(){this.plugin_silent_remove_in_remove=!0}),this.search=function(){let b=a.search;return function(){return"undefined"==typeof this.plugin_silent_remove_in_remove?b.apply(this,arguments):(delete this.plugin_silent_remove_in_remove,{items:{},query:[],tokens:[]})}}()}),Selectize.define("stop_backspace_delete",function(){let a=this;this.deleteSelection=function(){let b=a.deleteSelection;return function(a){return!(a&&8===a.keyCode)&&b.apply(this,arguments)}}()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXgtc2VsZWN0LmpzIl0sIm5hbWVzIjpbImFqYXhTZWxlY3QiLCJlbCIsInBhcmVudEVsIiwibXVsdGlMYW5nIiwicmVuZGVyTmV3T3B0aW9ucyIsImRhdGEiLCJuZXdPcHRpb25zIiwiZm9yRWFjaCIsIml0ZW0iLCJwdXNoIiwidmFsdWUiLCJpZCIsInRleHQiLCJsYW5nIiwiY29udHJvbHMiLCJhZGRPcHRpb24iLCJzYXZlT2xkT3B0aW9ucyIsInNlbGVjdGVkVmFsdWVzIiwiT2JqZWN0IiwidmFsdWVzIiwib3B0aW9ucyIsInNldFZhbHVlIiwiZm9jdXNPblNlYXJjaEZpZWxkIiwidmFsIiwic2V0VGV4dGJveFZhbHVlIiwiZm9jdXMiLCJhZGREZWZhdWx0T3B0aW9uIiwiJG9yZGVyIiwic2VuZFJlcXVlc3QiLCJhZGRpdGlvbmFsRGF0YSIsInNlYXJjaFZhbHVlIiwiJCIsImFqYXgiLCJ0eXBlIiwidXJsIiwic3VjY2VzcyIsImNsZWFyT3B0aW9ucyIsImVycm9yIiwiY29uc29sZSIsImxvZyIsIm1ldGhvZCIsIndpbmRvdyIsIkxhcmF2ZWwiLCJzZWxlY3QiLCJzZWxlY3RpemUiLCJwbHVnaW5zIiwiaGFzQXR0cmlidXRlIiwiYWxsb3dFbXB0eU9wdGlvbiIsIm9uSW5pdGlhbGl6ZSIsInRvQXJyYXkiLCJvbiIsImRlbGF5IiwiJGNvbnRyb2xfaW5wdXQiLCJwbGFjZWhvbGRlciIsImF0dHJpYnV0ZXMiLCJjbGVhciIsInVwZGF0ZSIsImNhbGxiYWNrIiwibXMiLCJ0aW1lciIsImNvbnRleHQiLCJhcmdzIiwiYXJndW1lbnRzIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImFwcGx5IiwiU2VsZWN0aXplIiwiZGVmaW5lIiwic2VsZiIsInBsdWdpbl9zaWxlbnRfcmVtb3ZlX2luX3JlbW92ZSIsInNlYXJjaCIsIm9yaWdpbmFsIiwiaXRlbXMiLCJxdWVyeSIsInRva2VucyIsImRlbGV0ZVNlbGVjdGlvbiIsImUiLCJrZXlDb2RlIl0sIm1h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SSxDQUFHLElBQVgsQ0FFQSxLQUFLTyxlQUFMLENBQXdCLFVBQVcsQ0FDakMsR0FBSUosQ0FBQUEsQ0FBUSxDQUFHSCxDQUFJLENBQUNPLGVBQXBCLENBRUEsTUFBTyxVQUFVQyxDQUFWLENBQWEsU0FDYkEsQ0FBRCxFQUFvQixDQUFkLEdBQUFBLENBQUMsQ0FBQ0MsT0FETSxHQUVUTixDQUFRLENBQUNOLEtBQVQsQ0FBZSxJQUFmLENBQXFCSCxTQUFyQixDQUlWLENBQ0YsQ0FWc0IsRUFXeEIsQ0FkRCxDIiwic291cmNlc0NvbnRlbnQiOlsiLy9BamF4IHNlbGVjdCBjb25zdHJ1Y3RvclxyXG5sZXQgYWpheFNlbGVjdCA9IGZ1bmN0aW9uIChlbCwgcGFyZW50RWwgPSBudWxsLCBtdWx0aUxhbmcgPSB0cnVlKSB7XHJcbiAgY29uc3QgZG9tYWluTmFtZSA9ICdodHRwczovL2RldjMucGFuYW1hLmt6LycsXHJcbiAgICBtZXRob2QgPSBlbC5kYXRhKCdtZXRob2QnKSxcclxuICAgIGxhbmcgPSB3aW5kb3cuTGFyYXZlbC5sYW5nLFxyXG4gICAgdXJsID0gZG9tYWluTmFtZSArIGxhbmcgKyAnLycgKyBtZXRob2Q7XHJcblxyXG4gIC8vaW5pdCBTZWxlY3RpemVcclxuICBsZXQgc2VsZWN0ID0gZWwuc2VsZWN0aXplKHtcclxuICAgIHBsdWdpbnM6IGVsWzBdLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKSA/IFsncmVtb3ZlX2J1dHRvbicsICdzaWxlbnRfcmVtb3ZlJywgJ3N0b3BfYmFja3NwYWNlX2RlbGV0ZSddIDogbnVsbCxcclxuICAgIGFsbG93RW1wdHlPcHRpb246IHRydWUsXHJcbiAgICAvLyBzb3J0RmllbGQ6IFtcclxuICAgIC8vICAge1xyXG4gICAgLy8gICAgIGZpZWxkOiAndGV4dCcsXHJcbiAgICAvLyAgICAgZGlyZWN0aW9uOiAnYXNjJ1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyBdLFxyXG4gICAgb25Jbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGxldCBhZGRpdGlvbmFsRGF0YSA9IHBhcmVudEVsID8gKHBhcmVudEVsLnZhbCgpID8geydwcm9mZXNzaW9ucyc6IHRvQXJyYXkocGFyZW50RWwudmFsKCkpfSA6IG51bGwpIDogbnVsbDtcclxuICAgICAgc2VuZFJlcXVlc3QoYWRkaXRpb25hbERhdGEpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIC8vZmV0Y2ggdGhlIGluc3RhbmNlXHJcbiAgbGV0IGNvbnRyb2xzID0gc2VsZWN0WzBdLnNlbGVjdGl6ZTtcclxuXHJcbiAgLy9PbiB0eXBlIGV2ZW50XHJcbiAgY29udHJvbHMub24oJ3R5cGUnLCBkZWxheShmdW5jdGlvbiAodmFsKSB7XHJcbiAgICBsZXQgYWRkaXRpb25hbERhdGEgPSBwYXJlbnRFbCA/IChwYXJlbnRFbC52YWwoKSA/IHsncHJvZmVzc2lvbnMnOiB0b0FycmF5KHBhcmVudEVsLnZhbCgpKX0gOiBudWxsKSA6IG51bGw7XHJcbiAgICBzZW5kUmVxdWVzdChhZGRpdGlvbmFsRGF0YSwgdmFsLCB0cnVlKTtcclxuICB9LCA2MDApKTtcclxuXHJcbiAgY29udHJvbHMub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnRyb2xzLiRjb250cm9sX2lucHV0WzBdLnBsYWNlaG9sZGVyID0gZWxbMF0uYXR0cmlidXRlcy5wbGFjZWhvbGRlci52YWx1ZVxyXG4gIH0pO1xyXG5cclxuICBpZiAoIWVsWzBdLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKSkge1xyXG4gICAgY29udHJvbHMub24oJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBjb250cm9scy5jbGVhcigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uIChhZGRpdGlvbmFsRGF0YSkge1xyXG4gICAgc2VuZFJlcXVlc3QoYWRkaXRpb25hbERhdGEpO1xyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlck5ld09wdGlvbnMoZGF0YSkge1xyXG4gICAgbGV0IG5ld09wdGlvbnMgPSBbXTtcclxuICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICBuZXdPcHRpb25zLnB1c2goe1xyXG4gICAgICAgIHZhbHVlOiBpdGVtLmlkLFxyXG4gICAgICAgIHRleHQ6IGl0ZW1bXCJuYW1lXCIgKyAobXVsdGlMYW5nID8gJ18nICsgbGFuZyA6ICcnKV1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIGNvbnRyb2xzLmFkZE9wdGlvbihuZXdPcHRpb25zKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNhdmVPbGRPcHRpb25zKCkge1xyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWVzID0gW107XHJcbiAgICBPYmplY3QudmFsdWVzKGNvbnRyb2xzLm9wdGlvbnMpLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgc2VsZWN0ZWRWYWx1ZXMucHVzaChpdGVtLnZhbHVlKTtcclxuICAgIH0pO1xyXG4gICAgY29udHJvbHMuc2V0VmFsdWUoc2VsZWN0ZWRWYWx1ZXMpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZm9jdXNPblNlYXJjaEZpZWxkKHZhbCkge1xyXG4gICAgY29udHJvbHMuc2V0VGV4dGJveFZhbHVlKHZhbCk7XHJcbiAgICBjb250cm9scy5mb2N1cygpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWRkRGVmYXVsdE9wdGlvbigpIHtcclxuICAgIGNvbnRyb2xzLmFkZE9wdGlvbih7XHJcbiAgICAgICRvcmRlcjogMCxcclxuICAgICAgdmFsdWU6ICcnLFxyXG4gICAgICB0ZXh0OiBlbC5kYXRhKCdkZWZhdWx0JylcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2VuZFJlcXVlc3QoYWRkaXRpb25hbERhdGEgPSBudWxsLCBzZWFyY2hWYWx1ZSA9ICcnLCBmb2N1cyA9IGZhbHNlKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgIHVybDogdXJsLFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgLi4uYWRkaXRpb25hbERhdGEsXHJcbiAgICAgICAgXCJuYW1lXCI6IHNlYXJjaFZhbHVlXHJcbiAgICAgIH0sXHJcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgY29udHJvbHMuY2xlYXJPcHRpb25zKCk7XHJcblxyXG4gICAgICAgIHNhdmVPbGRPcHRpb25zKCk7XHJcblxyXG4gICAgICAgIGlmIChlbC5kYXRhKCdkZWZhdWx0JykpIHtcclxuICAgICAgICAgIGFkZERlZmF1bHRPcHRpb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlbmRlck5ld09wdGlvbnMoZGF0YSk7XHJcblxyXG4gICAgICAgIGlmIChmb2N1cykge1xyXG4gICAgICAgICAgZm9jdXNPblNlYXJjaEZpZWxkKHNlYXJjaFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vL0RlbGF5IGZ1bmN0aW9uXHJcbmZ1bmN0aW9uIGRlbGF5KGNhbGxiYWNrLCBtcykge1xyXG4gIGxldCB0aW1lciA9IDA7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cztcclxuICAgIGNsZWFyVGltZW91dCh0aW1lcik7XHJcbiAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICBjYWxsYmFjay5hcHBseShjb250ZXh0LCBhcmdzKTtcclxuICAgIH0sIG1zIHx8IDApO1xyXG4gIH07XHJcbn1cclxuXHJcblNlbGVjdGl6ZS5kZWZpbmUoJ3NpbGVudF9yZW1vdmUnLCBmdW5jdGlvbihvcHRpb25zKXtcclxuICBsZXQgc2VsZiA9IHRoaXM7XHJcblxyXG4gIC8vIGRlZmFuZyB0aGUgaW50ZXJuYWwgc2VhcmNoIG1ldGhvZCB3aGVuIHJlbW92ZSBoYXMgYmVlbiBjbGlja2VkXHJcbiAgdGhpcy5vbignaXRlbV9yZW1vdmUnLCBmdW5jdGlvbigpe1xyXG4gICAgdGhpcy5wbHVnaW5fc2lsZW50X3JlbW92ZV9pbl9yZW1vdmUgPSB0cnVlO1xyXG4gIH0pO1xyXG5cclxuICB0aGlzLnNlYXJjaCA9IChmdW5jdGlvbigpIHtcclxuICAgIGxldCBvcmlnaW5hbCA9IHNlbGYuc2VhcmNoO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAodHlwZW9mKHRoaXMucGx1Z2luX3NpbGVudF9yZW1vdmVfaW5fcmVtb3ZlKSAhPSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgLy8gcmUtZW5hYmxlIG5vcm1hbCBzZWFyY2hpbmdcclxuICAgICAgICBkZWxldGUgdGhpcy5wbHVnaW5fc2lsZW50X3JlbW92ZV9pbl9yZW1vdmU7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGl0ZW1zOiB7fSxcclxuICAgICAgICAgIHF1ZXJ5OiBbXSxcclxuICAgICAgICAgIHRva2VuczogW11cclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH0pKCk7XHJcbn0pO1xyXG5cclxuU2VsZWN0aXplLmRlZmluZShcInN0b3BfYmFja3NwYWNlX2RlbGV0ZVwiLCBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gIGxldCBzZWxmID0gdGhpcztcclxuXHJcbiAgdGhpcy5kZWxldGVTZWxlY3Rpb24gPSAoZnVuY3Rpb24oKSB7XHJcbiAgICBsZXQgb3JpZ2luYWwgPSBzZWxmLmRlbGV0ZVNlbGVjdGlvbjtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgaWYgKCFlIHx8IGUua2V5Q29kZSAhPT0gOCkge1xyXG4gICAgICAgIHJldHVybiBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gIH0pKCk7XHJcbn0pOyJdLCJmaWxlIjoiYWpheC1zZWxlY3QuanMifQ==
