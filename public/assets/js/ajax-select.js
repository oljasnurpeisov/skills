let ajaxSelect=function(a,b=null,c=!0){function d(a){let b=[];a.forEach(function(a){b.push({value:a.id,text:a["name"+(c?"_"+l:"")]})}),r.addOption(b)}function e(){let a=[];Object.values(r.options).forEach(b=>{a.push(b.value)}),r.setValue(a)}function f(){let a=document.createElement("div");a.className="noresults-message",a.innerHTML=t,r.$control[0].parentElement.append(a)}function g(){let a=r.$control[0].parentElement.querySelector(".noresults-message");a&&a.remove()}function h(a){r.setTextboxValue(a),r.focus()}function i(){r.addOption({$order:0,value:"",text:a.data("default")})}function j(b=null,c="",j=!1,k=!0){$.ajax({type:"POST",url:m,data:{...b,name:c},success:function(b){k&&r.clearOptions(),0===b.data.length?(r.$control[0].classList.add("no-results"),f()):(e(),a.data("default")&&i(),d(b.data),j&&h(c),g()),n=1,o=b.current_page===b.last_page},error:function(a){console.log(a)}})}let k=a.data("method"),l=window.Laravel.lang,m=""+l+"/"+k,n=1,o=!1,p=!0,q=a.selectize({plugins:a[0].hasAttribute("multiple")?["remove_button","silent_remove","stop_backspace_delete"]:null,allowEmptyOption:!0,maxOptions:1e4,onInitialize:function(){let a=b?b.val()?{professions:toArray(b.val())}:null:null;j(a)}}),r=q[0].selectize,s=r.$dropdown_content,t=r.$input[0].dataset.noresults?r.$input[0].dataset.noresults:{en:"No results",ru:"\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E",kk:"\u0415\u0448\u0442\u0435\u043D\u0435 \u0442\u0430\u0431\u044B\u043B\u0433\u0430\u043D \u0436\u043E\u043A"}[l];r.on("type",delay(function(a){let c=b?b.val()?{professions:toArray(b.val())}:null:null;j(c,a,!0)},1e3)),r.on("change",function(){r.$control_input[0].placeholder=a[0].attributes.placeholder.value,p=!1,setTimeout(function(){p=!0},150)}),r.on("blur",function(){r.$control[0].classList.remove("no-results"),g()}),s.on("scroll",function(){let a=b?b.val()?{professions:toArray(b.val())}:null:null,c=s[0].scrollHeight-s[0].scrollTop-s[0].clientHeight;if(1e3>c&&p&&!o){p=!1,r.$dropdown[0].classList.add("loading");let b=s[0].scrollTop;$.ajax({type:"POST",url:m,data:{...a,name:r.lastQuery,page:n+1},success:function(a){d(a.data),r.refreshOptions(),p=!0,n++,setTimeout(function(){r.$dropdown[0].classList.remove("loading")},150),s[0].scrollTop=b,a.current_page===a.last_page&&(o=!0)},error:function(a){console.log(a)}})}}),a[0].hasAttribute("multiple")||r.on("focus",function(){r.clear()}),this.update=function(a){j(a)},this.clear=function(){r.clear()},this.removeMessage=function(){g()}};function delay(a,b){let c=0;return function(){let d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b||0)}}Selectize.define("silent_remove",function(){let a=this;this.on("item_remove",function(){this.plugin_silent_remove_in_remove=!0}),this.search=function(){let b=a.search;return function(){return"undefined"==typeof this.plugin_silent_remove_in_remove?b.apply(this,arguments):(delete this.plugin_silent_remove_in_remove,{items:{},query:[],tokens:[]})}}()}),Selectize.define("stop_backspace_delete",function(){let a=this;this.deleteSelection=function(){let b=a.deleteSelection;return function(a){return!(a&&8===a.keyCode)&&b.apply(this,arguments)}}()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXgtc2VsZWN0LmpzIl0sIm5hbWVzIjpbImFqYXhTZWxlY3QiLCJlbCIsInBhcmVudEVsIiwibXVsdGlMYW5nIiwicmVuZGVyTmV3T3B0aW9ucyIsImRhdGEiLCJuZXdPcHRpb25zIiwiZm9yRWFjaCIsIml0ZW0iLCJwdXNoIiwidmFsdWUiLCJpZCIsInRleHQiLCJsYW5nIiwiY29udHJvbHMiLCJhZGRPcHRpb24iLCJzYXZlT2xkT3B0aW9ucyIsInNlbGVjdGVkVmFsdWVzIiwiT2JqZWN0IiwidmFsdWVzIiwib3B0aW9ucyIsInNldFZhbHVlIiwiYWRkTWVzc2FnZSIsIm1lc3NhZ2UiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJpbm5lckhUTUwiLCJub1Jlc3VsdHNNc2ciLCIkY29udHJvbCIsInBhcmVudEVsZW1lbnQiLCJhcHBlbmQiLCJyZW1vdmVNZXNzYWdlIiwicXVlcnlTZWxlY3RvciIsInJlbW92ZSIsImZvY3VzT25TZWFyY2hGaWVsZCIsInZhbCIsInNldFRleHRib3hWYWx1ZSIsImZvY3VzIiwiYWRkRGVmYXVsdE9wdGlvbiIsIiRvcmRlciIsInNlbmRSZXF1ZXN0IiwiYWRkaXRpb25hbERhdGEiLCJzZWFyY2hWYWx1ZSIsImNsZWFyT3B0aW9ucyIsIiQiLCJhamF4IiwidHlwZSIsInVybCIsInN1Y2Nlc3MiLCJyZXNwb25zZSIsImxlbmd0aCIsImNsYXNzTGlzdCIsImFkZCIsInBhZ2VDb3VudGVyIiwibGFzdFBhZ2UiLCJjdXJyZW50X3BhZ2UiLCJsYXN0X3BhZ2UiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJtZXRob2QiLCJ3aW5kb3ciLCJMYXJhdmVsIiwibG9hZEVuYWJsZSIsInNlbGVjdCIsInNlbGVjdGl6ZSIsInBsdWdpbnMiLCJoYXNBdHRyaWJ1dGUiLCJhbGxvd0VtcHR5T3B0aW9uIiwibWF4T3B0aW9ucyIsIm9uSW5pdGlhbGl6ZSIsInRvQXJyYXkiLCJkcm9wZG93bkNvbnRlbnQiLCIkZHJvcGRvd25fY29udGVudCIsIiRpbnB1dCIsImRhdGFzZXQiLCJub3Jlc3VsdHMiLCJlbiIsInJ1Iiwia2siLCJvbiIsImRlbGF5IiwiJGNvbnRyb2xfaW5wdXQiLCJwbGFjZWhvbGRlciIsImF0dHJpYnV0ZXMiLCJzZXRUaW1lb3V0IiwicHhUb0JvdHRvbSIsInNjcm9sbEhlaWdodCIsInNjcm9sbFRvcCIsImNsaWVudEhlaWdodCIsIiRkcm9wZG93biIsImxhc3RRdWVyeSIsInJlZnJlc2hPcHRpb25zIiwiY2xlYXIiLCJ1cGRhdGUiLCJjYWxsYmFjayIsIm1zIiwidGltZXIiLCJjb250ZXh0IiwiYXJncyIsImFyZ3VtZW50cyIsImNsZWFyVGltZW91dCIsImFwcGx5IiwiU2VsZWN0aXplIiwiZGVmaW5lIiwic2VsZiIsInBsdWdpbl9zaWxlbnRfcmVtb3ZlX2luX3JlbW92ZSIsInNlYXJjaCIsIm9yaWdpbmFsIiwiaXRlbXMiLCJxdWVyeSIsInRva2VucyIsImRlbGV0ZVNlbGVjdGlvbiIsImUiLCJrZXlDb2RlIl0sIm1hcHBpbmdzIjoiQUFDQSxHQUFJQSxDQUFBQSxVQUFVLENBQUcsU0FBVUMsQ0FBVixDQUFjQyxDQUFRLENBQUcsSUFBekIsQ0FBK0JDLENBQVMsR0FBeEMsQ0FBaUQsQ0FzRzlELFFBQVNDLENBQUFBLENBQVQsQ0FBMEJDLENBQTFCLENBQWdDLENBQzVCLEdBQUlDLENBQUFBLENBQVUsQ0FBRyxFQUFqQixDQUNBRCxDQUFJLENBQUNFLE9BQUwsQ0FBYSxTQUFVQyxDQUFWLENBQWdCLENBQ3pCRixDQUFVLENBQUNHLElBQVgsQ0FBZ0IsQ0FDWkMsS0FBSyxDQUFFRixDQUFJLENBQUNHLEVBREEsQ0FFWkMsSUFBSSxDQUFFSixDQUFJLENBQUMsUUFBVUwsQ0FBUyxDQUFHLElBQU1VLENBQVQsQ0FBZ0IsRUFBbkMsQ0FBRCxDQUZFLENBQWhCLENBSUgsQ0FMRCxDQUY0QixDQVE1QkMsQ0FBUSxDQUFDQyxTQUFULENBQW1CVCxDQUFuQixDQUNILENBRUQsUUFBU1UsQ0FBQUEsQ0FBVCxF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QUF1QixVQUFZLENBQy9CLEtBQUswQiw4QkFBTCxHQUNILENBRkQsQ0FKaUQsQ0FRakQsS0FBS0MsTUFBTCxDQUFlLFVBQVksQ0FDdkIsR0FBSUMsQ0FBQUEsQ0FBUSxDQUFHSCxDQUFJLENBQUNFLE1BQXBCLENBQ0EsTUFBTyxXQUFZLE9BQ3FDLFdBQWhELFFBQVEsTUFBS0QsOEJBREYsQ0FVSkUsQ0FBUSxDQUFDTixLQUFULENBQWUsSUFBZixDQUFxQkYsU0FBckIsQ0FWSSxFQUdYLE1BQU8sTUFBS00sOEJBSEQsQ0FJSixDQUNIRyxLQUFLLENBQUUsRUFESixDQUVIQyxLQUFLLENBQUUsRUFGSixDQUdIQyxNQUFNLENBQUUsRUFITCxDQUpJLENBWWxCLENBQ0osQ0FmYSxFQWdCakIsQ0F4QkQsQyxDQTBCQVIsU0FBUyxDQUFDQyxNQUFWLENBQWlCLHVCQUFqQixDQUEwQyxVQUFtQixDQUN6RCxHQUFJQyxDQUFBQSxDQUFJLENBQUcsSUFBWCxDQUVBLEtBQUtPLGVBQUwsQ0FBd0IsVUFBWSxDQUNoQyxHQUFJSixDQUFBQSxDQUFRLENBQUdILENBQUksQ0FBQ08sZUFBcEIsQ0FFQSxNQUFPLFVBQVVDLENBQVYsQ0FBYSxTQUNYQSxDQUFELEVBQW9CLENBQWQsR0FBQUEsQ0FBQyxDQUFDQyxPQURJLEdBRUxOLENBQVEsQ0FBQ04sS0FBVCxDQUFlLElBQWYsQ0FBcUJGLFNBQXJCLENBSWQsQ0FDSixDQVZzQixFQVcxQixDQWRELEMiLCJzb3VyY2VzQ29udGVudCI6WyIvL0FqYXggc2VsZWN0IGNvbnN0cnVjdG9yXHJcbmxldCBhamF4U2VsZWN0ID0gZnVuY3Rpb24gKGVsLCBwYXJlbnRFbCA9IG51bGwsIG11bHRpTGFuZyA9IHRydWUpIHtcclxuICAgIGxldCBtZXRob2QgPSBlbC5kYXRhKCdtZXRob2QnKSxcclxuICAgICAgICAvLyBkb21haW5OYW1lID0gJ2h0dHBzOi8vZGV2My5wYW5hbWEua3ovJyxcclxuICAgICAgICBkb21haW5OYW1lID0gJycsXHJcbiAgICAgICAgbGFuZyA9IHdpbmRvdy5MYXJhdmVsLmxhbmcsXHJcbiAgICAgICAgdXJsID0gZG9tYWluTmFtZSArIGxhbmcgKyAnLycgKyBtZXRob2Q7XHJcblxyXG4gICAgbGV0IHBhZ2VDb3VudGVyID0gMSxcclxuICAgICAgICBsYXN0UGFnZSA9IGZhbHNlLFxyXG4gICAgICAgIGxvYWRFbmFibGUgPSB0cnVlO1xyXG5cclxuICAgIC8vaW5pdCBTZWxlY3RpemVcclxuICAgIGxldCBzZWxlY3QgPSBlbC5zZWxlY3RpemUoe1xyXG4gICAgICAgIHBsdWdpbnM6IGVsWzBdLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKSA/IFsncmVtb3ZlX2J1dHRvbicsICdzaWxlbnRfcmVtb3ZlJywgJ3N0b3BfYmFja3NwYWNlX2RlbGV0ZSddIDogbnVsbCxcclxuICAgICAgICBhbGxvd0VtcHR5T3B0aW9uOiB0cnVlLFxyXG4gICAgICAgIG1heE9wdGlvbnM6IDEwMDAwLFxyXG4gICAgICAgIC8vIHNvcnRGaWVsZDogW1xyXG4gICAgICAgIC8vICAge1xyXG4gICAgICAgIC8vICAgICBmaWVsZDogJ3RleHQnLFxyXG4gICAgICAgIC8vICAgICBkaXJlY3Rpb246ICdhc2MnXHJcbiAgICAgICAgLy8gICB9XHJcbiAgICAgICAgLy8gXSxcclxuICAgICAgICBvbkluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbGV0IGFkZGl0aW9uYWxEYXRhID0gcGFyZW50RWwgPyAocGFyZW50RWwudmFsKCkgPyB7J3Byb2Zlc3Npb25zJzogdG9BcnJheShwYXJlbnRFbC52YWwoKSl9IDogbnVsbCkgOiBudWxsO1xyXG4gICAgICAgICAgICBzZW5kUmVxdWVzdChhZGRpdGlvbmFsRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvL2ZldGNoIHRoZSBpbnN0YW5jZVxyXG4gICAgbGV0IGNvbnRyb2xzID0gc2VsZWN0WzBdLnNlbGVjdGl6ZSxcclxuICAgICAgICBkcm9wZG93bkNvbnRlbnQgPSBjb250cm9scy4kZHJvcGRvd25fY29udGVudCxcclxuICAgICAgICBub1Jlc3VsdHNEZWZhdWx0TXNnID0ge1xyXG4gICAgICAgICAgICBlbjogJ05vIHJlc3VsdHMnLFxyXG4gICAgICAgICAgICBydTogJ9Cd0LjRh9C10LPQviDQvdC1INC90LDQudC00LXQvdC+JyxcclxuICAgICAgICAgICAga2s6ICfQldGI0YLQtdC90LUg0YLQsNCx0YvQu9Cz0LDQvSDQttC+0LonXHJcbiAgICAgICAgfSxcclxuICAgICAgICBub1Jlc3VsdHNNc2cgPSBjb250cm9scy4kaW5wdXRbMF0uZGF0YXNldC5ub3Jlc3VsdHMgPyBjb250cm9scy4kaW5wdXRbMF0uZGF0YXNldC5ub3Jlc3VsdHMgOiBub1Jlc3VsdHNEZWZhdWx0TXNnW2xhbmddO1xyXG5cclxuICAgIC8vT24gdHlwZSBldmVudFxyXG4gICAgY29udHJvbHMub24oJ3R5cGUnLCBkZWxheShmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgbGV0IGFkZGl0aW9uYWxEYXRhID0gcGFyZW50RWwgPyAocGFyZW50RWwudmFsKCkgPyB7J3Byb2Zlc3Npb25zJzogdG9BcnJheShwYXJlbnRFbC52YWwoKSl9IDogbnVsbCkgOiBudWxsO1xyXG4gICAgICAgIHNlbmRSZXF1ZXN0KGFkZGl0aW9uYWxEYXRhLCB2YWwsIHRydWUpO1xyXG4gICAgfSwgMTAwMCkpO1xyXG5cclxuICAgIGNvbnRyb2xzLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29udHJvbHMuJGNvbnRyb2xfaW5wdXRbMF0ucGxhY2Vob2xkZXIgPSBlbFswXS5hdHRyaWJ1dGVzLnBsYWNlaG9sZGVyLnZhbHVlO1xyXG4gICAgICAgIGxvYWRFbmFibGUgPSBmYWxzZTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbG9hZEVuYWJsZSA9IHRydWU7XHJcbiAgICAgICAgfSwgMTUwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnRyb2xzLm9uKCdibHVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnRyb2xzLiRjb250cm9sWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ25vLXJlc3VsdHMnKTtcclxuICAgICAgICByZW1vdmVNZXNzYWdlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkcm9wZG93bkNvbnRlbnQub24oJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgYWRkaXRpb25hbERhdGEgPSBwYXJlbnRFbCA/IChwYXJlbnRFbC52YWwoKSA/IHsncHJvZmVzc2lvbnMnOiB0b0FycmF5KHBhcmVudEVsLnZhbCgpKX0gOiBudWxsKSA6IG51bGw7XHJcbiAgICAgICAgbGV0IHB4VG9Cb3R0b20gPSBkcm9wZG93bkNvbnRlbnRbMF0uc2Nyb2xsSGVpZ2h0IC0gZHJvcGRvd25Db250ZW50WzBdLnNjcm9sbFRvcCAtIGRyb3Bkb3duQ29udGVudFswXS5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgaWYgKHB4VG9Cb3R0b20gPCAxMDAwICYmIGxvYWRFbmFibGUgJiYgIWxhc3RQYWdlKSB7XHJcbiAgICAgICAgICAgIGxvYWRFbmFibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgY29udHJvbHMuJGRyb3Bkb3duWzBdLmNsYXNzTGlzdC5hZGQoJ2xvYWRpbmcnKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBzY3JvbGxUb3AgPSBkcm9wZG93bkNvbnRlbnRbMF0uc2Nyb2xsVG9wO1xyXG5cclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmFkZGl0aW9uYWxEYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBjb250cm9scy5sYXN0UXVlcnksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJwYWdlXCI6IHBhZ2VDb3VudGVyICsgMVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlck5ld09wdGlvbnMocmVzcG9uc2UuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbHMucmVmcmVzaE9wdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkRW5hYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlQ291bnRlcisrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbHMuJGRyb3Bkb3duWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ2xvYWRpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCAxNTApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bkNvbnRlbnRbMF0uc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuY3VycmVudF9wYWdlID09PSByZXNwb25zZS5sYXN0X3BhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBhZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCFlbFswXS5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJykpIHtcclxuICAgICAgICBjb250cm9scy5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xzLmNsZWFyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVuZGVyTmV3T3B0aW9ucyhkYXRhKSB7XHJcbiAgICAgICAgbGV0IG5ld09wdGlvbnMgPSBbXTtcclxuICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgbmV3T3B0aW9ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLmlkLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogaXRlbVtcIm5hbWVcIiArIChtdWx0aUxhbmcgPyAnXycgKyBsYW5nIDogJycpXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb250cm9scy5hZGRPcHRpb24obmV3T3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2F2ZU9sZE9wdGlvbnMoKSB7XHJcbiAgICAgICAgbGV0IHNlbGVjdGVkVmFsdWVzID0gW107XHJcbiAgICAgICAgT2JqZWN0LnZhbHVlcyhjb250cm9scy5vcHRpb25zKS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkVmFsdWVzLnB1c2goaXRlbS52YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29udHJvbHMuc2V0VmFsdWUoc2VsZWN0ZWRWYWx1ZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZE1lc3NhZ2UoKSB7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBtZXNzYWdlLmNsYXNzTmFtZSA9ICdub3Jlc3VsdHMtbWVzc2FnZSc7XHJcbiAgICAgICAgbWVzc2FnZS5pbm5lckhUTUwgPSBub1Jlc3VsdHNNc2c7XHJcbiAgICAgICAgY29udHJvbHMuJGNvbnRyb2xbMF0ucGFyZW50RWxlbWVudC5hcHBlbmQobWVzc2FnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVtb3ZlTWVzc2FnZSgpIHtcclxuICAgICAgICBsZXQgbWVzc2FnZSA9IGNvbnRyb2xzLiRjb250cm9sWzBdLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm5vcmVzdWx0cy1tZXNzYWdlJyk7XHJcbiAgICAgICAgaWYgKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgbWVzc2FnZS5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZm9jdXNPblNlYXJjaEZpZWxkKHZhbCkge1xyXG4gICAgICAgIGNvbnRyb2xzLnNldFRleHRib3hWYWx1ZSh2YWwpO1xyXG4gICAgICAgIGNvbnRyb2xzLmZvY3VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkRGVmYXVsdE9wdGlvbigpIHtcclxuICAgICAgICBjb250cm9scy5hZGRPcHRpb24oe1xyXG4gICAgICAgICAgICAkb3JkZXI6IDAsXHJcbiAgICAgICAgICAgIHZhbHVlOiAnJyxcclxuICAgICAgICAgICAgdGV4dDogZWwuZGF0YSgnZGVmYXVsdCcpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2VuZFJlcXVlc3QoYWRkaXRpb25hbERhdGEgPSBudWxsLCBzZWFyY2hWYWx1ZSA9ICcnLCBmb2N1cyA9IGZhbHNlLCBjbGVhck9wdGlvbnMgPSB0cnVlKSB7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgLi4uYWRkaXRpb25hbERhdGEsXHJcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogc2VhcmNoVmFsdWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2xlYXJPcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbHMuY2xlYXJPcHRpb25zKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubGVuZ3RoICE9PSAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNhdmVPbGRPcHRpb25zKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbC5kYXRhKCdkZWZhdWx0JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkRGVmYXVsdE9wdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyTmV3T3B0aW9ucyhyZXNwb25zZS5kYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvY3VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzT25TZWFyY2hGaWVsZChzZWFyY2hWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVNZXNzYWdlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzLiRjb250cm9sWzBdLmNsYXNzTGlzdC5hZGQoJ25vLXJlc3VsdHMnKTtcclxuICAgICAgICAgICAgICAgICAgICBhZGRNZXNzYWdlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcGFnZUNvdW50ZXIgPSAxO1xyXG4gICAgICAgICAgICAgICAgbGFzdFBhZ2UgPSAocmVzcG9uc2UuY3VycmVudF9wYWdlID09PSByZXNwb25zZS5sYXN0X3BhZ2UpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbiAoYWRkaXRpb25hbERhdGEpIHtcclxuICAgICAgICBzZW5kUmVxdWVzdChhZGRpdGlvbmFsRGF0YSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29udHJvbHMuY2xlYXIoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5yZW1vdmVNZXNzYWdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJlbW92ZU1lc3NhZ2UoKTtcclxuICAgIH1cclxufTtcclxuXHJcbi8vRGVsYXkgZnVuY3Rpb25cclxuZnVuY3Rpb24gZGVsYXkoY2FsbGJhY2ssIG1zKSB7XHJcbiAgICBsZXQgdGltZXIgPSAwO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgY29udGV4dCA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcclxuICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseShjb250ZXh0LCBhcmdzKTtcclxuICAgICAgICB9LCBtcyB8fCAwKTtcclxuICAgIH07XHJcbn1cclxuXHJcblNlbGVjdGl6ZS5kZWZpbmUoJ3NpbGVudF9yZW1vdmUnLCBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgbGV0IHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIC8vIGRlZmFuZyB0aGUgaW50ZXJuYWwgc2VhcmNoIG1ldGhvZCB3aGVuIHJlbW92ZSBoYXMgYmVlbiBjbGlja2VkXHJcbiAgICB0aGlzLm9uKCdpdGVtX3JlbW92ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnBsdWdpbl9zaWxlbnRfcmVtb3ZlX2luX3JlbW92ZSA9IHRydWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnNlYXJjaCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IG9yaWdpbmFsID0gc2VsZi5zZWFyY2g7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAodGhpcy5wbHVnaW5fc2lsZW50X3JlbW92ZV9pbl9yZW1vdmUpICE9IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgIC8vIHJlLWVuYWJsZSBub3JtYWwgc2VhcmNoaW5nXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wbHVnaW5fc2lsZW50X3JlbW92ZV9pbl9yZW1vdmU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOiB7fSxcclxuICAgICAgICAgICAgICAgICAgICBxdWVyeTogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5zOiBbXVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pKCk7XHJcbn0pO1xyXG5cclxuU2VsZWN0aXplLmRlZmluZShcInN0b3BfYmFja3NwYWNlX2RlbGV0ZVwiLCBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgbGV0IHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHRoaXMuZGVsZXRlU2VsZWN0aW9uID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgb3JpZ2luYWwgPSBzZWxmLmRlbGV0ZVNlbGVjdGlvbjtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmICghZSB8fCBlLmtleUNvZGUgIT09IDgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgIH0pKCk7XHJcbn0pOyJdLCJmaWxlIjoiYWpheC1zZWxlY3QuanMifQ==
